

----STARTUP---- (30 October 2019 10:25:33) as /Applications/cuis/CuisUniversity-3938.image!


----QUIT----(30 October 2019 10:25:58) CuisUniversity-3938.image priorSource: 14319118!

----STARTUP---- (11 November 2019 16:40:38) as /Applications/cuis/CuisUniversity-3938.image!


----QUIT----(11 November 2019 16:40:41) CuisUniversity-3938.image priorSource: 14262682!

----STARTUP---- (11 November 2019 16:40:47) as /Applications/cuis/CuisUniversity-3938.image!


----End fileIn of /Users/etorres/Facu/Ingsoft-I/25-TusLibros/3/TusLibros.st----!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/11/2019 16:44:55'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/11/2019 16:44:55'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/11/2019 16:44:55'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/11/2019 16:44:55'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 16:44:55'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/11/2019 16:44:55'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 16:44:55'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/11/2019 16:44:55'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/11/2019 16:44:55'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/11/2019 16:44:55'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 16:47:37'!
test11AddABookTwiceToCartListsTwoItem

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog .
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 2.
	
	self assert: ((interface listCart: cartID ) includes: factory itemSellByTheStore ).
	self assert: ((interface listCart: cartID ) occurrencesOf: factory itemSellByTheStore ) equals: 2.! !

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/11/2019 16:47:37'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/11/2019 16:47:37'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/11/2019 16:47:37'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/11/2019 16:47:37'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/11/2019 16:47:37'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 16:47:37'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/11/2019 16:47:37'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 16:47:37'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/11/2019 16:47:37'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/11/2019 16:47:37'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/11/2019 16:47:37'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/11/2019 16:47:37'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 16:48:24'!
test11AddTwoDifferentBookToCartListsTwoDifferentItems

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog .
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self assert: ((interface listCart: cartID ) includes: factory itemSellByTheStore ).
	self assert: ((interface listCart: cartID ) occurrencesOf: factory itemSellByTheStore ) equals: 2.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 16:48:45' prior: 50778316!
test11AddTwoDifferentBookToCartListsTwoDifferentItems

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog .
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self assert: ((interface listCart: cartID ) includes: factory itemSellByTheStore ).
	self assert: ((interface listCart: cartID ) occurrencesOf: factory itemSellByTheStore ) equals: 1.
	
	self assert: ((interface listCart: cartID ) includes: factory itemSellByTheStore ).
	self assert: ((interface listCart: cartID ) occurrencesOf: factory itemSellByTheStore ) equals: 1.! !
!StoreTestObjectsFactory methodsFor: 'items' stamp: 'Eden Torres 11/11/2019 16:49:56'!
anotherItemSellByTheStore
	
	^ 'anotherValidBook'! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 16:50:06'!
test12AddTwoDifferentBookToCartListsTwoDifferentItems

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog .
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self assert: ((interface listCart: cartID ) includes: factory itemSellByTheStore ).
	self assert: ((interface listCart: cartID ) occurrencesOf: factory itemSellByTheStore ) equals: 1.
	
	self assert: ((interface listCart: cartID ) includes: factory itemSellByTheStore ).
	self assert: ((interface listCart: cartID ) occurrencesOf: factory itemSellByTheStore ) equals: 1.! !

!methodRemoval: TusLibrosInternalInterfaceTest #test11AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/11/2019 16:50:06'!
test11AddTwoDifferentBookToCartListsTwoDifferentItems

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog .
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self assert: ((interface listCart: cartID ) includes: factory itemSellByTheStore ).
	self assert: ((interface listCart: cartID ) occurrencesOf: factory itemSellByTheStore ) equals: 1.
	
	self assert: ((interface listCart: cartID ) includes: factory itemSellByTheStore ).
	self assert: ((interface listCart: cartID ) occurrencesOf: factory itemSellByTheStore ) equals: 1.!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 16:50:21' prior: 50778372!
test12AddTwoDifferentBookToCartListsTwoDifferentItems

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog .
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	interface addToCart: cartID item: factory anotherItemSellByTheStore withQuantity: 1.
	
	self assert: ((interface listCart: cartID ) includes: factory itemSellByTheStore ).
	self assert: ((interface listCart: cartID ) occurrencesOf: factory itemSellByTheStore ) equals: 1.
	
	self assert: ((interface listCart: cartID ) includes: factory anotherItemSellByTheStore ).
	self assert: ((interface listCart: cartID ) occurrencesOf: factory anotherItemSellByTheStore ) equals: 1.! !

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/11/2019 16:50:23'!
ERROR!
!StoreTestObjectsFactory methodsFor: 'cart' stamp: 'Eden Torres 11/11/2019 16:51:37' prior: 50778079!
defaultCatalog
	
	^ Dictionary new
		at: self itemSellByTheStore put: self itemSellByTheStorePrice;
		at: self anotherItemSellByTheStore  put: self itemSellByTheStorePrice; 
		yourself! !

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/11/2019 16:51:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/11/2019 16:51:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/11/2019 16:51:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/11/2019 16:51:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 16:51:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/11/2019 16:51:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 16:51:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/11/2019 16:51:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/11/2019 16:51:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/11/2019 16:51:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/11/2019 16:51:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/11/2019 16:51:39'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 16:53:04'!
test13ListCartDoesNotListItemNotIncludedInCart

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog .
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self deny: ((interface listCart: cartID ) includes: factory itemNotSellByTheStore ).! !

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/11/2019 16:53:05'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/11/2019 16:53:05'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/11/2019 16:53:05'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/11/2019 16:53:05'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/11/2019 16:53:05'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 16:53:05'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/11/2019 16:53:05'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 16:53:05'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/11/2019 16:53:05'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/11/2019 16:53:05'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/11/2019 16:53:05'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/11/2019 16:53:05'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/11/2019 16:53:05'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/11/2019 16:53:05'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 16:53:11' prior: 50778526!
test13ListCartDoesNotListItemNotIncludedInCart

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog .
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self deny: ((interface listCart: cartID ) includes: factory itemNotSellByTheStore).! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 17:41:03' prior: 50778605!
test13ListCartDoesNotListItemNotIncludedInCart

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog .
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self deny: ((interface listCart: cartID ) includes: factory anotherItemSellByTheStore).! !

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/11/2019 17:41:04'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/11/2019 17:41:04'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/11/2019 17:41:04'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/11/2019 17:41:04'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/11/2019 17:41:04'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 17:41:04'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/11/2019 17:41:04'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 17:41:04'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/11/2019 17:41:04'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/11/2019 17:41:04'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/11/2019 17:41:04'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/11/2019 17:41:04'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/11/2019 17:41:04'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/11/2019 17:41:04'!
PASSED!

----End fileIn of /Applications/cuis/Packages/TerseGuide.pck.st----!

!classDefinition: #TusLibrosInternalInterface category: #TusLibros stamp: 'Eden Torres 11/11/2019 17:52:26'!
Object subclass: #TusLibrosInternalInterface
	instanceVariableNames: 'userRegistry carts catalog lastCartID clock'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!TusLibrosInternalInterface methodsFor: 'initialization' stamp: 'Eden Torres 11/11/2019 17:52:24'!
initializeWithUsers: aUserRegistry withCatalog: aCatalog withClock: aClock 
	
	userRegistry := aUserRegistry.
	carts := Dictionary new.
	catalog := aCatalog.
	lastCartID := 0.
	clock := aClock.! !

!methodRemoval: TusLibrosInternalInterface #initializeWithUsers:withCatalog: stamp: 'Eden Torres 11/11/2019 17:52:36'!
initializeWithUsers: aUserRegistry withCatalog: aCatalog
	
	userRegistry := aUserRegistry.
	carts := Dictionary new.
	catalog := aCatalog.
	lastCartID := 0.!
!TusLibrosInternalInterface class methodsFor: 'instance creation' stamp: 'Eden Torres 11/11/2019 17:53:07'!
withUsers: aUserRegistry withCatalog: aCatalog withClock: aClock
	
	^self new initializeWithUsers: aUserRegistry withCatalog: aCatalog withClock: aClock.! !

!methodRemoval: TusLibrosInternalInterface class #withUsers:withCatalog: stamp: 'Eden Torres 11/11/2019 17:53:11'!
withUsers: aUserRegistry withCatalog: aCatalog
	
	^self new initializeWithUsers: aUserRegistry withCatalog: aCatalog.!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 17:53:51' prior: 50777633!
test01CreateCartRaisesErrorWhenNonExistentUser

	| interface emptyUserRegistry |
	
	emptyUserRegistry := Dictionary new.

	interface := TusLibrosInternalInterface withUsers: emptyUserRegistry withCatalog: factory defaultCatalog withClock: self.
	
	self should: [interface createCartFor: edenUser withPassword: edenPassword]
		 raise: Error - MessageNotUnderstood
		 withMessageText: 'Usuario no registrado'.
		
	self assert: interface carts isEmpty.
		 ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 17:53:56' prior: 50777650!
test02CreateCartRaisesErrorWhenPasswordDoesNotMatch

	| interface |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self..
	
	self should: [interface createCartFor: edenUser withPassword: 'wrong password']
		 raise: Error - MessageNotUnderstood
		 withMessageText: 'Contraseña incorrecta'.
		
	self assert: interface carts isEmpty.
		 ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 17:53:58' prior: 50781775!
test02CreateCartRaisesErrorWhenPasswordDoesNotMatch

	| interface |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
	
	self should: [interface createCartFor: edenUser withPassword: 'wrong password']
		 raise: Error - MessageNotUnderstood
		 withMessageText: 'Contraseña incorrecta'.
		
	self assert: interface carts isEmpty.
		 ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 17:54:05' prior: 50777665!
test03CreateCartCreatesACartWithValidUser

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
	
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self assert: interface carts size equals: 1.
	self assert: (interface includesCartID: cartID).! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 17:54:09' prior: 50777679!
test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs

	| interface cartID1 cartID2 |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
	
	cartID1 := interface createCartFor: edenUser withPassword: edenPassword.
	cartID2 := interface createCartFor: edenUser withPassword: edenPassword.
		
	self assert: interface carts size equals: 2.
	self assert: (interface includesCartID: cartID1).
	self assert: (interface includesCartID: cartID2).
	self deny: cartID1 = cartID2 .! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 17:54:14' prior: 50777699!
test05ListCartRaisesErrorWhenCartIDDoesNotExist

	| interface |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
		
	self should: [interface listCart: 'INVALID CART ID']
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'CartID inválido'.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 17:54:17' prior: 50777712!
test06ListCartListsNothingWhenCartIsJustCreated

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
	
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self assert: (interface listCart: cartID ) isEmpty .! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 17:54:21' prior: 50777725!
test07AddToCartRaisesErrorWhenCartIDDoesNotExist

	| interface |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
		
	self should: [interface addToCart: 'INVALID CART ID' item: factory itemSellByTheStore withQuantity: 1]
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'CartID inválido'.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 17:54:25' prior: 50777739!
test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self should: [interface addToCart: cartID item: factory itemNotSellByTheStore withQuantity: 1]
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'Item is not in catalog'.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 17:54:30' prior: 50777756!
test09AddToCartRaisesErrorWhenQuantityIsZero

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self should: [interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 0]
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'Invalid number of items'.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 17:54:34' prior: 50777773!
test10AddToCartListsOneItem

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self assert: ((interface listCart: cartID ) includes: factory itemSellByTheStore ).
	self assert: ((interface listCart: cartID ) occurrencesOf: factory itemSellByTheStore ) equals: 1.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 17:54:38' prior: 50778244!
test11AddABookTwiceToCartListsTwoItem

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 2.
	
	self assert: ((interface listCart: cartID ) includes: factory itemSellByTheStore ).
	self assert: ((interface listCart: cartID ) occurrencesOf: factory itemSellByTheStore ) equals: 2.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 17:54:41' prior: 50778430!
test12AddTwoDifferentBookToCartListsTwoDifferentItems

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	interface addToCart: cartID item: factory anotherItemSellByTheStore withQuantity: 1.
	
	self assert: ((interface listCart: cartID ) includes: factory itemSellByTheStore ).
	self assert: ((interface listCart: cartID ) occurrencesOf: factory itemSellByTheStore ) equals: 1.
	
	self assert: ((interface listCart: cartID ) includes: factory anotherItemSellByTheStore ).
	self assert: ((interface listCart: cartID ) occurrencesOf: factory anotherItemSellByTheStore ) equals: 1.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 17:54:44' prior: 50778622!
test13ListCartDoesNotListItemNotIncludedInCart

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self deny: ((interface listCart: cartID ) includes: factory anotherItemSellByTheStore).! !

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/11/2019 17:54:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/11/2019 17:54:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/11/2019 17:54:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/11/2019 17:54:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/11/2019 17:54:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 17:54:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/11/2019 17:54:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 17:54:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/11/2019 17:54:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/11/2019 17:54:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/11/2019 17:54:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/11/2019 17:54:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/11/2019 17:54:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/11/2019 17:54:45'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 17:56:25'!
test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self deny: ((interface listCart: cartID ) includes: factory anotherItemSellByTheStore).! !

x _ Time dateAndTimeNow.			"answer the current date and time"!

x _ Time now.							"answer the current time"!

x _ Time now.							"answer the current time"!

Time now + 30!

Time localMillisecondClock!

Time localMillisecondClock + 30!

30 minutes !

30 milliSeconds to: minute !

30 seconds convertTo: minute !

30 seconds  !

Time now + 30 minutes !

Time now + 30 minutes.!

30 minutes totalMilliseconds.!

!classDefinition: #TusLibrosInternalInterfaceTest category: #TusLibros stamp: 'Eden Torres 11/11/2019 18:05:24'!
TestCase subclass: #TusLibrosInternalInterfaceTest
	instanceVariableNames: 'edenUser edenPassword userRegistry factory time'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!TusLibrosInternalInterfaceTest methodsFor: 'clock protocol' stamp: 'Eden Torres 11/11/2019 18:05:22'!
localMillisecondClock
	
	time.! !

!classDefinition: #TusLibrosInternalInterfaceTest category: #TusLibros stamp: 'Eden Torres 11/11/2019 18:06:56'!
TestCase subclass: #TusLibrosInternalInterfaceTest
	instanceVariableNames: 'edenUser edenPassword userRegistry factory stubbedTime'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!TusLibrosInternalInterfaceTest methodsFor: 'clock protocol' stamp: 'Eden Torres 11/11/2019 18:07:03' prior: 50782114!
localMillisecondClock
	
	stubbedTime.! !
!TusLibrosInternalInterfaceTest methodsFor: 'clock protocol' stamp: 'Eden Torres 11/11/2019 18:07:09' prior: 50782129!
localMillisecondClock
	
	^stubbedTime.! !
!TusLibrosInternalInterfaceTest methodsFor: 'setUp/tearDown' stamp: 'Eden Torres 11/11/2019 18:08:31' prior: 50777792!
setUp

	edenUser := 'eden'.
	edenPassword := '12345678'.
	userRegistry := Dictionary new add: edenUser->edenPassword; yourself.
	factory := StoreTestObjectsFactory new.
	stubbedTime := 1! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 18:12:38' prior: 50782074!
test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 30 minutes totalMilliseconds.
	
	self should: [interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.]
		raise: Error - MessageNotUnderstood
		withMessageText: 'Carrito expirado'. 
	
	self deny: ((interface listCart: cartID ) includes: factory itemSellByTheStore).! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 18:15:34' prior: 50782150!
test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 30 minutes totalMilliseconds.
	
	self should: [interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.]
		raise: Error - MessageNotUnderstood
		withMessageText: 'Carrito expirado'. 
	
	self assert: interface carts size isEmpty.! !

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/11/2019 18:17:48'!
FAILURE!
!TusLibrosInternalInterface methodsFor: 'cart managment - private' stamp: 'Eden Torres 11/11/2019 18:18:51'!
validateCartExpiration: aCartID

	(carts includesKey: aCartID) ifFalse: [self error: 'CartID inválido'].! !
!TusLibrosInternalInterface methodsFor: 'cart managment - private' stamp: 'Eden Torres 11/11/2019 18:19:03' prior: 50782198!
validateCartExpiration: aCartID

	(carts includesKey: aCartID) ifFalse: [self error: 'Carrito expirado'].! !

Object subclass: #CartInterface
	instanceVariableNames: 'catalog items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CartInterface category: #TusLibros stamp: 'Eden Torres 11/11/2019 18:27:43'!
Object subclass: #CartInterface
	instanceVariableNames: 'catalog items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CartInterface methodsFor: 'initialization' stamp: 'Eden Torres 11/11/2019 18:28:45'!
initialiazeWithCatalog: aCatalog withClock: aClock! !
!CartInterface class methodsFor: 'instance creation' stamp: 'Eden Torres 11/11/2019 18:29:32'!
withCatalog: aCatalog withClock: aClock

	^ self new initialiazeWithCatalog: aCatalog withClock: aClock.! !

!classDefinition: #CartInterface category: #TusLibros stamp: 'Eden Torres 11/11/2019 18:31:25'!
Object subclass: #CartInterface
	instanceVariableNames: 'catalog items cart'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CartInterface category: #TusLibros stamp: 'Eden Torres 11/11/2019 18:31:26'!
Object subclass: #CartInterface
	instanceVariableNames: 'catalog items cart timeLastModified'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CartInterface category: #TusLibros stamp: 'Eden Torres 11/11/2019 18:31:27'!
Object subclass: #CartInterface
	instanceVariableNames: 'catalog items cart timeLastModified clock'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CartInterface methodsFor: 'initialization' stamp: 'Eden Torres 11/11/2019 18:31:19' prior: 50782225!
initialiazeWithCatalog: aCatalog withClock: aClock

	cart := Cart acceptingItemsOf: aCatalog.
	timeLastModified := aClock localMillisecondClock.
	clock := aClock. ! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/11/2019 18:32:20' prior: 50778139!
createCartFor: aUserID withPassword: aPassword 
	
	| cartID |

	(userRegistry includesKey: aUserID) ifFalse: [self error: 'Usuario no registrado'].
	((userRegistry at: aUserID) = aPassword) ifFalse: [self error: 'Contraseña incorrecta'].

	cartID := self nextCartID .
	carts add: (cartID)->(CartInterface withCatalog: catalog withClock: clock).

	^cartID.! !
!CartInterface methodsFor: 'initialization' stamp: 'Eden Torres 11/11/2019 18:33:48'!
addToCart: aCartID item: anItem withQuantity: anAmount ! !
!CartInterface methodsFor: 'initialization' stamp: 'Eden Torres 11/11/2019 18:34:17' prior: 50782284!
addToCart: aCartID item: anItem withQuantity: anAmount 


	cart add: anAmount of: anItem .! !
!CartInterface methodsFor: 'initialization' stamp: 'Eden Torres 11/11/2019 18:34:43'!
addItem: anItem withQuantity: anAmount 


	cart add: anAmount of: anItem .! !

!methodRemoval: CartInterface #addToCart:item:withQuantity: stamp: 'Eden Torres 11/11/2019 18:34:48'!
addToCart: aCartID item: anItem withQuantity: anAmount 


	cart add: anAmount of: anItem .!
!CartInterface methodsFor: 'initialization' stamp: 'Eden Torres 11/11/2019 18:34:52' prior: 50782296!
addItem: anItem withQuantity: anAmount 

	cart add: anAmount of: anItem .! !
!CartInterface methodsFor: 'initialization' stamp: 'Eden Torres 11/11/2019 18:35:29' prior: 50782308!
addItem: anItem withQuantity: anAmount 

	cart add: anAmount of: anItem.
	timeLastModified := clock localMillisecondClock.! !
!CartInterface methodsFor: 'initialization' stamp: 'Eden Torres 11/11/2019 18:38:40'!
list 
	
	timeLastModified := clock localMillisecondClock. 
	^ cart list.! !
!CartInterface methodsFor: 'testing' stamp: 'Eden Torres 11/11/2019 18:42:16'!
IsExpired

	^ timeLastModified + 30 minutes totalMilliseconds < clock localMillisecondClock.! !
!TusLibrosInternalInterface methodsFor: 'cart managment - private' stamp: 'Eden Torres 11/11/2019 18:43:28' prior: 50782206!
validateCartExpiration: aCartID

	(carts at: aCartID) IsExpired ifTrue: [carts removeKey: aCartID. self error: 'Carrito expirado'].! !

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/11/2019 18:43:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/11/2019 18:43:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/11/2019 18:43:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/11/2019 18:43:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 18:43:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/11/2019 18:43:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 18:43:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/11/2019 18:43:35'!
ERROR!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/11/2019 18:43:35'!
ERROR!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/11/2019 18:43:35'!
ERROR!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/11/2019 18:43:35'!
ERROR!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/11/2019 18:43:35'!
ERROR!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/11/2019 18:43:35'!
ERROR!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/11/2019 18:43:35'!
ERROR!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/11/2019 18:43:47'!
ERROR!
!CartInterface methodsFor: 'initialization' stamp: 'Eden Torres 11/11/2019 18:44:49'!
add: anItem of: anAmount 

	cart add: anAmount of: anItem.
	timeLastModified := clock localMillisecondClock.! !
!CartInterface methodsFor: 'initialization' stamp: 'Eden Torres 11/11/2019 18:45:00' prior: 50782406!
add: anAmount  of: anItem

	cart add: anAmount of: anItem.
	timeLastModified := clock localMillisecondClock.! !
!CartInterface methodsFor: 'initialization' stamp: 'Eden Torres 11/11/2019 18:45:02' prior: 50782413!
add: anAmount of: anItem

	cart add: anAmount of: anItem.
	timeLastModified := clock localMillisecondClock.! !

!methodRemoval: CartInterface #addItem:withQuantity: stamp: 'Eden Torres 11/11/2019 18:45:07'!
addItem: anItem withQuantity: anAmount 

	cart add: anAmount of: anItem.
	timeLastModified := clock localMillisecondClock.!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/11/2019 18:45:13'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/11/2019 18:45:13'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/11/2019 18:45:13'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/11/2019 18:45:13'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 18:45:13'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/11/2019 18:45:13'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 18:45:13'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/11/2019 18:45:13'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/11/2019 18:45:13'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/11/2019 18:45:13'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/11/2019 18:45:13'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/11/2019 18:45:13'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/11/2019 18:45:13'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/11/2019 18:45:13'!
FAILURE!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/11/2019 18:45:13'!
FAILURE!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 18:45:47' prior: 50782172!
test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 31 minutes totalMilliseconds.
	
	self should: [interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.]
		raise: Error - MessageNotUnderstood
		withMessageText: 'Carrito expirado'. 
	
	self assert: interface carts size isEmpty.! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/11/2019 18:46:06' prior: 50778131!
addToCart: aCartID item: anItem withQuantity: anAmount 
	
	self validateCartID: aCartID.
	self validateCartExpiration: aCartID.
	
	(carts at: aCartID ) add: anAmount of: anItem .! !

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/11/2019 18:46:14'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/11/2019 18:46:14'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/11/2019 18:46:14'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/11/2019 18:46:14'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 18:46:14'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/11/2019 18:46:14'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 18:46:14'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/11/2019 18:46:14'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/11/2019 18:46:14'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/11/2019 18:46:14'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/11/2019 18:46:14'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/11/2019 18:46:14'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/11/2019 18:46:14'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/11/2019 18:46:14'!
ERROR!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/11/2019 18:46:14'!
ERROR!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 18:46:27' prior: 50782501!
test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 31 minutes totalMilliseconds.
	
	self should: [interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.]
		raise: Error - MessageNotUnderstood
		withMessageText: 'Carrito expirado'. 
	
	self assert: interface carts isEmpty.! !

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/11/2019 18:46:28'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/11/2019 18:46:28'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/11/2019 18:46:28'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/11/2019 18:46:28'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/11/2019 18:46:28'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 18:46:28'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/11/2019 18:46:28'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 18:46:28'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/11/2019 18:46:28'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/11/2019 18:46:28'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/11/2019 18:46:28'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/11/2019 18:46:28'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/11/2019 18:46:28'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/11/2019 18:46:28'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/11/2019 18:46:28'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 18:46:36' prior: 50782598!
test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 30 minutes totalMilliseconds.
	
	self should: [interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.]
		raise: Error - MessageNotUnderstood
		withMessageText: 'Carrito expirado'. 
	
	self assert: interface carts isEmpty.! !

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/11/2019 18:46:36'!
FAILURE!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 18:46:41' prior: 50782685!
test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 31 minutes totalMilliseconds.
	
	self should: [interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.]
		raise: Error - MessageNotUnderstood
		withMessageText: 'Carrito expirado'. 
	
	self assert: interface carts isEmpty.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 18:52:16'!
test15ShouldRaiseErrorWhenListingAnExpiredCart

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 31 minutes totalMilliseconds.
	
	self should: [interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.]
		raise: Error - MessageNotUnderstood
		withMessageText: 'Carrito expirado'. 
	
	self assert: interface carts isEmpty.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 18:52:33' prior: 50782732!
test15ShouldRaiseErrorWhenListingAnExpiredCart

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 31 minutes totalMilliseconds.
	
	self should: [interface listCart: cartID.]
		raise: Error - MessageNotUnderstood
		withMessageText: 'Carrito expirado'. 
	
	self assert: interface carts isEmpty.! !

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/11/2019 18:52:36'!
FAILURE!
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/11/2019 18:52:56' prior: 50778153!
listCart: aCartID 
	
	self validateCartID: aCartID.
	self validateCartExpiration: aCartID.

	^ (carts at: aCartID ) list.! !

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/11/2019 18:52:59'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/11/2019 18:52:59'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/11/2019 18:52:59'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/11/2019 18:52:59'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 18:52:59'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/11/2019 18:52:59'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 18:52:59'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/11/2019 18:52:59'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/11/2019 18:52:59'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/11/2019 18:52:59'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/11/2019 18:52:59'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/11/2019 18:52:59'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/11/2019 18:52:59'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/11/2019 18:52:59'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/11/2019 18:52:59'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 18:55:41'!
test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 30 minutes totalMilliseconds.
	
	self should: [interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.]
		raise: Error - MessageNotUnderstood
		withMessageText: 'Carrito expirado'. 
	
	self assert: interface carts isEmpty.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 18:55:58' prior: 50782850!
test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 30 minutes totalMilliseconds.
	
	self assert: interface carts size equals: 1.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 18:56:17' prior: 50782871!
test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 30 minutes totalMilliseconds.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self assert: interface carts size equals: 1.! !

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/11/2019 18:57:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/11/2019 18:57:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/11/2019 18:57:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/11/2019 18:57:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/11/2019 18:57:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 18:57:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/11/2019 18:57:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 18:57:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/11/2019 18:57:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/11/2019 18:57:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/11/2019 18:57:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/11/2019 18:57:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/11/2019 18:57:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/11/2019 18:57:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/11/2019 18:57:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/11/2019 18:57:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/11/2019 18:57:08'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 18:58:45'!
test16ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 30 minutes totalMilliseconds.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self assert: interface carts size equals: 1.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 18:59:08' prior: 50782980!
test16ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 30 minutes totalMilliseconds.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	stubbedTime := stubbedTime + 30 minutes totalMilliseconds.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self assert: interface carts size equals: 1.! !

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/11/2019 18:59:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/11/2019 18:59:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/11/2019 18:59:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/11/2019 18:59:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/11/2019 18:59:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 18:59:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/11/2019 18:59:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 18:59:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/11/2019 18:59:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/11/2019 18:59:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/11/2019 18:59:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/11/2019 18:59:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/11/2019 18:59:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/11/2019 18:59:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/11/2019 18:59:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/11/2019 18:59:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/11/2019 18:59:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/11/2019 18:59:08'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 18:59:18' prior: 50782999!
test16ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 30 minutes totalMilliseconds.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	stubbedTime := stubbedTime + 31 minutes totalMilliseconds.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self assert: interface carts size equals: 1.! !

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/11/2019 18:59:20'!
ERROR!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 18:59:31' prior: 50783103!
test16ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 30 minutes totalMilliseconds.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	stubbedTime := stubbedTime + 31 minutes totalMilliseconds.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self assert: interface carts size equals: 1.! !

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/11/2019 18:59:36'!
ERROR!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 18:59:41' prior: 50783131!
test16ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 30 minutes totalMilliseconds.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	stubbedTime := stubbedTime + 30 minutes totalMilliseconds.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self assert: interface carts size equals: 1.! !
!TusLibrosInternalInterface methodsFor: 'cart managment - private' stamp: 'Eden Torres 11/11/2019 19:01:31'!
validateCartWith: cartID
	
	self validateCartID: cartID. 
	self validateCartExpiration: cartID.
	! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/11/2019 19:02:08' prior: 50782522!
addToCart: aCartID item: anItem withQuantity: anAmount 
	
	self validateCartWith: aCartID. 
	
	(carts at: aCartID ) add: anAmount of: anItem .! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/11/2019 19:02:16' prior: 50782777!
listCart: aCartID 
	
	self validateCartWith: aCartID. 

	^ (carts at: aCartID ) list.! !

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/11/2019 19:02:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/11/2019 19:02:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/11/2019 19:02:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/11/2019 19:02:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 19:02:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/11/2019 19:02:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 19:02:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/11/2019 19:02:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/11/2019 19:02:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/11/2019 19:02:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/11/2019 19:02:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/11/2019 19:02:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/11/2019 19:02:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/11/2019 19:02:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/11/2019 19:02:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/11/2019 19:02:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/11/2019 19:02:22'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'Eden Torres 11/11/2019 19:02:26'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'Eden Torres 11/11/2019 19:02:26'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'Eden Torres 11/11/2019 19:02:26'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'Eden Torres 11/11/2019 19:02:26'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'Eden Torres 11/11/2019 19:02:26'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'Eden Torres 11/11/2019 19:02:26'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'Eden Torres 11/11/2019 19:02:26'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'Eden Torres 11/11/2019 19:02:26'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'Eden Torres 11/11/2019 19:02:26'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'Eden Torres 11/11/2019 19:02:26'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'Eden Torres 11/11/2019 19:02:26'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'Eden Torres 11/11/2019 19:02:26'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'Eden Torres 11/11/2019 19:02:26'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'Eden Torres 11/11/2019 19:02:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/11/2019 19:02:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/11/2019 19:02:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/11/2019 19:02:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/11/2019 19:02:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 19:02:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/11/2019 19:02:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 19:02:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/11/2019 19:02:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/11/2019 19:02:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/11/2019 19:02:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/11/2019 19:02:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/11/2019 19:02:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/11/2019 19:02:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/11/2019 19:02:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/11/2019 19:02:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/11/2019 19:02:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/11/2019 19:02:26'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 19:02:57'!
test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 30 minutes totalMilliseconds.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	stubbedTime := stubbedTime + 30 minutes totalMilliseconds.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self assert: interface carts size equals: 1.! !

!methodRemoval: TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/11/2019 19:02:57'!
test16ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 30 minutes totalMilliseconds.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	stubbedTime := stubbedTime + 30 minutes totalMilliseconds.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self assert: interface carts size equals: 1.!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/11/2019 19:03:05'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/11/2019 19:03:05'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/11/2019 19:03:05'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/11/2019 19:03:05'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 19:03:05'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/11/2019 19:03:05'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 19:03:05'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/11/2019 19:03:05'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/11/2019 19:03:05'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/11/2019 19:03:05'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/11/2019 19:03:05'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/11/2019 19:03:05'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/11/2019 19:03:05'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/11/2019 19:03:05'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/11/2019 19:03:05'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/11/2019 19:03:05'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/11/2019 19:03:05'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 19:58:30'!
test18CheckoutCartShouldRaiseErrorWithInvalidCartId

	| interface cartID |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 30 minutes totalMilliseconds.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	stubbedTime := stubbedTime + 30 minutes totalMilliseconds.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self assert: interface carts size equals: 1.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 20:01:40' prior: 50783528!
test18CheckoutCartShouldRaiseErrorWithInvalidCartId

	| interface |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
		
	self should: 
	[interface checkoutCart: 'invalid id' creditCardNumber: '424242424242' 
		creditCardExpirationDate: '043000' creditCardName: 'Juan Perez'] raise: Error - MessageNotUnderstood  withMessageText: 'CardId invalido'

	self assert: interface carts size equals: 1.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 20:02:27' prior: 50783551!
test18CheckoutCartShouldRaiseErrorWithInvalidCartId

	| interface |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
		
	self should: 
	[interface checkoutCart: 'invalid id' creditCard: factory createCart ] raise: Error - MessageNotUnderstood  withMessageText: 'CardId invalido'

	self assert: interface carts size equals: 1.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 20:02:44' prior: 50783570!
test18CheckoutCartShouldRaiseErrorWithInvalidCartId

	| interface |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
		
	self should: 
	[interface checkoutCart: 'invalid id' creditCard: ''] raise: Error - MessageNotUnderstood  withMessageText: 'CardId invalido'

	self assert: interface carts size equals: 1.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 20:03:26' prior: 50783586!
test18CheckoutCartShouldRaiseErrorWithInvalidCartId

	| interface |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
		
	self should: 
	[interface checkoutCart: 'invalid id' creditCard: factory notExpiredCreditCard] raise: Error - MessageNotUnderstood  withMessageText: 'CardId invalido'

	self assert: interface carts size equals: 1.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 20:04:42' prior: 50783602!
test18CheckoutCartShouldRaiseErrorWithInvalidCartId

	| interface |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
		
	self should: [interface checkoutCart: 'invalid id' creditCard: factory notExpiredCreditCard] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'CardId invalido'

	self assert: interface carts size equals: 1.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 20:04:54' prior: 50783619!
test18CheckoutCartShouldRaiseErrorWithInvalidCartId

	| interface |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
		
	self should: [interface checkoutCart: 'invalid id' creditCard: factory notExpiredCreditCard] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'CartID inválido'

	self assert: interface carts size equals: 1.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 20:05:02' prior: 50783636!
test18CheckoutCartShouldRaiseErrorWithInvalidCartId

	| interface |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
		
	self should: [interface checkoutCart: 'invalid id' creditCard: factory notExpiredCreditCard] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'CartID inválido'.

	self assert: interface carts size equals: 1.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 20:09:59' prior: 50783653!
test18CheckoutCartShouldRaiseErrorWithInvalidCartId

	| interface |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
		
	self should: [interface checkoutCart: 'invalid id' creditCard: factory notExpiredCreditCard] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'CartID inválido'.

	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) isEmpty. ! !

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/11/2019 20:10:06'!
ERROR!
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/11/2019 20:10:38'!
checkoutCart: aString creditCard: aCreditCard 
	self shouldBeImplemented.! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/11/2019 20:10:54' prior: 50783694!
checkoutCart: aString creditCard: aCreditCard 
	self error: 'CardID inválido'! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/11/2019 20:10:56' prior: 50783700!
checkoutCart: aString creditCard: aCreditCard 
	
	self error: 'CardID inválido'! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/11/2019 20:11:13' prior: 50783707!
checkoutCart: aCartID creditCard: aCreditCard 
	
	self error: 'CardID inválido'! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/11/2019 20:11:32' prior: 50783714!
checkoutCart: aCartID creditCard: aCreditCard 
	
	self validateCartID: aCartID ! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/11/2019 20:11:44' prior: 50783721!
checkoutCart: aCartID creditCard: aCreditCard 
	
	self validateCartWith: aCartID ! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/11/2019 20:11:46' prior: 50783728!
checkoutCart: aCartID creditCard: aCreditCard 
	
	self validateCartWith: aCartID.! !

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/11/2019 20:12:04'!
ERROR!
!TusLibrosInternalInterface methodsFor: 'user management' stamp: 'Eden Torres 11/11/2019 20:12:41'!
listPurchaseFor: aString withPassword: aString2 
	self shouldBeImplemented.! !
!TusLibrosInternalInterface methodsFor: 'user management' stamp: 'Eden Torres 11/11/2019 20:13:10' prior: 50783746!
listPurchaseFor: aUsername withPassword: aPassword 
	
	self shouldBeImplemented.! !
!TusLibrosInternalInterface methodsFor: 'user management' stamp: 'Eden Torres 11/11/2019 20:13:38' prior: 50783753!
listPurchaseFor: aUserID withPassword: aPassword 
	
	self shouldBeImplemented.! !
!TusLibrosInternalInterface methodsFor: 'user management' stamp: 'Eden Torres 11/11/2019 20:13:48' prior: 50783760!
listPurchaseFor: aUserID withPassword: aPassword 
	
	^ OrderedCollection new.! !

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/11/2019 20:13:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/11/2019 20:13:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/11/2019 20:13:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/11/2019 20:13:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 20:13:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/11/2019 20:13:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 20:13:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/11/2019 20:13:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/11/2019 20:13:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/11/2019 20:13:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/11/2019 20:13:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/11/2019 20:13:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/11/2019 20:13:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/11/2019 20:13:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/11/2019 20:13:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/11/2019 20:13:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/11/2019 20:13:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/11/2019 20:13:51'!
PASSED!

!classDefinition: #CreditCard category: #TusLibros stamp: 'Eden Torres 11/11/2019 20:46:38'!
Object subclass: #CreditCard
	instanceVariableNames: 'expiration number'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CreditCard category: #TusLibros stamp: 'Eden Torres 11/11/2019 20:46:39'!
Object subclass: #CreditCard
	instanceVariableNames: 'expiration number name'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CreditCard methodsFor: 'initialization' stamp: 'Eden Torres 11/11/2019 20:46:37'!
initializeExpiringOn: aMonth withName: aName withNumber: aNumber
	
	expiration := aMonth.
	number := aNumber. 
	name := aName.! !

!methodRemoval: CreditCard #initializeExpiringOn: stamp: 'Eden Torres 11/11/2019 20:46:46'!
initializeExpiringOn: aMonth 
	
	expiration := aMonth !
!CreditCard class methodsFor: 'instance creation' stamp: 'Eden Torres 11/11/2019 20:47:41'!
expiringOn: aMonth withName: aName withNumber: aNumber
	
	^self new initializeExpiringOn: aMonth withName: aName withNumber: aNumber.! !

!methodRemoval: CreditCard class #expiringOn: stamp: 'Eden Torres 11/11/2019 20:47:45'!
expiringOn: aMonth 
	
	^self new initializeExpiringOn: aMonth!
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'Eden Torres 11/11/2019 20:48:29' prior: 50778086!
expiredCreditCard
	
	^CreditCard expiringOn: (Month month: today monthIndex year: today yearNumber - 1) withName: 'Juan Perez' withNumber: '424242424242'! !
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'Eden Torres 11/11/2019 20:48:36' prior: 50778093!
notExpiredCreditCard
	
	^CreditCard expiringOn: (Month month: today monthIndex year: today yearNumber + 1) withName: 'Juan Perez' withNumber: '424242424242'! !
!CreditCard methodsFor: 'accessing' stamp: 'Eden Torres 11/11/2019 20:51:06'!
name

	^name.! !
!CreditCard methodsFor: 'accessing' stamp: 'Eden Torres 11/11/2019 20:51:16'!
number

	^number.! !
!CreditCard methodsFor: 'accessing' stamp: 'Eden Torres 11/11/2019 20:51:30'!
expirationDate

	^expiration.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 20:53:42' prior: 50783670!
test18CheckoutCartShouldRaiseErrorWithInvalidCartId

	| interface |

	interface := TusLibrosInternalInterface withUsers: userRegistry withCatalog: factory defaultCatalog withClock: self.
		
	self should: [interface checkoutCart: 'invalid id' withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate ] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'CartID inválido'.

	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) isEmpty. ! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/11/2019 20:55:35'!
checkoutCart: aCartID withCreditCardNumber: aNumber withCreditCardName:  aName withExpritationDate: aExpirationDate
	
	self validateCartWith: aCartID.! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/11/2019 20:55:52' prior: 50783945!
checkoutCart: aCartID withCreditCardNumber: aNumber withCreditCardName: aName withExpritationDate: aExpirationDate
	
	self validateCartWith: aCartID.! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/11/2019 20:58:59' prior: 50783954!
checkoutCart: aCartID withCreditCardNumber: aNumber withCreditCardName: aName withExpritationDate: anExpirationDate
	
	| creditCard |
	self validateCartWith: aCartID.
	
	creditCard := CreditCard expiringOn: anExpirationDate  withName: aName  withNumber: aNumber.
	Cashier toCheckout:  ''charging:''  throught:''  on: '' registeringOn: ''.! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/11/2019 20:59:07' prior: 50783963!
checkoutCart: aCartID withCreditCardNumber: aNumber withCreditCardName: aName withExpritationDate: anExpirationDate
	
	| creditCard |
	
	self validateCartWith: aCartID.
	
	creditCard := CreditCard expiringOn: anExpirationDate  withName: aName  withNumber: aNumber.
	Cashier toCheckout:  ''charging:''  throught:''  on: '' registeringOn: ''.! !

!methodRemoval: TusLibrosInternalInterface #checkoutCart:creditCard: stamp: 'Eden Torres 11/11/2019 20:59:41'!
checkoutCart: aCartID creditCard: aCreditCard 
	
	self validateCartWith: aCartID.!
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/11/2019 21:02:09' prior: 50783978!
checkoutCart: aCartID withCreditCardNumber: aNumber withCreditCardName: aName withExpritationDate: anExpirationDate
	
	| creditCard |
	
	self validateCartWith: aCartID.
	
	creditCard := CreditCard expiringOn: anExpirationDate  withName: aName  withNumber: aNumber.
	Cashier toCheckout: carts charging: creditCard  throught:''  on:  ''registeringOn: ''.! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/11/2019 21:03:54' prior: 50783999!
checkoutCart: aCartID withCreditCardNumber: aNumber withCreditCardName: aName withExpritationDate: anExpirationDate
	
	| creditCard |
	
	self validateCartWith: aCartID.
	
	creditCard := CreditCard expiringOn: anExpirationDate  withName: aName  withNumber: aNumber.
	Cashier toCheckout: carts at: aCartID charging: creditCard  throught:''  on: '' registeringOn: ''.! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/11/2019 21:06:04'!
checkoutCart: aCartID withCreditCardNumber: aNumber withCreditCardName: aName withExpritationDate: anExpirationDate on: aDate
	
	| creditCard |
	
	self validateCartWith: aCartID.
	
	creditCard := CreditCard expiringOn: anExpirationDate  withName: aName  withNumber: aNumber.
	Cashier toCheckout: carts at: aCartID charging: creditCard  throught:''  on: aDate registeringOn: ''.! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/11/2019 21:06:26' prior: 50784029!
checkoutCart: aCartID withCreditCardNumber: aNumber withCreditCardName: aName withExpritationDate: anExpirationDate on: aDate
	
	| creditCard |
	
	self validateCartWith: aCartID.
	
	creditCard := CreditCard expiringOn: anExpirationDate  withName: aName  withNumber: aNumber.
	Cashier toCheckout: (carts at: aCartID) charging: creditCard  throught:''  on: aDate registeringOn: ''.! !

!classDefinition: #TusLibrosInternalInterface category: #TusLibros stamp: 'Eden Torres 11/11/2019 21:07:05'!
Object subclass: #TusLibrosInternalInterface
	instanceVariableNames: 'userRegistry carts catalog lastCartID clock salesBook'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!TusLibrosInternalInterface methodsFor: 'initialization' stamp: 'Eden Torres 11/11/2019 21:07:03' prior: 50781722!
initializeWithUsers: aUserRegistry withCatalog: aCatalog withClock: aClock 
	
	userRegistry := aUserRegistry.
	carts := Dictionary new.
	catalog := aCatalog.
	lastCartID := 0.
	clock := aClock.
	salesBook := OrderedCollection new.! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/11/2019 21:08:32' prior: 50784045!
checkoutCart: aCartID withCreditCardNumber: aNumber withCreditCardName: aName withExpritationDate: anExpirationDate on: aDate
	
	| creditCard |
	
	self validateCartWith: aCartID.
	
	creditCard := CreditCard expiringOn: anExpirationDate  withName: aName  withNumber: aNumber.
	Cashier toCheckout: (carts at: aCartID) charging: creditCard  throught:''  on: aDate registeringOn: salesBook.! !
!TusLibrosInternalInterface methodsFor: 'initialization' stamp: 'Eden Torres 11/11/2019 21:10:02'!
initializeWithUsers: aUserRegistry withCatalog: aCatalog withClock: aClock withAMerchantProcessor: aMerchantProcessor withSalesBook: aSalesBook
	
	userRegistry := aUserRegistry.
	carts := Dictionary new.
	catalog := aCatalog.
	lastCartID := 0.
	clock := aClock.
	salesBook := OrderedCollection new.! !

!classDefinition: #TusLibrosInternalInterface category: #TusLibros stamp: 'Eden Torres 11/11/2019 21:10:49'!
Object subclass: #TusLibrosInternalInterface
	instanceVariableNames: 'userRegistry carts catalog lastCartID clock salesBook merchantProcessor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!TusLibrosInternalInterface methodsFor: 'initialization' stamp: 'Eden Torres 11/11/2019 21:10:48' prior: 50784098!
initializeWithUsers: aUserRegistry withCatalog: aCatalog withClock: aClock withAMerchantProcessor: aMerchantProcessor withSalesBook: aSalesBook
	
	userRegistry := aUserRegistry.
	carts := Dictionary new.
	catalog := aCatalog.
	lastCartID := 0.
	clock := aClock.
	salesBook := aSalesBook.
	merchantProcessor := aMerchantProcessor.! !

!methodRemoval: TusLibrosInternalInterface #initializeWithUsers:withCatalog:withClock: stamp: 'Eden Torres 11/11/2019 21:10:59'!
initializeWithUsers: aUserRegistry withCatalog: aCatalog withClock: aClock 
	
	userRegistry := aUserRegistry.
	carts := Dictionary new.
	catalog := aCatalog.
	lastCartID := 0.
	clock := aClock.
	salesBook := OrderedCollection new.!
!TusLibrosInternalInterface class methodsFor: 'instance creation' stamp: 'Eden Torres 11/11/2019 21:11:32'!
withUsers: aUserRegistry withCatalog: aCatalog withClock: aClock withAMerchantProcessor: aMerchantProcessor withSalesBook: aSalesBook
	
	^self new initializeWithUsers: aUserRegistry withCatalog: aCatalog withClock: aClock withAMerchantProcessor: aMerchantProcessor withSalesBook: aSalesBook.! !

!methodRemoval: TusLibrosInternalInterface class #withUsers:withCatalog:withClock: stamp: 'Eden Torres 11/11/2019 21:11:36'!
withUsers: aUserRegistry withCatalog: aCatalog withClock: aClock
	
	^self new initializeWithUsers: aUserRegistry withCatalog: aCatalog withClock: aClock.!
!TusLibrosInternalInterfaceTest methodsFor: 'initialization' stamp: 'Eden Torres 11/11/2019 21:12:26'!
createTusLibrosInternalInterface

	! !
!TusLibrosInternalInterfaceTest methodsFor: 'initialization' stamp: 'Eden Torres 11/11/2019 21:14:13'!
createTusLibrosInternalInterfaceWithSalesBook: aSalesBook userRegistry: aUserRegistry

	^TusLibrosInternalInterface withUsers: aUserRegistry withCatalog: factory 
		defaultCatalog withClock: self withAMerchantProcessor: self withSalesBook: aSalesBook .! !
!TusLibrosInternalInterfaceTest methodsFor: 'initialization' stamp: 'Eden Torres 11/11/2019 21:14:54' prior: 50784175!
createTusLibrosInternalInterfaceWithSalesBook: aSalesBook userRegistry: aUserRegistry

	^TusLibrosInternalInterface withUsers: aUserRegistry withCatalog: factory defaultCatalog 
		withClock: self withAMerchantProcessor: self withSalesBook: aSalesBook.! !
!TusLibrosInternalInterfaceTest methodsFor: 'initialization' stamp: 'Eden Torres 11/11/2019 21:15:06' prior: 50784187!
createTusLibrosInternalInterfaceWithSalesBook: aSalesBook userRegistry: aUserRegistry

	^TusLibrosInternalInterface withUsers: aUserRegistry withCatalog: factory defaultCatalog 
										withClock: self withAMerchantProcessor: self withSalesBook: aSalesBook.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:15:49' prior: 50781757!
test01CreateCartRaisesErrorWhenNonExistentUser

	| interface emptyUserRegistry |
	
	emptyUserRegistry := Dictionary new.

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: emptyUserRegistry. 
	
	self should: [interface createCartFor: edenUser withPassword: edenPassword]
		 raise: Error - MessageNotUnderstood
		 withMessageText: 'Usuario no registrado'.
		
	self assert: interface carts isEmpty.
		 ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:16:27' prior: 50781792!
test02CreateCartRaisesErrorWhenPasswordDoesNotMatch

	| interface |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	
	self should: [interface createCartFor: edenUser withPassword: 'wrong password']
		 raise: Error - MessageNotUnderstood
		 withMessageText: 'Contraseña incorrecta'.
		
	self assert: interface carts isEmpty.
		 ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:16:56' prior: 50781809!
test03CreateCartCreatesACartWithValidUser

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry .
	
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self assert: interface carts size equals: 1.
	self assert: (interface includesCartID: cartID).! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:17:02' prior: 50781824!
test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs

	| interface cartID1 cartID2 |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry .
	
	cartID1 := interface createCartFor: edenUser withPassword: edenPassword.
	cartID2 := interface createCartFor: edenUser withPassword: edenPassword.
		
	self assert: interface carts size equals: 2.
	self assert: (interface includesCartID: cartID1).
	self assert: (interface includesCartID: cartID2).
	self deny: cartID1 = cartID2 .! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:17:15' prior: 50781845!
test05ListCartRaisesErrorWhenCartIDDoesNotExist

	| interface |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
		
	self should: [interface listCart: 'INVALID CART ID']
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'CartID inválido'.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:17:20' prior: 50781859!
test06ListCartListsNothingWhenCartIsJustCreated

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self assert: (interface listCart: cartID ) isEmpty .! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:17:28' prior: 50781873!
test07AddToCartRaisesErrorWhenCartIDDoesNotExist

	| interface |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
		
	self should: [interface addToCart: 'INVALID CART ID' item: factory itemSellByTheStore withQuantity: 1]
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'CartID inválido'.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:17:34' prior: 50781889!
test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self should: [interface addToCart: cartID item: factory itemNotSellByTheStore withQuantity: 1]
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'Item is not in catalog'.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:17:46' prior: 50781907!
test09AddToCartRaisesErrorWhenQuantityIsZero

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self should: [interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 0]
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'Invalid number of items'.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:17:54' prior: 50781925!
test10AddToCartListsOneItem

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self assert: ((interface listCart: cartID ) includes: factory itemSellByTheStore ).
	self assert: ((interface listCart: cartID ) occurrencesOf: factory itemSellByTheStore ) equals: 1.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:18:01' prior: 50781945!
test11AddABookTwiceToCartListsTwoItem

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry .
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 2.
	
	self assert: ((interface listCart: cartID ) includes: factory itemSellByTheStore ).
	self assert: ((interface listCart: cartID ) occurrencesOf: factory itemSellByTheStore ) equals: 2.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:18:02' prior: 50784381!
test11AddABookTwiceToCartListsTwoItem

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 2.
	
	self assert: ((interface listCart: cartID ) includes: factory itemSellByTheStore ).
	self assert: ((interface listCart: cartID ) occurrencesOf: factory itemSellByTheStore ) equals: 2.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:18:08' prior: 50781965!
test12AddTwoDifferentBookToCartListsTwoDifferentItems

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	interface addToCart: cartID item: factory anotherItemSellByTheStore withQuantity: 1.
	
	self assert: ((interface listCart: cartID ) includes: factory itemSellByTheStore ).
	self assert: ((interface listCart: cartID ) occurrencesOf: factory itemSellByTheStore ) equals: 1.
	
	self assert: ((interface listCart: cartID ) includes: factory anotherItemSellByTheStore ).
	self assert: ((interface listCart: cartID ) occurrencesOf: factory anotherItemSellByTheStore ) equals: 1.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:18:14' prior: 50781995!
test13ListCartDoesNotListItemNotIncludedInCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self deny: ((interface listCart: cartID ) includes: factory anotherItemSellByTheStore).! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:18:20' prior: 50782711!
test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 31 minutes totalMilliseconds.
	
	self should: [interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.]
		raise: Error - MessageNotUnderstood
		withMessageText: 'Carrito expirado'. 
	
	self assert: interface carts isEmpty.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:18:27' prior: 50782753!
test15ShouldRaiseErrorWhenListingAnExpiredCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 31 minutes totalMilliseconds.
	
	self should: [interface listCart: cartID.]
		raise: Error - MessageNotUnderstood
		withMessageText: 'Carrito expirado'. 
	
	self assert: interface carts isEmpty.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:18:33' prior: 50782887!
test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 30 minutes totalMilliseconds.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self assert: interface carts size equals: 1.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:18:40' prior: 50783405!
test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 30 minutes totalMilliseconds.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	stubbedTime := stubbedTime + 30 minutes totalMilliseconds.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self assert: interface carts size equals: 1.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:18:47' prior: 50783922!
test18CheckoutCartShouldRaiseErrorWithInvalidCartId

	| interface |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
		
	self should: [interface checkoutCart: 'invalid id' withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate ] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'CartID inválido'.

	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) isEmpty. ! !

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/11/2019 21:19:13'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/11/2019 21:19:13'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/11/2019 21:19:13'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/11/2019 21:19:13'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 21:19:13'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/11/2019 21:19:13'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 21:19:13'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/11/2019 21:19:13'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/11/2019 21:19:13'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/11/2019 21:19:13'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/11/2019 21:19:13'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/11/2019 21:19:13'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/11/2019 21:19:13'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/11/2019 21:19:13'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/11/2019 21:19:13'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/11/2019 21:19:13'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/11/2019 21:19:13'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/11/2019 21:19:13'!
PASSED!
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'Eden Torres 11/11/2019 21:38:57'!
emptyNameCreditCard
	
	^CreditCard expiringOn: (Month month: today monthIndex year: today yearNumber - 1) withName: 'Juan Perez' withNumber: '424242424242'! !
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'Eden Torres 11/11/2019 21:39:03' prior: 50784653!
emptyNameCreditCard
	
	^CreditCard expiringOn: (Month month: today monthIndex year: today yearNumber - 1) withName: '' withNumber: '424242424242'! !
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'Eden Torres 11/11/2019 21:39:22'!
emptyNumberCreditCard
	
	^CreditCard expiringOn: (Month month: today monthIndex year: today yearNumber - 1) withName: 'Juan Perez' withNumber: ''! !
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'Eden Torres 11/11/2019 21:39:59'!
tooLongNameCreditCard
	
	^CreditCard expiringOn: (Month month: today monthIndex year: today yearNumber - 1) withName: 'Juan Perez' withNumber: ''! !
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'Eden Torres 11/11/2019 21:40:33' prior: 50784678!
tooLongNameCreditCard
	
	^CreditCard expiringOn: (Month month: today monthIndex year: today yearNumber - 1) withName: 'Juan Perez de la Santa Teresita Veregara Cortez' withNumber: ''! !
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'Eden Torres 11/11/2019 21:40:43' prior: 50784687!
tooLongNameCreditCard
	
	^CreditCard expiringOn: (Month month: today monthIndex year: today yearNumber - 1) withName: 'Juan Perez de la Santa Teresita Veregara Cortez' withNumber: '424242424242'! !
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'Eden Torres 11/11/2019 21:40:46' prior: 50784697!
tooLongNameCreditCard
	
	^CreditCard expiringOn: (Month month: today monthIndex year: today yearNumber - 1) withName: 'Juan Perez de la Santa Teresita Veregara Cortez' withNumber: '42424242424242'! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:41:20'!
test19CheckoutCartShouldRaiseErrorWithEmptyName

	| interface |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
		
	self should: [interface checkoutCart: 'invalid id' withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate ] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'CartID inválido'.

	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) isEmpty. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:42:25' prior: 50784717!
test19CheckoutCartShouldRaiseErrorWithEmptyName

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory emptyNameCreditCard number withCreditCardName:
	factory emptyNameCreditCard name withExpritationDate: factory emptyNameCreditCard expirationDate ] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Nombre de la tarjeta inválido'.

	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) isEmpty. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:42:39' prior: 50784741!
test19CheckoutCartShouldRaiseErrorWithEmptyName

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory emptyNameCreditCard number withCreditCardName:
	factory emptyNameCreditCard name withExpritationDate: factory emptyNameCreditCard expirationDate ] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Nombre de la tarjeta inválido'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) isEmpty. ! !

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyName stamp: 'Eden Torres 11/11/2019 21:42:44'!
ERROR!

!methodRemoval: TusLibrosInternalInterface #checkoutCart:withCreditCardNumber:withCreditCardName:withExpritationDate: stamp: 'Eden Torres 11/11/2019 21:43:26'!
checkoutCart: aCartID withCreditCardNumber: aNumber withCreditCardName: aName withExpritationDate: anExpirationDate
	
	| creditCard |
	
	self validateCartWith: aCartID.
	
	creditCard := CreditCard expiringOn: anExpirationDate  withName: aName  withNumber: aNumber.
	Cashier toCheckout: carts at: aCartID charging: creditCard  throught:''  on: '' registeringOn: ''.!
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/11/2019 21:43:40' prior: 50784082!
checkoutCart: aCartID withCreditCardNumber: aNumber withCreditCardName: aName withExpritationDate: anExpirationDate on: aDate
	
	| creditCard |
	
	self validateCartWith: aCartID.
	
	creditCard := CreditCard expiringOn: anExpirationDate  withName: aName  withNumber: aNumber.
	Cashier toCheckout: (carts at: aCartID) charging: creditCard  throught: merchantProcessor  on: aDate registeringOn: salesBook.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:44:23' prior: 50784767!
test19CheckoutCartShouldRaiseErrorWithEmptyName

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory emptyNameCreditCard number withCreditCardName:
	factory emptyNameCreditCard name withExpritationDate: factory emptyNameCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Nombre de la tarjeta inválido'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) isEmpty. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:44:27' prior: 50784550!
test18CheckoutCartShouldRaiseErrorWithInvalidCartId

	| interface |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
		
	self should: [interface checkoutCart: 'invalid id' withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'CartID inválido'.

	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) isEmpty. ! !

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/11/2019 21:44:29'!
PASSED!

!methodRemoval: TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyName stamp: 'Eden Torres 11/11/2019 21:44:32'!
test19CheckoutCartShouldRaiseErrorWithEmptyName

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory emptyNameCreditCard number withCreditCardName:
	factory emptyNameCreditCard name withExpritationDate: factory emptyNameCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Nombre de la tarjeta inválido'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) isEmpty. !

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/11/2019 21:44:37'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/11/2019 21:44:37'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/11/2019 21:44:37'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/11/2019 21:44:37'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 21:44:37'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/11/2019 21:44:37'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 21:44:37'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/11/2019 21:44:37'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/11/2019 21:44:37'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/11/2019 21:44:37'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/11/2019 21:44:37'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/11/2019 21:44:37'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/11/2019 21:44:37'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/11/2019 21:44:37'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/11/2019 21:44:37'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/11/2019 21:44:37'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/11/2019 21:44:37'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/11/2019 21:44:37'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:45:03'!
test19CheckoutCartShouldRaiseErrorWithEmptyCardName

	| interface |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
		
	self should: [interface checkoutCart: 'invalid id' withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'CartID inválido'.

	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) isEmpty. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:45:25' prior: 50784994!
test19CheckoutCartShouldRaiseErrorWithEmptyCardName

	| interface |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
		
	self should: [interface checkoutCart: 'invalid id' withCreditCardNumber: factory emptyNameCreditCard number withCreditCardName:
	factory emptyNameCreditCard name withExpritationDate: factory emptyNameCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Nombre de la tarjeta inválido'.

	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) isEmpty. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:45:33' prior: 50785018!
test19CheckoutCartShouldRaiseErrorWithEmptyCardName

	| interface |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
		
	self should: [interface checkoutCart: 'invalid id' withCreditCardNumber: factory emptyNameCreditCard number withCreditCardName:
	factory emptyNameCreditCard name withExpritationDate: factory emptyNameCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Nombre de la tarjeta inválido'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) isEmpty. ! !

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/11/2019 21:45:34'!
FAILURE!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:46:20' prior: 50785043!
test19CheckoutCartShouldRaiseErrorWithEmptyCardName

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory emptyNameCreditCard number withCreditCardName:
	factory emptyNameCreditCard name withExpritationDate: factory emptyNameCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Nombre de la tarjeta inválido'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) isEmpty. ! !

!methodRemoval: StoreTestObjectsFactory #emptyNumberCreditCard stamp: 'Eden Torres 11/11/2019 21:49:43'!
emptyNumberCreditCard
	
	^CreditCard expiringOn: (Month month: today monthIndex year: today yearNumber - 1) withName: 'Juan Perez' withNumber: ''!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/11/2019 21:49:49'!
ERROR!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/11/2019 21:49:49'!
ERROR!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/11/2019 21:50:00'!
ERROR!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/11/2019 21:50:11'!
ERROR!
!CartInterface methodsFor: 'testing' stamp: 'Eden Torres 11/11/2019 21:51:53'!
isEmpty
	
	^cart isEmpty ! !

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/11/2019 21:51:56'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/11/2019 21:51:56'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/11/2019 21:51:56'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/11/2019 21:51:56'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 21:51:56'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/11/2019 21:51:56'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 21:51:56'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/11/2019 21:51:56'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/11/2019 21:51:56'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/11/2019 21:51:56'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/11/2019 21:51:56'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/11/2019 21:51:56'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/11/2019 21:51:56'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/11/2019 21:51:56'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/11/2019 21:51:56'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/11/2019 21:51:56'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/11/2019 21:51:56'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/11/2019 21:51:56'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/11/2019 21:51:56'!
FAILURE!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/11/2019 21:51:56'!
FAILURE!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:52:19' prior: 50785072!
test19CheckoutCartShouldRaiseErrorWithEmptyCardName

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory emptyNameCreditCard number withCreditCardName:
	factory emptyNameCreditCard name withExpritationDate: factory emptyNameCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Nombre de la tarjeta inválido'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) isEmpty. ! !

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/11/2019 21:52:20'!
FAILURE!
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'Eden Torres 11/11/2019 21:52:43' prior: 50784662!
emptyNameCreditCard
	
	^CreditCard expiringOn: (Month month: today monthIndex year: today yearNumber + 1) withName: '' withNumber: '424242424242'! !
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'Eden Torres 11/11/2019 21:52:49' prior: 50784707!
tooLongNameCreditCard
	
	^CreditCard expiringOn: (Month month: today monthIndex year: today yearNumber + 1) withName: 'Juan Perez de la Santa Teresita Veregara Cortez' withNumber: '42424242424242'! !

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/11/2019 21:52:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/11/2019 21:52:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/11/2019 21:52:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/11/2019 21:52:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 21:52:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/11/2019 21:52:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 21:52:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/11/2019 21:52:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/11/2019 21:52:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/11/2019 21:52:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/11/2019 21:52:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/11/2019 21:52:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/11/2019 21:52:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/11/2019 21:52:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/11/2019 21:52:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/11/2019 21:52:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/11/2019 21:52:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/11/2019 21:52:51'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/11/2019 21:52:51'!
FAILURE!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/11/2019 21:52:51'!
FAILURE!
!CreditCard class methodsFor: 'instance creation' stamp: 'Eden Torres 11/11/2019 21:53:48' prior: 50783880!
expiringOn: aMonth withName: aName withNumber: aNumber

	self error: ''.
	
	^self new initializeExpiringOn: aMonth withName: aName withNumber: aNumber.! !
!CreditCard class methodsFor: 'instance creation' stamp: 'Eden Torres 11/11/2019 21:54:07' prior: 50785361!
expiringOn: aMonth withName: aName withNumber: aNumber

	self error: 'Nombre de la tarjeta inválido'.
	
	^self new initializeExpiringOn: aMonth withName: aName withNumber: aNumber.! !
!CreditCard class methodsFor: 'instance creation' stamp: 'Eden Torres 11/11/2019 21:55:04' prior: 50785370!
expiringOn: aMonth withName: aName withNumber: aNumber

	aName isEmpty ifTrue: [self error: 'Nombre de la tarjeta inválido'].
	
	^self new initializeExpiringOn: aMonth withName: aName withNumber: aNumber.! !

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/11/2019 21:55:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/11/2019 21:55:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/11/2019 21:55:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/11/2019 21:55:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 21:55:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/11/2019 21:55:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 21:55:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/11/2019 21:55:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/11/2019 21:55:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/11/2019 21:55:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/11/2019 21:55:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/11/2019 21:55:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/11/2019 21:55:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/11/2019 21:55:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/11/2019 21:55:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/11/2019 21:55:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/11/2019 21:55:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/11/2019 21:55:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/11/2019 21:55:50'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:56:10'!
test19CheckoutCartShouldRaiseErrorWithTooLongCardName

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory emptyNameCreditCard number withCreditCardName:
	factory emptyNameCreditCard name withExpritationDate: factory emptyNameCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Nombre de la tarjeta inválido'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) isEmpty. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:56:17'!
test20CheckoutCartShouldRaiseErrorWithTooLongCardName

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory emptyNameCreditCard number withCreditCardName:
	factory emptyNameCreditCard name withExpritationDate: factory emptyNameCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Nombre de la tarjeta inválido'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) isEmpty. ! !

!methodRemoval: TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/11/2019 21:56:17'!
test19CheckoutCartShouldRaiseErrorWithTooLongCardName

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory emptyNameCreditCard number withCreditCardName:
	factory emptyNameCreditCard name withExpritationDate: factory emptyNameCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Nombre de la tarjeta inválido'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) isEmpty. !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:56:36' prior: 50785504!
test20CheckoutCartShouldRaiseErrorWithTooLongCardName

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory tooLongNameCreditCard number withCreditCardName:
	factory tooLongNameCreditCard name withExpritationDate: factory tooLongNameCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Nombre de la tarjeta inválido'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) isEmpty. ! !

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/11/2019 21:56:37'!
FAILURE!
!CreditCard class methodsFor: 'instance creation' stamp: 'Eden Torres 11/11/2019 21:57:06' prior: 50785380!
expiringOn: aMonth withName: aName withNumber: aNumber

	aName isEmpty ifTrue: [self error: 'Nombre de la tarjeta inválido'].
	aName size > 30 ifTrue: [self error: 'Nombre de la tarjeta inválido'].
	
	^self new initializeExpiringOn: aMonth withName: aName withNumber: aNumber.! !

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/11/2019 21:57:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/11/2019 21:57:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/11/2019 21:57:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/11/2019 21:57:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 21:57:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/11/2019 21:57:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 21:57:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/11/2019 21:57:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/11/2019 21:57:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/11/2019 21:57:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/11/2019 21:57:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/11/2019 21:57:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/11/2019 21:57:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/11/2019 21:57:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/11/2019 21:57:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/11/2019 21:57:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/11/2019 21:57:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/11/2019 21:57:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/11/2019 21:57:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/11/2019 21:57:12'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:57:35'!
test21CheckoutCartShouldRaiseErrorWithExpiredCard

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory tooLongNameCreditCard number withCreditCardName:
	factory tooLongNameCreditCard name withExpritationDate: factory tooLongNameCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Nombre de la tarjeta inválido'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) isEmpty. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:57:46' prior: 50785700!
test21CheckoutCartShouldRaiseErrorWithExpiredCard

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory expiredCreditCard number withCreditCardName:
	factory expiredCreditCard name withExpritationDate: factory expiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Nombre de la tarjeta inválido'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) isEmpty. ! !

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/11/2019 21:57:48'!
FAILURE!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:58:09' prior: 50785730!
test21CheckoutCartShouldRaiseErrorWithExpiredCard

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory expiredCreditCard number withCreditCardName:
	factory expiredCreditCard name withExpritationDate: factory expiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Cannot charge an expired credit card'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) isEmpty. ! !

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/11/2019 21:58:11'!
FAILURE!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:58:16' prior: 50785764!
test21CheckoutCartShouldRaiseErrorWithExpiredCard

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory expiredCreditCard number withCreditCardName:
	factory expiredCreditCard name withExpritationDate: factory expiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Can not charge an expired credit card'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) isEmpty. ! !

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/11/2019 21:58:17'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/11/2019 21:58:17'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/11/2019 21:58:17'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/11/2019 21:58:17'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/11/2019 21:58:17'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 21:58:17'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/11/2019 21:58:17'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 21:58:17'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/11/2019 21:58:17'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/11/2019 21:58:17'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/11/2019 21:58:17'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/11/2019 21:58:17'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/11/2019 21:58:17'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/11/2019 21:58:17'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/11/2019 21:58:17'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/11/2019 21:58:17'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/11/2019 21:58:17'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/11/2019 21:58:17'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/11/2019 21:58:17'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/11/2019 21:58:17'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/11/2019 21:58:17'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/11/2019 21:58:17'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:58:45'!
test21CheckoutCartShouldRaiseErrorWithEmptyCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory expiredCreditCard number withCreditCardName:
	factory expiredCreditCard name withExpritationDate: factory expiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Can not charge an expired credit card'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) isEmpty. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:58:53' prior: 50785926!
test21CheckoutCartShouldRaiseErrorWithEmptyCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory expiredCreditCard number withCreditCardName:
	factory expiredCreditCard name withExpritationDate: factory expiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Can not charge an expired credit card'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) isEmpty. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:58:58'!
test22CheckoutCartShouldRaiseErrorWithEmptyCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory expiredCreditCard number withCreditCardName:
	factory expiredCreditCard name withExpritationDate: factory expiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Can not charge an expired credit card'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) isEmpty. ! !

!methodRemoval: TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/11/2019 21:58:58'!
test21CheckoutCartShouldRaiseErrorWithEmptyCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory expiredCreditCard number withCreditCardName:
	factory expiredCreditCard name withExpritationDate: factory expiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Can not charge an expired credit card'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) isEmpty. !

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/11/2019 21:59:01'!
FAILURE!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:59:17' prior: 50785981!
test22CheckoutCartShouldRaiseErrorWithEmptyCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Can not charge an expired credit card'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) isEmpty. ! !

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/11/2019 21:59:19'!
FAILURE!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:59:37' prior: 50786040!
test22CheckoutCartShouldRaiseErrorWithEmptyCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Can not checkout an empty cart'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) isEmpty. ! !

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/11/2019 21:59:40'!
FAILURE!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/11/2019 21:59:50' prior: 50786072!
test22CheckoutCartShouldRaiseErrorWithEmptyCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Can not check out an empty cart'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) isEmpty. ! !

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/11/2019 21:59:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/11/2019 21:59:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/11/2019 21:59:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/11/2019 21:59:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/11/2019 21:59:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 21:59:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/11/2019 21:59:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/11/2019 21:59:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/11/2019 21:59:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/11/2019 21:59:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/11/2019 21:59:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/11/2019 21:59:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/11/2019 21:59:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/11/2019 21:59:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/11/2019 21:59:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/11/2019 21:59:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/11/2019 21:59:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/11/2019 21:59:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/11/2019 21:59:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/11/2019 21:59:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/11/2019 21:59:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/11/2019 21:59:50'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/11/2019 21:59:50'!
PASSED!

----QUIT----(12 November 2019 10:11:47) CuisUniversity-3938.image priorSource: 14262866!

----STARTUP---- (14 November 2019 17:26:10) as /Applications/cuis/CuisUniversity-3938.image!


!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/14/2019 17:28:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/14/2019 17:28:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/14/2019 17:28:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/14/2019 17:28:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/14/2019 17:28:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 17:28:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/14/2019 17:28:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 17:28:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/14/2019 17:28:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/14/2019 17:28:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/14/2019 17:28:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/14/2019 17:28:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/14/2019 17:28:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/14/2019 17:28:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/14/2019 17:28:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/14/2019 17:28:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/14/2019 17:28:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/14/2019 17:28:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/14/2019 17:28:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/14/2019 17:28:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/14/2019 17:28:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/14/2019 17:28:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/14/2019 17:28:35'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 17:38:42'!
test23CheckoutCartWithOneElementListsOnePurchase

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.


	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) includes: factory itemSellByTheStore . ! !

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/14/2019 17:38:45'!
FAILURE!

!classDefinition: #TusLibrosInternalInterface category: #TusLibros stamp: 'Eden Torres 11/14/2019 17:42:05'!
Object subclass: #TusLibrosInternalInterface
	instanceVariableNames: 'userRegistry carts catalog lastCartID clock salesBook merchantProcessor purchases'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!TusLibrosInternalInterface methodsFor: 'user management' stamp: 'Eden Torres 11/14/2019 17:42:02' prior: 50783767!
listPurchaseFor: aUserID withPassword: aPassword 
	
	^ purchases at: aUserID .! !
!TusLibrosInternalInterface methodsFor: 'initialization' stamp: 'Eden Torres 11/14/2019 17:43:16' prior: 50784122!
initializeWithUsers: aUserRegistry withCatalog: aCatalog withClock: aClock withAMerchantProcessor: aMerchantProcessor withSalesBook: aSalesBook
	
	userRegistry := aUserRegistry.
	carts := Dictionary new.
	catalog := aCatalog.
	lastCartID := 0.
	clock := aClock.
	salesBook := aSalesBook.
	merchantProcessor := aMerchantProcessor.
	purchases := Dictionary new.! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/14/2019 17:46:16' prior: 50784814!
checkoutCart: aCartID withCreditCardNumber: aNumber withCreditCardName: aName withExpritationDate: anExpirationDate on: aDate
	
	| creditCard cart |
	
	self validateCartWith: aCartID.
	cart := carts at: aCartID.
	
	creditCard := CreditCard expiringOn: anExpirationDate  withName: aName  withNumber: aNumber.
	Cashier toCheckout: cart charging: creditCard  throught: merchantProcessor  on: aDate registeringOn: salesBook.
	
	purchases at: cart userID put: cart list .! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/14/2019 17:47:57' prior: 50782270!
createCartFor: aUserID withPassword: aPassword 
	
	| cartID |

	(userRegistry includesKey: aUserID) ifFalse: [self error: 'Usuario no registrado'].
	((userRegistry at: aUserID) = aPassword) ifFalse: [self error: 'Contraseña incorrecta'].

	cartID := self nextCartID .
	carts add: (cartID)->(CartInterface withCatalog: catalog withClock: clock withUserID: aUserID ).

	^cartID.! !

!classDefinition: #CartInterface category: #TusLibros stamp: 'Eden Torres 11/14/2019 17:50:29'!
Object subclass: #CartInterface
	instanceVariableNames: 'catalog items cart timeLastModified clock userID'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CartInterface methodsFor: 'initialization' stamp: 'Eden Torres 11/14/2019 17:50:26'!
initialiazeWithCatalog: aCatalog withClock: aClock withUserID: aUserID

	cart := Cart acceptingItemsOf: aCatalog.
	timeLastModified := aClock localMillisecondClock.
	clock := aClock. 
	userID := aUserID .! !

!methodRemoval: CartInterface #initialiazeWithCatalog:withClock: stamp: 'Eden Torres 11/14/2019 17:50:38'!
initialiazeWithCatalog: aCatalog withClock: aClock

	cart := Cart acceptingItemsOf: aCatalog.
	timeLastModified := aClock localMillisecondClock.
	clock := aClock. !
!CartInterface class methodsFor: 'instance creation' stamp: 'Eden Torres 11/14/2019 17:51:03'!
withCatalog: aCatalog withClock: aClock withUserID: aUserID

	^ self new initialiazeWithCatalog: aCatalog withClock: aClock withUserID: aUserID .! !

!methodRemoval: CartInterface class #withCatalog:withClock: stamp: 'Eden Torres 11/14/2019 17:51:07'!
withCatalog: aCatalog withClock: aClock

	^ self new initialiazeWithCatalog: aCatalog withClock: aClock.!
!CartInterface methodsFor: 'accessing' stamp: 'Eden Torres 11/14/2019 18:09:24'!
userID

	^ userID .! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/14/2019 18:11:43' prior: 50786406!
checkoutCart: aCartID withCreditCardNumber: aNumber withCreditCardName: aName withExpritationDate: anExpirationDate on: aDate
	
	| creditCard cart cashier |
	
	self validateCartWith: aCartID.
	cart := carts at: aCartID.
	
	creditCard := CreditCard expiringOn: anExpirationDate  withName: aName  withNumber: aNumber.
	cashier := Cashier toCheckout: cart charging: creditCard  throught: merchantProcessor  on: aDate registeringOn: salesBook.
	cashier checkout.
	
	purchases at: cart userID put: cart list .! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/14/2019 18:12:05' prior: 50786486!
checkoutCart: aCartID withCreditCardNumber: aNumber withCreditCardName: aName withExpritationDate: anExpirationDate on: aDate
	
	| creditCard cart cashier |
	
	self validateCartWith: aCartID.
	cart := carts at: aCartID.
	
	creditCard := CreditCard expiringOn: anExpirationDate  withName: aName  withNumber: aNumber.
	cashier := Cashier toCheckout: cart charging: creditCard  throught: merchantProcessor  on: aDate registeringOn: salesBook.
	cashier checkOut.
	
	purchases at: cart userID put: cart list .! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/14/2019 18:24:11' prior: 50786506!
checkoutCart: aCartID withCreditCardNumber: aNumber withCreditCardName: aName withExpritationDate: anExpirationDate on: aDate
	
	| creditCard cart cashier |
	
	self validateCartWith: aCartID.
	cart := carts at: aCartID.
	
	creditCard := CreditCard expiringOn: anExpirationDate  withName: aName  withNumber: aNumber.
	cashier := Cashier toCheckout: cart charging: creditCard  throught: merchantProcessor  on: aDate registeringOn: salesBook.
	cashier checkOut.
	
	(purchases at: cart userID) addAll: cart list .! !

----STARTUP---- (14 November 2019 19:39:40) as /Applications/cuis/CuisUniversity-3938.image!

!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 17:38:42'!
test23CheckoutCartWithOneElementListsOnePurchase

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.


	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) includes: factory itemSellByTheStore . ! !

!classDefinition: #TusLibrosInternalInterface category: #TusLibros stamp: 'Eden Torres 11/14/2019 19:40:31'!
Object subclass: #TusLibrosInternalInterface
	instanceVariableNames: 'userRegistry carts catalog lastCartID clock salesBook merchantProcessor purchases'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!TusLibrosInternalInterface methodsFor: 'user management' stamp: 'Eden Torres 11/14/2019 17:42:02' prior: 50783767!
listPurchaseFor: aUserID withPassword: aPassword 
	
	^ purchases at: aUserID .! !
!TusLibrosInternalInterface methodsFor: 'initialization' stamp: 'Eden Torres 11/14/2019 17:43:16' prior: 50784122!
initializeWithUsers: aUserRegistry withCatalog: aCatalog withClock: aClock withAMerchantProcessor: aMerchantProcessor withSalesBook: aSalesBook
	
	userRegistry := aUserRegistry.
	carts := Dictionary new.
	catalog := aCatalog.
	lastCartID := 0.
	clock := aClock.
	salesBook := aSalesBook.
	merchantProcessor := aMerchantProcessor.
	purchases := Dictionary new.! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/14/2019 17:46:16' prior: 50784814!
checkoutCart: aCartID withCreditCardNumber: aNumber withCreditCardName: aName withExpritationDate: anExpirationDate on: aDate
	
	| creditCard cart |
	
	self validateCartWith: aCartID.
	cart := carts at: aCartID.
	
	creditCard := CreditCard expiringOn: anExpirationDate  withName: aName  withNumber: aNumber.
	Cashier toCheckout: cart charging: creditCard  throught: merchantProcessor  on: aDate registeringOn: salesBook.
	
	purchases at: cart userID put: cart list .! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/14/2019 17:47:57' prior: 50782270!
createCartFor: aUserID withPassword: aPassword 
	
	| cartID |

	(userRegistry includesKey: aUserID) ifFalse: [self error: 'Usuario no registrado'].
	((userRegistry at: aUserID) = aPassword) ifFalse: [self error: 'Contraseña incorrecta'].

	cartID := self nextCartID .
	carts add: (cartID)->(CartInterface withCatalog: catalog withClock: clock withUserID: aUserID ).

	^cartID.! !

!classDefinition: #CartInterface category: #TusLibros stamp: 'Eden Torres 11/14/2019 19:40:31'!
Object subclass: #CartInterface
	instanceVariableNames: 'catalog items cart timeLastModified clock userID'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CartInterface methodsFor: 'initialization' stamp: 'Eden Torres 11/14/2019 17:50:26'!
initialiazeWithCatalog: aCatalog withClock: aClock withUserID: aUserID

	cart := Cart acceptingItemsOf: aCatalog.
	timeLastModified := aClock localMillisecondClock.
	clock := aClock. 
	userID := aUserID .! !

!methodRemoval: CartInterface #initialiazeWithCatalog:withClock: stamp: 'Eden Torres 11/14/2019 19:40:31'!
initialiazeWithCatalog: aCatalog withClock: aClock

	cart := Cart acceptingItemsOf: aCatalog.
	timeLastModified := aClock localMillisecondClock.
	clock := aClock. !
!CartInterface class methodsFor: 'instance creation' stamp: 'Eden Torres 11/14/2019 17:51:03'!
withCatalog: aCatalog withClock: aClock withUserID: aUserID

	^ self new initialiazeWithCatalog: aCatalog withClock: aClock withUserID: aUserID .! !

!methodRemoval: CartInterface class #withCatalog:withClock: stamp: 'Eden Torres 11/14/2019 19:40:31'!
withCatalog: aCatalog withClock: aClock

	^ self new initialiazeWithCatalog: aCatalog withClock: aClock.!
!CartInterface methodsFor: 'accessing' stamp: 'Eden Torres 11/14/2019 18:09:24'!
userID

	^ userID .! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/14/2019 18:11:43' prior: 50786608!
checkoutCart: aCartID withCreditCardNumber: aNumber withCreditCardName: aName withExpritationDate: anExpirationDate on: aDate
	
	| creditCard cart cashier |
	
	self validateCartWith: aCartID.
	cart := carts at: aCartID.
	
	creditCard := CreditCard expiringOn: anExpirationDate  withName: aName  withNumber: aNumber.
	cashier := Cashier toCheckout: cart charging: creditCard  throught: merchantProcessor  on: aDate registeringOn: salesBook.
	cashier checkout.
	
	purchases at: cart userID put: cart list .! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/14/2019 18:12:05' prior: 50786688!
checkoutCart: aCartID withCreditCardNumber: aNumber withCreditCardName: aName withExpritationDate: anExpirationDate on: aDate
	
	| creditCard cart cashier |
	
	self validateCartWith: aCartID.
	cart := carts at: aCartID.
	
	creditCard := CreditCard expiringOn: anExpirationDate  withName: aName  withNumber: aNumber.
	cashier := Cashier toCheckout: cart charging: creditCard  throught: merchantProcessor  on: aDate registeringOn: salesBook.
	cashier checkOut.
	
	purchases at: cart userID put: cart list .! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/14/2019 18:24:11' prior: 50786708!
checkoutCart: aCartID withCreditCardNumber: aNumber withCreditCardName: aName withExpritationDate: anExpirationDate on: aDate
	
	| creditCard cart cashier |
	
	self validateCartWith: aCartID.
	cart := carts at: aCartID.
	
	creditCard := CreditCard expiringOn: anExpirationDate  withName: aName  withNumber: aNumber.
	cashier := Cashier toCheckout: cart charging: creditCard  throught: merchantProcessor  on: aDate registeringOn: salesBook.
	cashier checkOut.
	
	(purchases at: cart userID) addAll: cart list .! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/14/2019 19:43:34' prior: 50786728!
checkoutCart: aCartID withCreditCardNumber: aNumber withCreditCardName: aName withExpritationDate: anExpirationDate on: aDate
	
	| creditCard cart cashier |
	
	self validateCartWith: aCartID.
	cart := carts at: aCartID.
	
	creditCard := CreditCard expiringOn: anExpirationDate  withName: aName  withNumber: aNumber.
	
	cashier := Cashier toCheckout: cart charging: creditCard  throught: merchantProcessor  on: aDate registeringOn: salesBook.
	cashier checkOut.! !
!TusLibrosInternalInterface methodsFor: 'initialization' stamp: 'Eden Torres 11/14/2019 19:47:06'!
initializeWithUsers: aUserRegistry withCatalog: aCatalog withClock: aClock withAMerchantProcessor: aMerchantProcessor
	
	userRegistry := aUserRegistry.
	carts := Dictionary new.
	catalog := aCatalog.
	lastCartID := 0.
	clock := aClock.
	salesBook := Dictionary new.
	merchantProcessor := aMerchantProcessor.
	
	userRegistry keysDo: [ :userID | salesBook at: userID put: OrderedCollection new].! !

!methodRemoval: TusLibrosInternalInterface #initializeWithUsers:withCatalog:withClock:withAMerchantProcessor:withSalesBook: stamp: 'Eden Torres 11/14/2019 19:47:17'!
initializeWithUsers: aUserRegistry withCatalog: aCatalog withClock: aClock withAMerchantProcessor: aMerchantProcessor withSalesBook: aSalesBook
	
	userRegistry := aUserRegistry.
	carts := Dictionary new.
	catalog := aCatalog.
	lastCartID := 0.
	clock := aClock.
	salesBook := aSalesBook.
	merchantProcessor := aMerchantProcessor.
	purchases := Dictionary new.!
!TusLibrosInternalInterface class methodsFor: 'instance creation' stamp: 'Eden Torres 11/14/2019 19:47:42'!
withUsers: aUserRegistry withCatalog: aCatalog withClock: aClock withAMerchantProcessor: aMerchantProcessor
	
	^self new initializeWithUsers: aUserRegistry withCatalog: aCatalog withClock: aClock withAMerchantProcessor: aMerchantProcessor.! !

!methodRemoval: TusLibrosInternalInterface class #withUsers:withCatalog:withClock:withAMerchantProcessor:withSalesBook: stamp: 'Eden Torres 11/14/2019 19:47:46'!
withUsers: aUserRegistry withCatalog: aCatalog withClock: aClock withAMerchantProcessor: aMerchantProcessor withSalesBook: aSalesBook
	
	^self new initializeWithUsers: aUserRegistry withCatalog: aCatalog withClock: aClock withAMerchantProcessor: aMerchantProcessor withSalesBook: aSalesBook.!
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/14/2019 19:48:57' prior: 50786748!
checkoutCart: aCartID withCreditCardNumber: aNumber withCreditCardName: aName withExpritationDate: anExpirationDate on: aDate
	
	| creditCard cart cashier |
	
	self validateCartWith: aCartID.
	cart := carts at: aCartID.
	
	creditCard := CreditCard expiringOn: anExpirationDate  withName: aName  withNumber: aNumber.
	cashier := Cashier toCheckout: cart charging: creditCard  throught: merchantProcessor
						   on: aDate registeringOn: (salesBook at: cart userID ).
	cashier checkOut.! !

!classDefinition: #TusLibrosInternalInterface category: #TusLibros stamp: 'Eden Torres 11/14/2019 19:50:07'!
Object subclass: #TusLibrosInternalInterface
	instanceVariableNames: 'userRegistry carts catalog lastCartID clock salesBooks merchantProcessor purchases'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!TusLibrosInternalInterface methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/14/2019 19:50:07' prior: 50786825!
checkoutCart: aCartID withCreditCardNumber: aNumber withCreditCardName: aName withExpritationDate: anExpirationDate on: aDate
	
	| creditCard cart cashier |
	
	self validateCartWith: aCartID.
	cart := carts at: aCartID.
	
	creditCard := CreditCard expiringOn: anExpirationDate  withName: aName  withNumber: aNumber.
	cashier := Cashier toCheckout: cart charging: creditCard  throught: merchantProcessor
						   on: aDate registeringOn: (salesBooks at: cart userID ).
	cashier checkOut.! !
!TusLibrosInternalInterface methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/14/2019 19:50:07' prior: 50786766!
initializeWithUsers: aUserRegistry withCatalog: aCatalog withClock: aClock withAMerchantProcessor: aMerchantProcessor
	
	userRegistry := aUserRegistry.
	carts := Dictionary new.
	catalog := aCatalog.
	lastCartID := 0.
	clock := aClock.
	salesBooks := Dictionary new.
	merchantProcessor := aMerchantProcessor.
	
	userRegistry keysDo: [ :userID | salesBooks at: userID put: OrderedCollection new].! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/14/2019 19:51:07' prior: 50786855!
checkoutCart: aCartID withCreditCardNumber: aNumber withCreditCardName: aName withExpritationDate: anExpirationDate on: aDate
	
	| creditCard cart cashier |
	
	self validateCartWith: aCartID.
	cart := carts at: aCartID.
	
	creditCard := CreditCard expiringOn: anExpirationDate  withName: aName  withNumber: aNumber.
	cashier := Cashier toCheckout: cart charging: creditCard  throught: merchantProcessor
						   on: aDate registeringOn: (salesBooks at: cart userID ).
	cashier checkOut.
	carts removeKey: aCartID.! !
!Sale class methodsFor: 'instance creation' stamp: 'Eden Torres 11/14/2019 19:53:58'!
of: aTotal withItems: items

	"should assert total is not negative or 0!!"
	^self new initializeTotal: aTotal items: items.! !

!methodRemoval: Sale class #of: stamp: 'Eden Torres 11/14/2019 19:54:03'!
of: aTotal

	"should assert total is not negative or 0!!"
	^self new initializeTotal: aTotal !

!classDefinition: #Sale category: #TusLibros stamp: 'Eden Torres 11/14/2019 19:55:03'!
Object subclass: #Sale
	instanceVariableNames: 'total items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!Sale methodsFor: 'initialization' stamp: 'Eden Torres 11/14/2019 19:55:01'!
initializeTotal: aTotal items: someItems

	total := aTotal.
	items := someItems.! !
!Cashier methodsFor: 'checkout - private' stamp: 'Eden Torres 11/14/2019 19:56:16' prior: 50777901!
createSale

	^ Sale of: total withItems: cart list .
! !

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'Eden Torres 11/14/2019 19:56:30'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'Eden Torres 11/14/2019 19:56:30'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'Eden Torres 11/14/2019 19:56:30'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'Eden Torres 11/14/2019 19:56:30'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'Eden Torres 11/14/2019 19:56:30'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'Eden Torres 11/14/2019 19:56:30'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'initialization' stamp: 'Eden Torres 11/14/2019 19:57:00' prior: 50784199!
createTusLibrosInternalInterfaceWithSalesBook: aSalesBook userRegistry: aUserRegistry

	^TusLibrosInternalInterface withUsers: aUserRegistry withCatalog: factory defaultCatalog 
										withClock: self withAMerchantProcessor: self.! !

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/14/2019 19:57:03'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/14/2019 19:57:04'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/14/2019 19:57:04'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/14/2019 19:57:04'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 19:57:04'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/14/2019 19:57:04'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 19:57:04'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/14/2019 19:57:04'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/14/2019 19:57:04'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/14/2019 19:57:04'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/14/2019 19:57:04'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/14/2019 19:57:04'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/14/2019 19:57:04'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/14/2019 19:57:04'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/14/2019 19:57:04'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/14/2019 19:57:04'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/14/2019 19:57:04'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/14/2019 19:57:04'!
ERROR!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/14/2019 19:57:04'!
ERROR!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/14/2019 19:57:04'!
ERROR!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/14/2019 19:57:04'!
ERROR!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/14/2019 19:57:04'!
ERROR!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/14/2019 19:57:04'!
ERROR!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/14/2019 19:57:12'!
ERROR!
!TusLibrosInternalInterface methodsFor: 'user management' stamp: 'Eden Torres 11/14/2019 19:58:21' prior: 50786586!
listPurchaseFor: aUserID withPassword: aPassword 
	
	^ salesBooks at: aUserID .! !

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/14/2019 19:58:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/14/2019 19:58:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/14/2019 19:58:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/14/2019 19:58:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 19:58:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/14/2019 19:58:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 19:58:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/14/2019 19:58:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/14/2019 19:58:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/14/2019 19:58:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/14/2019 19:58:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/14/2019 19:58:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/14/2019 19:58:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/14/2019 19:58:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/14/2019 19:58:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/14/2019 19:58:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/14/2019 19:58:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/14/2019 19:58:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/14/2019 19:58:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/14/2019 19:58:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/14/2019 19:58:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/14/2019 19:58:22'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/14/2019 19:58:22'!
ERROR!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/14/2019 19:58:22'!
ERROR!
!CartInterface methodsFor: 'accessing' stamp: 'Eden Torres 11/14/2019 19:58:58'!
total

	^ cart total .! !

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/14/2019 19:59:03'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/14/2019 19:59:03'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/14/2019 19:59:03'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/14/2019 19:59:03'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 19:59:03'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/14/2019 19:59:03'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 19:59:03'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/14/2019 19:59:03'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/14/2019 19:59:03'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/14/2019 19:59:03'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/14/2019 19:59:03'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/14/2019 19:59:03'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/14/2019 19:59:03'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/14/2019 19:59:03'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/14/2019 19:59:03'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/14/2019 19:59:03'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/14/2019 19:59:03'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/14/2019 19:59:03'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/14/2019 19:59:03'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/14/2019 19:59:03'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/14/2019 19:59:03'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/14/2019 19:59:03'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/14/2019 19:59:03'!
ERROR!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/14/2019 19:59:03'!
ERROR!

!classDefinition: #TusLibrosInternalInterfaceTest category: #TusLibros stamp: 'Eden Torres 11/14/2019 20:00:54'!
TestCase subclass: #TusLibrosInternalInterfaceTest
	instanceVariableNames: 'edenUser edenPassword userRegistry factory stubbedTime debitBehavior'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!TusLibrosInternalInterfaceTest methodsFor: 'nil' stamp: 'Eden Torres 11/14/2019 20:00:51'!
debit: anAmount from: aCreditCard 

	^debitBehavior value: anAmount value: aCreditCard ! !
!TusLibrosInternalInterfaceTest methodsFor: 'setUp/tearDown' stamp: 'Eden Torres 11/14/2019 20:01:35' prior: 50782140!
setUp

	edenUser := 'eden'.
	edenPassword := '12345678'.
	userRegistry := Dictionary new add: edenUser->edenPassword; yourself.
	factory := StoreTestObjectsFactory new.
	stubbedTime := 1.
	debitBehavior := [ :anAmount :aCreditCard | ]! !

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/14/2019 20:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/14/2019 20:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/14/2019 20:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/14/2019 20:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 20:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/14/2019 20:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 20:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/14/2019 20:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/14/2019 20:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/14/2019 20:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/14/2019 20:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/14/2019 20:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/14/2019 20:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/14/2019 20:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/14/2019 20:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/14/2019 20:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/14/2019 20:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/14/2019 20:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/14/2019 20:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/14/2019 20:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/14/2019 20:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/14/2019 20:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/14/2019 20:02:07'!
FAILURE!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/14/2019 20:02:07'!
FAILURE!
!TusLibrosInternalInterface methodsFor: 'user management - private' stamp: 'Eden Torres 11/14/2019 20:10:04'!
itemsInSales: sales

	^ sales inject: OrderedCollection new into: [:items :sale | items addAll: sale items; yourself]! !
!Sale methodsFor: 'items' stamp: 'Eden Torres 11/14/2019 20:10:51'!
items

	^ items.! !
!TusLibrosInternalInterface methodsFor: 'user management - private' stamp: 'Eden Torres 11/14/2019 20:13:13'!
totalOfSales: sales

	^ sales sum: [ :sale| sale total ].! !
!TusLibrosInternalInterface methodsFor: 'user management' stamp: 'Eden Torres 11/14/2019 20:16:34' prior: 50787083!
listPurchaseFor: aUserID withPassword: aPassword 
	
	| items sales total |
	sales := salesBooks at: aUserID .
	items := self itemsInSales: sales.
	total := self totalOfSales: sales.
	^ #(items total)! !
!TusLibrosInternalInterface methodsFor: 'user management' stamp: 'Eden Torres 11/14/2019 20:17:26' prior: 50787461!
listPurchaseFor: aUserID withPassword: aPassword 
	
	| items sales total |
	sales := salesBooks at: aUserID .
	items := self itemsInSales: sales.
	total := self totalOfSales: sales.
	^ Array with: items with: total .! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'Eden Torres 11/14/2019 20:20:04' prior: 50786627!
createCartFor: aUserID withPassword: aPassword 
	
	| cartID |

	self authenticateUser: aUserID withPassword: aPassword .

	cartID := self nextCartID .
	carts add: (cartID)->(CartInterface withCatalog: catalog withClock: clock withUserID: aUserID ).

	^cartID.! !
!TusLibrosInternalInterface methodsFor: 'user management - private' stamp: 'Eden Torres 11/14/2019 20:20:41'!
authenticateUser: aUserID withPassword: aPassword
	
	(userRegistry includesKey: aUserID) ifFalse: [self error: 'Usuario no registrado'].
	((userRegistry at: aUserID) = aPassword) ifFalse: [self error: 'Contraseña incorrecta'].! !
!TusLibrosInternalInterface methodsFor: 'user management' stamp: 'Eden Torres 11/14/2019 20:21:12' prior: 50787471!
listPurchaseFor: aUserID withPassword: aPassword 
	
	| items sales total |
	
	self authenticateUser: aUserID withPassword: aPassword .

	sales := salesBooks at: aUserID .
	items := self itemsInSales: sales.
	total := self totalOfSales: sales.
	^ Array with: items with: total .! !

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/14/2019 20:21:14'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/14/2019 20:21:14'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/14/2019 20:21:14'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/14/2019 20:21:14'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 20:21:14'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/14/2019 20:21:14'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 20:21:14'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/14/2019 20:21:14'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/14/2019 20:21:14'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/14/2019 20:21:14'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/14/2019 20:21:14'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/14/2019 20:21:14'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/14/2019 20:21:14'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/14/2019 20:21:14'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/14/2019 20:21:14'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/14/2019 20:21:14'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/14/2019 20:21:14'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/14/2019 20:21:14'!
ERROR!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/14/2019 20:21:14'!
ERROR!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/14/2019 20:21:14'!
ERROR!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/14/2019 20:21:14'!
ERROR!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/14/2019 20:21:14'!
ERROR!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/14/2019 20:21:14'!
FAILURE!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/14/2019 20:21:23'!
ERROR!
!TusLibrosInternalInterface methodsFor: 'user management - private' stamp: 'Eden Torres 11/14/2019 20:22:19' prior: 50787455!
totalOfSales: sales

	^ sales sum: [ :sale| sale total ] ifEmpty: [0].! !

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/14/2019 20:22:21'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/14/2019 20:22:21'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/14/2019 20:22:21'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/14/2019 20:22:21'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 20:22:21'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/14/2019 20:22:21'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 20:22:21'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/14/2019 20:22:21'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/14/2019 20:22:21'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/14/2019 20:22:21'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/14/2019 20:22:21'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/14/2019 20:22:21'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/14/2019 20:22:21'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/14/2019 20:22:21'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/14/2019 20:22:21'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/14/2019 20:22:21'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/14/2019 20:22:21'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/14/2019 20:22:21'!
FAILURE!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/14/2019 20:22:21'!
FAILURE!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/14/2019 20:22:21'!
FAILURE!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/14/2019 20:22:21'!
FAILURE!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/14/2019 20:22:21'!
FAILURE!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/14/2019 20:22:21'!
FAILURE!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/14/2019 20:22:23'!
FAILURE!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 20:23:14' prior: 50784858!
test18CheckoutCartShouldRaiseErrorWithInvalidCartId

	| interface |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
		
	self should: [interface checkoutCart: 'invalid id' withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'CartID inválido'.

	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty. ! !

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/14/2019 20:23:15'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/14/2019 20:23:15'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/14/2019 20:23:15'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/14/2019 20:23:15'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/14/2019 20:23:15'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 20:23:15'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/14/2019 20:23:15'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 20:23:15'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/14/2019 20:23:15'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/14/2019 20:23:15'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/14/2019 20:23:15'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/14/2019 20:23:15'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/14/2019 20:23:15'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/14/2019 20:23:15'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/14/2019 20:23:15'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/14/2019 20:23:15'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/14/2019 20:23:15'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/14/2019 20:23:15'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/14/2019 20:23:15'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/14/2019 20:23:15'!
FAILURE!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/14/2019 20:23:15'!
FAILURE!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/14/2019 20:23:15'!
FAILURE!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/14/2019 20:23:15'!
FAILURE!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/14/2019 20:23:15'!
FAILURE!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 20:23:24' prior: 50785218!
test19CheckoutCartShouldRaiseErrorWithEmptyCardName

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory emptyNameCreditCard number withCreditCardName:
	factory emptyNameCreditCard name withExpritationDate: factory emptyNameCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Nombre de la tarjeta inválido'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 20:23:30' prior: 50785564!
test20CheckoutCartShouldRaiseErrorWithTooLongCardName

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory tooLongNameCreditCard number withCreditCardName:
	factory tooLongNameCreditCard name withExpritationDate: factory tooLongNameCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Nombre de la tarjeta inválido'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 20:23:35' prior: 50785798!
test21CheckoutCartShouldRaiseErrorWithExpiredCard

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory expiredCreditCard number withCreditCardName:
	factory expiredCreditCard name withExpritationDate: factory expiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Can not charge an expired credit card'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 20:23:40' prior: 50786104!
test22CheckoutCartShouldRaiseErrorWithEmptyCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Can not check out an empty cart'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 20:23:46' prior: 50786548!
test23CheckoutCartWithOneElementListsOnePurchase

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.


	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first includes: factory itemSellByTheStore . ! !

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/14/2019 20:23:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/14/2019 20:23:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/14/2019 20:23:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/14/2019 20:23:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/14/2019 20:23:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 20:23:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/14/2019 20:23:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 20:23:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/14/2019 20:23:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/14/2019 20:23:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/14/2019 20:23:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/14/2019 20:23:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/14/2019 20:23:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/14/2019 20:23:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/14/2019 20:23:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/14/2019 20:23:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/14/2019 20:23:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/14/2019 20:23:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/14/2019 20:23:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/14/2019 20:23:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/14/2019 20:23:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/14/2019 20:23:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/14/2019 20:23:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/14/2019 20:23:49'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 20:54:55' prior: 50787740!
test18CheckoutCartShouldRaiseErrorWithInvalidCartId

	| interface |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
		
	self should: [interface checkoutCart: 'invalid id' withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'CartID inválido'.

	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty. 
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: 0. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 20:55:01' prior: 50787872!
test19CheckoutCartShouldRaiseErrorWithEmptyCardName

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory emptyNameCreditCard number withCreditCardName:
	factory emptyNameCreditCard name withExpritationDate: factory emptyNameCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Nombre de la tarjeta inválido'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: 0.  ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 20:55:07' prior: 50787902!
test20CheckoutCartShouldRaiseErrorWithTooLongCardName

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory tooLongNameCreditCard number withCreditCardName:
	factory tooLongNameCreditCard name withExpritationDate: factory tooLongNameCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Nombre de la tarjeta inválido'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: 0.  ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 20:55:12' prior: 50787932!
test21CheckoutCartShouldRaiseErrorWithExpiredCard

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory expiredCreditCard number withCreditCardName:
	factory expiredCreditCard name withExpritationDate: factory expiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Can not charge an expired credit card'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty. 
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: 0. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 20:55:23' prior: 50787962!
test22CheckoutCartShouldRaiseErrorWithEmptyCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Can not check out an empty cart'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty. 
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: 0. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 20:56:06' prior: 50787989!
test23CheckoutCartWithOneElementListsOnePurchase

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.


	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first includes: factory itemSellByTheStore .
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: factory .  ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 20:56:30' prior: 50788280!
test23CheckoutCartWithOneElementListsOnePurchase

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.


	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first includes: factory itemSellByTheStore .
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: factory itemSellByTheStorePrice .  ! !

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/14/2019 20:56:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/14/2019 20:56:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/14/2019 20:56:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/14/2019 20:56:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/14/2019 20:56:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 20:56:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/14/2019 20:56:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 20:56:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/14/2019 20:56:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/14/2019 20:56:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/14/2019 20:56:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/14/2019 20:56:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/14/2019 20:56:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/14/2019 20:56:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/14/2019 20:56:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/14/2019 20:56:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/14/2019 20:56:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/14/2019 20:56:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/14/2019 20:56:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/14/2019 20:56:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/14/2019 20:56:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/14/2019 20:56:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/14/2019 20:56:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/14/2019 20:56:32'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 20:58:02'!
test24CheckoutCartWithTwoElementListsTwoPurchase

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	interface addToCart: cartID item: factory anotherItemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.

	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first includes: factory itemSellByTheStore .
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first includes: factory anotherItemSellByTheStore.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: factory itemSellByTheStorePrice .  ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 20:58:29' prior: 50788450!
test24CheckoutCartWithTwoElementListsTwoPurchase

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	interface addToCart: cartID item: factory anotherItemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.

	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first size equals: 2 .
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first includes: factory itemSellByTheStore .
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first includes: factory anotherItemSellByTheStore.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: factory itemSellByTheStorePrice .  ! !
!StoreTestObjectsFactory methodsFor: 'cart' stamp: 'Eden Torres 11/14/2019 20:58:50' prior: 50778464!
defaultCatalog
	
	^ Dictionary new
		at: self itemSellByTheStore put: self itemSellByTheStorePrice;
		at: self anotherItemSellByTheStore  put: self anotherItemSellByTheStorePrice; 
		yourself! !
!StoreTestObjectsFactory methodsFor: 'items' stamp: 'Eden Torres 11/14/2019 20:59:03'!
anotherItemSellByTheStorePrice
	
	^5! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:00:44' prior: 50788488!
test24CheckoutCartWithTwoElementListsTwoPurchase

	| interface cartID listPurchase totalPurchaseAmount |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	interface addToCart: cartID item: factory anotherItemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	totalPurchaseAmount := factory itemSellByTheStorePrice + factory anotherItemSellByTheStorePrice.
	listPurchase := interface listPurchaseFor: edenUser withPassword: edenPassword.

	self assert: interface carts isEmpty.
	self assert: listPurchase first size equals: 2 .
	self assert: listPurchase first includes: factory itemSellByTheStore .
	self assert: listPurchase first includes: factory anotherItemSellByTheStore.
	self assert: listPurchase second equals:  totalPurchaseAmount.  
	! !

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'Eden Torres 11/14/2019 21:00:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/14/2019 21:00:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/14/2019 21:00:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/14/2019 21:00:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/14/2019 21:00:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 21:00:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/14/2019 21:00:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 21:00:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/14/2019 21:00:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/14/2019 21:00:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/14/2019 21:00:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/14/2019 21:00:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/14/2019 21:00:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/14/2019 21:00:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/14/2019 21:00:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/14/2019 21:00:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/14/2019 21:00:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/14/2019 21:00:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/14/2019 21:00:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/14/2019 21:00:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/14/2019 21:00:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/14/2019 21:00:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/14/2019 21:00:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/14/2019 21:00:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'Eden Torres 11/14/2019 21:00:54'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:01:13'!
test25CheckoutCartWithTwoEqualElementsListsTwoPurchase

	| interface cartID listPurchase totalPurchaseAmount |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	interface addToCart: cartID item: factory anotherItemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	totalPurchaseAmount := factory itemSellByTheStorePrice + factory anotherItemSellByTheStorePrice.
	listPurchase := interface listPurchaseFor: edenUser withPassword: edenPassword.

	self assert: interface carts isEmpty.
	self assert: listPurchase first size equals: 2 .
	self assert: listPurchase first includes: factory itemSellByTheStore .
	self assert: listPurchase first includes: factory anotherItemSellByTheStore.
	self assert: listPurchase second equals:  totalPurchaseAmount.  
	! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:02:46' prior: 50788696!
test25CheckoutCartWithTwoEqualElementsListsTwoPurchase

	| interface cartID listPurchase totalPurchaseAmount |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 2.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	totalPurchaseAmount := factory itemSellByTheStorePrice * 2.
	listPurchase := interface listPurchaseFor: edenUser withPassword: edenPassword.

	self assert: interface carts isEmpty.
	self assert: listPurchase first size equals: 2 .
	self assert: (listPurchase  first  occurrencesOf: factory itemSellByTheStore) equals: 2.
	self assert: listPurchase second equals:  totalPurchaseAmount.  
	! !

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'Eden Torres 11/14/2019 21:02:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/14/2019 21:02:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/14/2019 21:02:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/14/2019 21:02:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/14/2019 21:02:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 21:02:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/14/2019 21:02:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 21:02:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/14/2019 21:02:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/14/2019 21:02:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/14/2019 21:02:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/14/2019 21:02:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/14/2019 21:02:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/14/2019 21:02:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/14/2019 21:02:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/14/2019 21:02:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/14/2019 21:02:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/14/2019 21:02:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/14/2019 21:02:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/14/2019 21:02:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/14/2019 21:02:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/14/2019 21:02:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/14/2019 21:02:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/14/2019 21:02:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'Eden Torres 11/14/2019 21:02:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'Eden Torres 11/14/2019 21:02:49'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:04:14' prior: 50788738!
test25CheckoutCartWithTwoEqualElementsListsTwoPurchase

	| interface cartID listPurchase totalPurchaseAmount |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 2.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory anotherItemSellByTheStore withQuantity: 2.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	totalPurchaseAmount := factory itemSellByTheStorePrice * 2 + factory anotherItemSellByTheStorePrice  * 2.
	listPurchase := interface listPurchaseFor: edenUser withPassword: edenPassword.

	self assert: interface carts isEmpty.
	self assert: listPurchase first size equals: 4 .
	self assert: (listPurchase  first  occurrencesOf: factory itemSellByTheStore) equals: 2.
	self assert: (listPurchase  first  occurrencesOf: factory anotherItemSellByTheStore ) equals: 2.
	self assert: listPurchase second equals:  totalPurchaseAmount.  
	! !

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'Eden Torres 11/14/2019 21:04:15'!
FAILURE!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'Eden Torres 11/14/2019 21:04:43'!
FAILURE!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'Eden Torres 11/14/2019 21:04:58'!
FAILURE!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/14/2019 21:06:09'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/14/2019 21:06:09'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/14/2019 21:06:09'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/14/2019 21:06:09'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 21:06:09'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/14/2019 21:06:09'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 21:06:09'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/14/2019 21:06:09'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/14/2019 21:06:09'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/14/2019 21:06:09'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/14/2019 21:06:09'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/14/2019 21:06:09'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/14/2019 21:06:09'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/14/2019 21:06:10'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/14/2019 21:06:10'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/14/2019 21:06:10'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/14/2019 21:06:10'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/14/2019 21:06:10'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/14/2019 21:06:10'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/14/2019 21:06:10'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/14/2019 21:06:10'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/14/2019 21:06:10'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/14/2019 21:06:10'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'Eden Torres 11/14/2019 21:06:10'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'Eden Torres 11/14/2019 21:06:10'!
FAILURE!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'Eden Torres 11/14/2019 21:06:10'!
FAILURE!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:08:41' prior: 50788891!
test25CheckoutCartWithTwoEqualElementsListsTwoPurchase

	| interface cartID listPurchase totalPurchaseAmount |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 2.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory anotherItemSellByTheStore withQuantity: 2.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	totalPurchaseAmount := (factory itemSellByTheStorePrice * 2) + (factory anotherItemSellByTheStorePrice  * 2).
	listPurchase := interface listPurchaseFor: edenUser withPassword: edenPassword.

	self assert: interface carts isEmpty.
	self assert: listPurchase first size equals: 4 .
	self assert: (listPurchase  first  occurrencesOf: factory itemSellByTheStore) equals: 2.
	self assert: (listPurchase  first  occurrencesOf: factory anotherItemSellByTheStore ) equals: 2.
	self assert: listPurchase second equals:  totalPurchaseAmount.  
	! !

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'Eden Torres 11/14/2019 21:08:43'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/14/2019 21:08:43'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/14/2019 21:08:43'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/14/2019 21:08:43'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/14/2019 21:08:43'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 21:08:43'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/14/2019 21:08:43'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 21:08:43'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/14/2019 21:08:43'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/14/2019 21:08:43'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/14/2019 21:08:43'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/14/2019 21:08:43'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/14/2019 21:08:43'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/14/2019 21:08:43'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/14/2019 21:08:43'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/14/2019 21:08:43'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/14/2019 21:08:43'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/14/2019 21:08:43'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/14/2019 21:08:43'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/14/2019 21:08:43'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/14/2019 21:08:43'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/14/2019 21:08:43'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/14/2019 21:08:43'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/14/2019 21:08:43'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'Eden Torres 11/14/2019 21:08:43'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'Eden Torres 11/14/2019 21:08:43'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:09:52'!
test23CheckoutCartWithOneElementListsOnlySameUserPurchases

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.


	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first includes: factory itemSellByTheStore .
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: factory itemSellByTheStorePrice .  ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:11:43' prior: 50789245!
test23CheckoutCartWithOneElementListsOnlySameUserPurchases

	| interface cartID listPurchaseEden |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	listPurchaseEden := interface listPurchaseFor: edenUser withPassword: edenPassword.

	self assert: interface carts isEmpty.
	self assert listPurchaseEden first size equals: 1.
	self assert: listPurchaseEden first includes: factory itemSellByTheStore .
	self assert: listPurchaseEden second equals: factory itemSellByTheStorePrice .  ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:12:05' prior: 50789277!
test23CheckoutCartWithOneElementListsOnlySameUserPurchases

	| interface cartID listPurchaseEden |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	listPurchaseEden := interface listPurchaseFor: edenUser withPassword: edenPassword.

	self assert: interface carts isEmpty.
	self assert: (listPurchaseEden first size) equals: 1.
	self assert: listPurchaseEden first includes: factory itemSellByTheStore .
	self assert: listPurchaseEden second equals: factory itemSellByTheStorePrice .  ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:12:22' prior: 50789323!
test23CheckoutCartWithOneElementListsOnlySameUserPurchases

	| interface cartID listPurchaseEden |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	listPurchaseEden := interface listPurchaseFor: edenUser withPassword: edenPassword.
	listPurchaseEden := interface listPurchaseFor: edenUser withPassword: edenPassword.

	self assert: interface carts isEmpty.
	self assert: listPurchaseEden first size equals: 1.
	self assert: listPurchaseEden first includes: factory itemSellByTheStore .
	self assert: listPurchaseEden second equals: factory itemSellByTheStorePrice .  ! !

!classDefinition: #TusLibrosInternalInterfaceTest category: #TusLibros stamp: 'Eden Torres 11/14/2019 21:12:50'!
TestCase subclass: #TusLibrosInternalInterfaceTest
	instanceVariableNames: 'edenUser edenPassword userRegistry factory stubbedTime debitBehavior santiUser'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #TusLibrosInternalInterfaceTest category: #TusLibros stamp: 'Eden Torres 11/14/2019 21:12:51'!
TestCase subclass: #TusLibrosInternalInterfaceTest
	instanceVariableNames: 'edenUser edenPassword userRegistry factory stubbedTime debitBehavior santiUser santiPassword'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!TusLibrosInternalInterfaceTest methodsFor: 'setUp/tearDown' stamp: 'Eden Torres 11/14/2019 21:12:47' prior: 50787325!
setUp

	edenUser := 'eden'.
	edenPassword := '12345678'.
	santiUser := 'santinah'.
	santiPassword := 'the.best'.
	userRegistry := Dictionary new add: edenUser->edenPassword; yourself.
	factory := StoreTestObjectsFactory new.
	stubbedTime := 1.
	debitBehavior := [ :anAmount :aCreditCard | ]! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:13:36' prior: 50789075!
test25CheckoutCartWithTwoEqualElementsListsTwoPurchase

	| interface cartID listPurchase totalPurchaseAmount |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 2.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory anotherItemSellByTheStore withQuantity: 2.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	totalPurchaseAmount := (factory itemSellByTheStorePrice * 2) + (factory anotherItemSellByTheStorePrice  * 2).
	listPurchase := interface listPurchaseFor: edenUser withPassword: edenPassword.

	self assert: interface carts isEmpty.
	self assert: listPurchase first size equals: 4 .
	self assert: (listPurchase  first  occurrencesOf: factory itemSellByTheStore) equals: 2.
	self assert: (listPurchase  first  occurrencesOf: factory anotherItemSellByTheStore ) equals: 2.
	self assert: listPurchase second equals:  totalPurchaseAmount.  
	! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:14:02'!
test26CheckoutCartWithOneElementListsOnlySameUserPurchases

	| interface cartID listPurchaseEden |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	listPurchaseEden := interface listPurchaseFor: edenUser withPassword: edenPassword.
	listPurchaseEden := interface listPurchaseFor: edenUser withPassword: edenPassword.

	self assert: interface carts isEmpty.
	self assert: listPurchaseEden first size equals: 1.
	self assert: listPurchaseEden first includes: factory itemSellByTheStore .
	self assert: listPurchaseEden second equals: factory itemSellByTheStorePrice .  ! !

!methodRemoval: TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'Eden Torres 11/14/2019 21:14:02'!
test23CheckoutCartWithOneElementListsOnlySameUserPurchases

	| interface cartID listPurchaseEden |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	listPurchaseEden := interface listPurchaseFor: edenUser withPassword: edenPassword.
	listPurchaseEden := interface listPurchaseFor: edenUser withPassword: edenPassword.

	self assert: interface carts isEmpty.
	self assert: listPurchaseEden first size equals: 1.
	self assert: listPurchaseEden first includes: factory itemSellByTheStore .
	self assert: listPurchaseEden second equals: factory itemSellByTheStorePrice .  !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:15:05' prior: 50789507!
test26CheckoutCartWithOneElementListsOnlySameUserPurchases

	| interface cartID listPurchaseEden listPurchaseSanti |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	cartID := interface createCartFor: santiUser withPassword: santiPassword .
	
	interface addToCart: cartID item: factory anotherItemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	listPurchaseEden := interface listPurchaseFor: edenUser withPassword: edenPassword.
	listPurchaseSanti := interface listPurchaseFor: santiUser withPassword: santiPassword .

	self assert: interface carts isEmpty.
	self assert: listPurchaseEden first size equals: 1.
	self assert: listPurchaseEden first includes: factory itemSellByTheStore .
	self assert: listPurchaseEden second equals: factory itemSellByTheStorePrice .  
	
	self assert: listPurchaseEden first size equals: 1.
	self assert: listPurchaseEden first includes: factory anotherItemSellByTheStore .
	self assert: listPurchaseEden second equals: factory anotherItemSellByTheStorePrice . ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:15:20' prior: 50789606!
test26CheckoutCartWithOneElementListsOnlySameUserPurchases

	| interface cartID listPurchaseEden listPurchaseSanti |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	cartID := interface createCartFor: santiUser withPassword: santiPassword .
	
	interface addToCart: cartID item: factory anotherItemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	listPurchaseEden := interface listPurchaseFor: edenUser withPassword: edenPassword.
	listPurchaseSanti := interface listPurchaseFor: santiUser withPassword: santiPassword .

	self assert: interface carts isEmpty.
	self assert: listPurchaseEden first size equals: 1.
	self assert: listPurchaseEden first includes: factory itemSellByTheStore .
	self assert: listPurchaseEden second equals: factory itemSellByTheStorePrice .  
	
	self assert: listPurchaseSanti first size equals: 1.
	self assert: listPurchaseSanti first includes: factory anotherItemSellByTheStore .
	self assert: listPurchaseSanti second equals: factory anotherItemSellByTheStorePrice . ! !
!TusLibrosInternalInterfaceTest methodsFor: 'setUp/tearDown' stamp: 'Eden Torres 11/14/2019 21:16:00' prior: 50789441!
setUp

	edenUser := 'eden'.
	edenPassword := '12345678'.
	santiUser := 'santinah'.
	santiPassword := 'the.best'.
	userRegistry := Dictionary new add: edenUser->edenPassword; add: santiUser -> santiPassword ; yourself.
	factory := StoreTestObjectsFactory new.
	stubbedTime := 1.
	debitBehavior := [ :anAmount :aCreditCard | ]! !

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/14/2019 21:16:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/14/2019 21:16:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/14/2019 21:16:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/14/2019 21:16:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 21:16:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/14/2019 21:16:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 21:16:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/14/2019 21:16:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/14/2019 21:16:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/14/2019 21:16:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/14/2019 21:16:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/14/2019 21:16:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/14/2019 21:16:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/14/2019 21:16:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/14/2019 21:16:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/14/2019 21:16:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/14/2019 21:16:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/14/2019 21:16:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/14/2019 21:16:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/14/2019 21:16:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/14/2019 21:16:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/14/2019 21:16:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/14/2019 21:16:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'Eden Torres 11/14/2019 21:16:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'Eden Torres 11/14/2019 21:16:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'Eden Torres 11/14/2019 21:16:07'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:19:34'!
test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist

	| interface listPurchaseEden |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
			
	self should: [interface listPurchaseFor: edenUser withPassword: edenPassword]
		 raise: Error - MessageNotUnderstood 
		 withMessageText: ''.

	self assert: interface carts isEmpty.
	self assert: listPurchaseEden first size equals: 1.
	self assert: listPurchaseEden first includes: factory itemSellByTheStore .
	self assert: listPurchaseEden second equals: factory itemSellByTheStorePrice .  ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:20:37' prior: 50789852!
test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist

	| interface |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
			
	self should: [interface listPurchaseFor: edenUser withPassword: edenPassword]
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'Usuario no registrado'.! !

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'Eden Torres 11/14/2019 21:20:39'!
FAILURE!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:21:31' prior: 50789875!
test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist

	| interface |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: ''.
			
	self should: [interface listPurchaseFor: edenUser withPassword: edenPassword]
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'Usuario no registrado'.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:22:02' prior: 50784211!
test01CreateCartRaisesErrorWhenNonExistentUser

	| interface emptyUserRegistrya |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: emptyUserRegistrya. 
	
	self should: [interface createCartFor: edenUser withPassword: edenPassword]
		 raise: Error - MessageNotUnderstood
		 withMessageText: 'Usuario no registrado'.
		
	self assert: interface carts isEmpty.
		 ! !

!classDefinition: #TusLibrosInternalInterfaceTest category: #TusLibros stamp: 'Eden Torres 11/14/2019 21:22:10'!
TestCase subclass: #TusLibrosInternalInterfaceTest
	instanceVariableNames: 'edenUser edenPassword userRegistry factory stubbedTime debitBehavior santiUser santiPassword emptyUserRegistry'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:22:08' prior: 50789910!
test01CreateCartRaisesErrorWhenNonExistentUser

	| interface |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: emptyUserRegistry. 
	
	self should: [interface createCartFor: edenUser withPassword: edenPassword]
		 raise: Error - MessageNotUnderstood
		 withMessageText: 'Usuario no registrado'.
		
	self assert: interface carts isEmpty.
		 ! !
!TusLibrosInternalInterfaceTest methodsFor: 'setUp/tearDown' stamp: 'Eden Torres 11/14/2019 21:22:23' prior: 50789721!
setUp

	edenUser := 'eden'.
	edenPassword := '12345678'.
	santiUser := 'santinah'.
	santiPassword := 'the.best'.
	userRegistry := Dictionary new add: edenUser->edenPassword; add: santiUser -> santiPassword ; yourself.
	emptyUserRegistry := Dictionary new.
	factory := StoreTestObjectsFactory new.
	stubbedTime := 1.
	debitBehavior := [ :anAmount :aCreditCard | ]! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:22:36' prior: 50789895!
test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist

	| interface |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: emptyUserRegistry .
			
	self should: [interface listPurchaseFor: edenUser withPassword: edenPassword]
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'Usuario no registrado'.! !

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'Eden Torres 11/14/2019 21:22:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/14/2019 21:22:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/14/2019 21:22:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/14/2019 21:22:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/14/2019 21:22:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 21:22:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/14/2019 21:22:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 21:22:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/14/2019 21:22:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/14/2019 21:22:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/14/2019 21:22:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/14/2019 21:22:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/14/2019 21:22:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/14/2019 21:22:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/14/2019 21:22:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/14/2019 21:22:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/14/2019 21:22:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/14/2019 21:22:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/14/2019 21:22:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/14/2019 21:22:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/14/2019 21:22:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/14/2019 21:22:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/14/2019 21:22:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/14/2019 21:22:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'Eden Torres 11/14/2019 21:22:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'Eden Torres 11/14/2019 21:22:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'Eden Torres 11/14/2019 21:22:39'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'Eden Torres 11/14/2019 21:22:39'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:23:34'!
test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch

	| interface |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: emptyUserRegistry .
			
	self should: [interface listPurchaseFor: edenUser withPassword: santiPassword ]
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'Usuario no registrado'.! !

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'Eden Torres 11/14/2019 21:23:34'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/14/2019 21:23:34'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/14/2019 21:23:34'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/14/2019 21:23:34'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/14/2019 21:23:34'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 21:23:34'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/14/2019 21:23:34'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 21:23:34'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/14/2019 21:23:34'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/14/2019 21:23:34'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/14/2019 21:23:34'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/14/2019 21:23:34'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/14/2019 21:23:34'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/14/2019 21:23:34'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/14/2019 21:23:34'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/14/2019 21:23:34'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/14/2019 21:23:34'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/14/2019 21:23:34'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/14/2019 21:23:34'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/14/2019 21:23:34'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/14/2019 21:23:34'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/14/2019 21:23:34'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/14/2019 21:23:34'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/14/2019 21:23:34'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'Eden Torres 11/14/2019 21:23:34'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'Eden Torres 11/14/2019 21:23:34'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'Eden Torres 11/14/2019 21:23:34'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'Eden Torres 11/14/2019 21:23:34'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'Eden Torres 11/14/2019 21:23:34'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:23:45' prior: 50790112!
test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch

	| interface |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry .
			
	self should: [interface listPurchaseFor: edenUser withPassword: santiPassword ]
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'Usuario no registrado'.! !

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'Eden Torres 11/14/2019 21:23:45'!
FAILURE!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:24:06' prior: 50790259!
test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch

	| interface |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry .
			
	self should: [interface listPurchaseFor: edenUser withPassword: santiPassword ]
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'Contraseña incorrecta'.! !

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'Eden Torres 11/14/2019 21:24:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/14/2019 21:24:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/14/2019 21:24:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/14/2019 21:24:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/14/2019 21:24:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 21:24:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/14/2019 21:24:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 21:24:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/14/2019 21:24:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/14/2019 21:24:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/14/2019 21:24:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/14/2019 21:24:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/14/2019 21:24:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/14/2019 21:24:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/14/2019 21:24:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/14/2019 21:24:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/14/2019 21:24:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/14/2019 21:24:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/14/2019 21:24:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/14/2019 21:24:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/14/2019 21:24:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/14/2019 21:24:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/14/2019 21:24:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/14/2019 21:24:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'Eden Torres 11/14/2019 21:24:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'Eden Torres 11/14/2019 21:24:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'Eden Torres 11/14/2019 21:24:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'Eden Torres 11/14/2019 21:24:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'Eden Torres 11/14/2019 21:24:07'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:26:22'!
test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry .
	cartID := interface createCartFor: edenUser withPassword: edenPassword .
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 38.
			
	interface listPurchaseFor: edenUser withPassword: santiPassword.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:27:20' prior: 50790425!
test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry .
	cartID := interface createCartFor: edenUser withPassword: edenPassword .
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 38.
			
	self assert: (interface listPurchaseFor: edenUser withPassword: santiPassword) isEmpty .! !

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'Eden Torres 11/14/2019 21:27:22'!
ERROR!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:27:33' prior: 50790442!
test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry .
	cartID := interface createCartFor: edenUser withPassword: edenPassword .
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 38.
			
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword ) isEmpty .! !

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'Eden Torres 11/14/2019 21:27:34'!
FAILURE!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:27:47' prior: 50790464!
test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry .
	cartID := interface createCartFor: edenUser withPassword: edenPassword .
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 38.
			
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword ) first isEmpty .! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:28:07' prior: 50790486!
test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry .
	cartID := interface createCartFor: edenUser withPassword: edenPassword .
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 38.
			
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword ) first isEmpty .
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword ) second equals: 0 .! !

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'Eden Torres 11/14/2019 21:28:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/14/2019 21:28:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/14/2019 21:28:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/14/2019 21:28:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/14/2019 21:28:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 21:28:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/14/2019 21:28:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 21:28:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/14/2019 21:28:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/14/2019 21:28:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/14/2019 21:28:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/14/2019 21:28:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/14/2019 21:28:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/14/2019 21:28:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/14/2019 21:28:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/14/2019 21:28:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/14/2019 21:28:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/14/2019 21:28:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/14/2019 21:28:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/14/2019 21:28:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/14/2019 21:28:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/14/2019 21:28:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/14/2019 21:28:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/14/2019 21:28:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'Eden Torres 11/14/2019 21:28:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'Eden Torres 11/14/2019 21:28:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'Eden Torres 11/14/2019 21:28:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'Eden Torres 11/14/2019 21:28:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'Eden Torres 11/14/2019 21:28:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'Eden Torres 11/14/2019 21:28:07'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:30:40'!
test30CheckoutCartShouldRaiseErrorWithExpiredCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 31.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Can not check out an empty cart'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty. 
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: 0. ! !

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'Eden Torres 11/14/2019 21:30:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/14/2019 21:30:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/14/2019 21:30:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/14/2019 21:30:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/14/2019 21:30:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 21:30:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/14/2019 21:30:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 21:30:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/14/2019 21:30:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/14/2019 21:30:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/14/2019 21:30:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/14/2019 21:30:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/14/2019 21:30:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/14/2019 21:30:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/14/2019 21:30:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/14/2019 21:30:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/14/2019 21:30:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/14/2019 21:30:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/14/2019 21:30:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/14/2019 21:30:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/14/2019 21:30:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/14/2019 21:30:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/14/2019 21:30:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/14/2019 21:30:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'Eden Torres 11/14/2019 21:30:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'Eden Torres 11/14/2019 21:30:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'Eden Torres 11/14/2019 21:30:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'Eden Torres 11/14/2019 21:30:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'Eden Torres 11/14/2019 21:30:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'Eden Torres 11/14/2019 21:30:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'Eden Torres 11/14/2019 21:30:49'!
PASSED!
!CartInterface methodsFor: 'initialization' stamp: 'Eden Torres 11/14/2019 21:37:09' prior: 50782321!
list 
	
	"timeLastModified := clock localMillisecondClock." 
	^ cart list.! !

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'Eden Torres 11/14/2019 21:37:19'!
PASSED!
!CartInterface methodsFor: 'initialization' stamp: 'Eden Torres 11/14/2019 21:37:39' prior: 50782420!
add: anAmount of: anItem

	cart add: anAmount of: anItem.
	"timeLastModified := clock localMillisecondClock."! !

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'Eden Torres 11/14/2019 21:37:47'!
PASSED!
!CartInterface methodsFor: 'initialization' stamp: 'Eden Torres 11/14/2019 21:38:11' prior: 50790842!
add: anAmount of: anItem

	cart add: anAmount of: anItem.
	timeLastModified := clock localMillisecondClock.! !
!CartInterface methodsFor: 'initialization' stamp: 'Eden Torres 11/14/2019 21:38:17' prior: 50790831!
list 
	
	timeLastModified := clock localMillisecondClock.
	^ cart list.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:38:46' prior: 50790660!
test30CheckoutCartShouldRaiseErrorWithExpiredCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 31 minutes totalMilliseconds.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Can not check out an empty cart'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty. 
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: 0. ! !

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'Eden Torres 11/14/2019 21:38:47'!
FAILURE!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:38:56' prior: 50790867!
test30CheckoutCartShouldRaiseErrorWithExpiredCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 31 minutes totalMilliseconds.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Carrito expirado'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty. 
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: 0. ! !

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'Eden Torres 11/14/2019 21:39:00'!
FAILURE!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:39:17' prior: 50790904!
test30CheckoutCartShouldRaiseErrorWithExpiredCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 31 minutes totalMilliseconds.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Carrito expirado'.

	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty. 
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: 0. ! !

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'Eden Torres 11/14/2019 21:39:19'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/14/2019 21:39:19'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/14/2019 21:39:19'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/14/2019 21:39:19'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/14/2019 21:39:19'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 21:39:19'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/14/2019 21:39:19'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 21:39:19'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/14/2019 21:39:19'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/14/2019 21:39:19'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/14/2019 21:39:19'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/14/2019 21:39:19'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/14/2019 21:39:19'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/14/2019 21:39:19'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/14/2019 21:39:19'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/14/2019 21:39:19'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/14/2019 21:39:19'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/14/2019 21:39:19'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/14/2019 21:39:19'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/14/2019 21:39:19'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/14/2019 21:39:19'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/14/2019 21:39:19'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/14/2019 21:39:19'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/14/2019 21:39:19'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'Eden Torres 11/14/2019 21:39:19'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'Eden Torres 11/14/2019 21:39:19'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'Eden Torres 11/14/2019 21:39:19'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'Eden Torres 11/14/2019 21:39:19'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'Eden Torres 11/14/2019 21:39:19'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'Eden Torres 11/14/2019 21:39:19'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'Eden Torres 11/14/2019 21:39:19'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:39:40' prior: 50790940!
test30CheckoutCartShouldRaiseErrorWithExpiredCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 38.
	
	stubbedTime := stubbedTime + 31 minutes totalMilliseconds.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Carrito expirado'.

	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty. 
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: 0. ! !

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'Eden Torres 11/14/2019 21:39:41'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/14/2019 21:39:41'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/14/2019 21:39:41'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/14/2019 21:39:41'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/14/2019 21:39:41'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 21:39:41'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/14/2019 21:39:41'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 21:39:41'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/14/2019 21:39:41'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/14/2019 21:39:41'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/14/2019 21:39:41'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/14/2019 21:39:41'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/14/2019 21:39:41'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/14/2019 21:39:41'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/14/2019 21:39:41'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/14/2019 21:39:41'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/14/2019 21:39:41'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/14/2019 21:39:41'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/14/2019 21:39:41'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/14/2019 21:39:41'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/14/2019 21:39:41'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/14/2019 21:39:41'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/14/2019 21:39:41'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/14/2019 21:39:41'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'Eden Torres 11/14/2019 21:39:41'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'Eden Torres 11/14/2019 21:39:41'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'Eden Torres 11/14/2019 21:39:41'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'Eden Torres 11/14/2019 21:39:41'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'Eden Torres 11/14/2019 21:39:41'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'Eden Torres 11/14/2019 21:39:41'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'Eden Torres 11/14/2019 21:39:41'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:41:50'!
test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 38.
	
	stubbedTime := stubbedTime + 31 minutes totalMilliseconds.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Carrito expirado'.

	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty. 
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: 0. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:42:04' prior: 50791286!
test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 38.
	
 	debitBehavior := [ :anAmount :aCreditCard | self error: Cashier creditCardHasNoCreditErrorMessage].
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Carrito expirado'.

	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty. 
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: 0. ! !

!testRun: #TusLibrosInternalInterfaceTest #test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError stamp: 'Eden Torres 11/14/2019 21:42:05'!
FAILURE!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:42:17' prior: 50791320!
test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 38.
	
 	debitBehavior := [ :anAmount :aCreditCard | self error: Cashier creditCardHasNoCreditErrorMessage].
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Cashier creditCardHasNoCreditErrorMessage'.

	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty. 
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: 0. ! !

!testRun: #TusLibrosInternalInterfaceTest #test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError stamp: 'Eden Torres 11/14/2019 21:42:19'!
FAILURE!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:42:29' prior: 50791361!
test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 38.
	
 	debitBehavior := [ :anAmount :aCreditCard | self error: Cashier creditCardHasNoCreditErrorMessage].
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: Cashier creditCardHasNoCreditErrorMessage.

	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty. 
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: 0. ! !

!testRun: #TusLibrosInternalInterfaceTest #test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError stamp: 'Eden Torres 11/14/2019 21:42:31'!
FAILURE!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/14/2019 21:42:50' prior: 50791402!
test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 38.
	
 	debitBehavior := [ :anAmount :aCreditCard | self error: Cashier creditCardHasNoCreditErrorMessage].
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: Cashier creditCardHasNoCreditErrorMessage.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty. 
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: 0. ! !

!testRun: #TusLibrosInternalInterfaceTest #test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError stamp: 'Eden Torres 11/14/2019 21:42:52'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/14/2019 21:42:52'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/14/2019 21:42:52'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/14/2019 21:42:52'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/14/2019 21:42:52'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 21:42:52'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/14/2019 21:42:52'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/14/2019 21:42:52'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/14/2019 21:42:53'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/14/2019 21:42:53'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/14/2019 21:42:53'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/14/2019 21:42:53'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/14/2019 21:42:53'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/14/2019 21:42:53'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/14/2019 21:42:53'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/14/2019 21:42:53'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/14/2019 21:42:53'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/14/2019 21:42:53'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/14/2019 21:42:53'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/14/2019 21:42:53'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/14/2019 21:42:53'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/14/2019 21:42:53'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/14/2019 21:42:53'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/14/2019 21:42:53'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'Eden Torres 11/14/2019 21:42:53'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'Eden Torres 11/14/2019 21:42:53'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'Eden Torres 11/14/2019 21:42:53'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'Eden Torres 11/14/2019 21:42:53'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'Eden Torres 11/14/2019 21:42:53'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'Eden Torres 11/14/2019 21:42:53'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'Eden Torres 11/14/2019 21:42:53'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError stamp: 'Eden Torres 11/14/2019 21:42:53'!
PASSED!

----QUIT----(15 November 2019 09:44:07) CuisUniversity-3938.image priorSource: 14546625!

----STARTUP---- (17 November 2019 18:13:26) as /home/snahmod/Documentos/UBA/2019/Segundo Cuatrimestre/Ingsoft I/cuis-nuevo/CuisUniversity-3938.image!


!classRemoval: #TusLibrosInternalInterface stamp: 'SN 11/17/2019 18:14:09'!
Object subclass: #TusLibrosInternalInterface
	instanceVariableNames: 'userRegistry carts catalog lastCartID'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #StoreTestObjectsFactory stamp: 'SN 11/17/2019 18:14:09'!
Object subclass: #StoreTestObjectsFactory
	instanceVariableNames: 'today'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #Sale stamp: 'SN 11/17/2019 18:14:10'!
Object subclass: #Sale
	instanceVariableNames: 'total'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CreditCard stamp: 'SN 11/17/2019 18:14:10'!
Object subclass: #CreditCard
	instanceVariableNames: 'expiration'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #Cashier stamp: 'SN 11/17/2019 18:14:10'!
Object subclass: #Cashier
	instanceVariableNames: 'cart salesBook merchantProcessor creditCard total'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #Cart stamp: 'SN 11/17/2019 18:14:11'!
Object subclass: #Cart
	instanceVariableNames: 'catalog items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #TusLibrosInternalInterfaceTest stamp: 'SN 11/17/2019 18:14:11'!
TestCase subclass: #TusLibrosInternalInterfaceTest
	instanceVariableNames: 'edenUser edenPassword userRegistry factory'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CashierTest stamp: 'SN 11/17/2019 18:14:11'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'testObjectsFactory debitBehavior'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CartTest stamp: 'SN 11/17/2019 18:14:12'!
TestCase subclass: #CartTest
	instanceVariableNames: 'testObjectsFactory'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

----End fileIn of /home/snahmod/Documentos/UBA/2019/Segundo Cuatrimestre/Ingsoft I/cuis-nuevo/TusLibros.st----!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'SN 11/17/2019 18:15:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'SN 11/17/2019 18:15:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'SN 11/17/2019 18:15:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'SN 11/17/2019 18:15:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'SN 11/17/2019 18:15:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'SN 11/17/2019 18:15:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'SN 11/17/2019 18:15:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'SN 11/17/2019 18:15:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'SN 11/17/2019 18:15:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'SN 11/17/2019 18:15:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'SN 11/17/2019 18:15:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'SN 11/17/2019 18:15:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'SN 11/17/2019 18:15:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'SN 11/17/2019 18:15:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'SN 11/17/2019 18:15:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'SN 11/17/2019 18:15:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'SN 11/17/2019 18:15:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'SN 11/17/2019 18:15:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'SN 11/17/2019 18:15:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'SN 11/17/2019 18:15:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'SN 11/17/2019 18:15:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'SN 11/17/2019 18:15:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'SN 11/17/2019 18:15:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'SN 11/17/2019 18:15:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'SN 11/17/2019 18:15:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'SN 11/17/2019 18:15:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'SN 11/17/2019 18:15:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'SN 11/17/2019 18:15:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'SN 11/17/2019 18:15:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'SN 11/17/2019 18:15:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError stamp: 'SN 11/17/2019 18:15:07'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'SN 11/17/2019 18:28:36'!
test32CheckoutCartWithOneElementHasOneItemInTicket

	| interface cartID ticket |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	ticket := interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    		 withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    		 expirationDate on: factory today.


	self assert: interface carts isEmpty.
	self assert: ticket first includes: factory itemSellByTheStore .
	self assert: ticket second equals: factory itemSellByTheStorePrice .  ! !

!testRun: #TusLibrosInternalInterfaceTest #test32CheckoutCartWithOneElementHasOneItemInTicket stamp: 'SN 11/17/2019 18:28:42'!
ERROR!
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'SN 11/17/2019 18:29:08' prior: 50787760!
checkoutCart: aCartID withCreditCardNumber: aNumber withCreditCardName: aName withExpritationDate: anExpirationDate on: aDate
	
	| creditCard cart cashier |
	
	self validateCartWith: aCartID.
	cart := carts at: aCartID.
	
	creditCard := CreditCard expiringOn: anExpirationDate  withName: aName  withNumber: aNumber.
	cashier := Cashier toCheckout: cart charging: creditCard  throught: merchantProcessor
						 on: aDate registeringOn: (salesBooks at: cart userID ).
	cashier checkOut.
	carts removeKey: aCartID.! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'SN 11/17/2019 18:30:22' prior: 50788060!
checkoutCart: aCartID withCreditCardNumber: aNumber withCreditCardName: aName withExpritationDate: anExpirationDate on: aDate
	
	| creditCard cart cashier items total |
	
	self validateCartWith: aCartID.
	cart := carts at: aCartID.
	
	creditCard := CreditCard expiringOn: anExpirationDate  withName: aName  withNumber: aNumber.
	cashier := Cashier toCheckout: cart charging: creditCard  throught: merchantProcessor
						 on: aDate registeringOn: (salesBooks at: cart userID ).
	total := cashier checkOut.
	items := cart list .
	carts removeKey: aCartID.
	^ OrderedCollection with: items with: total.! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'SN 11/17/2019 18:30:35' prior: 50788080!
checkoutCart: aCartID withCreditCardNumber: aNumber withCreditCardName: aName withExpritationDate: anExpirationDate on: aDate
	
	| creditCard cart cashier items total |
	
	self validateCartWith: aCartID.
	cart := carts at: aCartID.
	
	creditCard := CreditCard expiringOn: anExpirationDate  withName: aName  withNumber: aNumber.
	cashier := Cashier toCheckout: cart charging: creditCard  throught: merchantProcessor
						 on: aDate registeringOn: (salesBooks at: cart userID ).
	total := cashier checkOut.
	items := cart list .
	
	carts removeKey: aCartID.
	
	^ OrderedCollection with: items with: total.! !

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'SN 11/17/2019 18:30:36'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'SN 11/17/2019 18:30:36'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'SN 11/17/2019 18:30:36'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'SN 11/17/2019 18:30:36'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'SN 11/17/2019 18:30:36'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'SN 11/17/2019 18:30:36'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'SN 11/17/2019 18:30:36'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'SN 11/17/2019 18:30:36'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'SN 11/17/2019 18:30:36'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'SN 11/17/2019 18:30:36'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'SN 11/17/2019 18:30:36'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'SN 11/17/2019 18:30:36'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'SN 11/17/2019 18:30:36'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'SN 11/17/2019 18:30:36'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'SN 11/17/2019 18:30:36'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'SN 11/17/2019 18:30:36'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'SN 11/17/2019 18:30:36'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'SN 11/17/2019 18:30:36'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'SN 11/17/2019 18:30:36'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'SN 11/17/2019 18:30:36'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'SN 11/17/2019 18:30:36'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'SN 11/17/2019 18:30:36'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'SN 11/17/2019 18:30:36'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'SN 11/17/2019 18:30:36'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'SN 11/17/2019 18:30:36'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'SN 11/17/2019 18:30:36'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'SN 11/17/2019 18:30:36'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'SN 11/17/2019 18:30:36'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'SN 11/17/2019 18:30:36'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'SN 11/17/2019 18:30:36'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError stamp: 'SN 11/17/2019 18:30:36'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test32CheckoutCartWithOneElementHasOneItemInTicket stamp: 'SN 11/17/2019 18:30:36'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'SN 11/17/2019 18:35:05'!
test33CheckoutCartWithManyElementHasItemsInTicket

	| interface cartID ticket totalPurchaseAmount |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 3.
	interface addToCart: cartID item: factory anotherItemSellByTheStore withQuantity: 2.
		
	ticket := interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    		 withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    		 expirationDate on: factory today.

	totalPurchaseAmount := (factory itemSellByTheStorePrice * 3) + (factory anotherItemSellByTheStorePrice * 2).

	self assert: interface carts isEmpty.
	self assert: ticket first size equals: 5.
	self assert: (ticket first occurrencesOf: factory itemSellByTheStore) equals: 3 .
	self assert: (ticket first occurrencesOf: factory anotherItemSellByTheStore ) equals: 2 .
	self assert: ticket second equals: totalPurchaseAmount.	! !

!testRun: #TusLibrosInternalInterfaceTest #test33CheckoutCartWithManyElementHasItemsInTicket stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test32CheckoutCartWithOneElementHasOneItemInTicket stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test33CheckoutCartWithManyElementHasItemsInTicket stamp: 'SN 11/17/2019 18:35:08'!
PASSED!

----SNAPSHOT----(17 November 2019 18:36:25) CuisUniversity-3938.image priorSource: 14543504!

----STARTUP---- (18 November 2019 18:37:27) as /Applications/cuis/CuisUniversity-3938.image!


!methodRemoval: TusLibrosInternalInterfaceTest #createTusLibrosInternalInterface stamp: 'Eden Torres 11/18/2019 18:38:13'!
createTusLibrosInternalInterface

	!
!TusLibrosInternalInterfaceTest methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/18/2019 18:38:54' prior: 50789663!
test26CheckoutCartWithOneElementListsOnlySameUserPurchases

	| interface cartID listPurchaseEden listPurchaseSanti |

	interface := self userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	cartID := interface createCartFor: santiUser withPassword: santiPassword .
	
	interface addToCart: cartID item: factory anotherItemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	listPurchaseEden := interface listPurchaseFor: edenUser withPassword: edenPassword.
	listPurchaseSanti := interface listPurchaseFor: santiUser withPassword: santiPassword .

	self assert: interface carts isEmpty.
	self assert: listPurchaseEden first size equals: 1.
	self assert: listPurchaseEden first includes: factory itemSellByTheStore .
	self assert: listPurchaseEden second equals: factory itemSellByTheStorePrice .  
	
	self assert: listPurchaseSanti first size equals: 1.
	self assert: listPurchaseSanti first includes: factory anotherItemSellByTheStore .
	self assert: listPurchaseSanti second equals: factory anotherItemSellByTheStorePrice . ! !
!TusLibrosInternalInterfaceTest methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/18/2019 18:38:54' prior: 50791443!
test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError

	| interface cartID |

	interface := self userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 38.
	
 	debitBehavior := [ :anAmount :aCreditCard | self error: Cashier creditCardHasNoCreditErrorMessage].
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: Cashier creditCardHasNoCreditErrorMessage.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty. 
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: 0. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/18/2019 18:38:54' prior: 50784527!
test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes

	| interface cartID |

	interface := self userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 30 minutes totalMilliseconds.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	stubbedTime := stubbedTime + 30 minutes totalMilliseconds.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self assert: interface carts size equals: 1.! !
!TusLibrosInternalInterfaceTest methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/18/2019 18:38:54' prior: 50784260!
test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs

	| interface cartID1 cartID2 |

	interface := self userRegistry: userRegistry .
	
	cartID1 := interface createCartFor: edenUser withPassword: edenPassword.
	cartID2 := interface createCartFor: edenUser withPassword: edenPassword.
		
	self assert: interface carts size equals: 2.
	self assert: (interface includesCartID: cartID1).
	self assert: (interface includesCartID: cartID2).
	self deny: cartID1 = cartID2 .! !
!TusLibrosInternalInterfaceTest methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/18/2019 18:38:54' prior: 50784490!
test15ShouldRaiseErrorWhenListingAnExpiredCart

	| interface cartID |

	interface := self userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 31 minutes totalMilliseconds.
	
	self should: [interface listCart: cartID.]
		raise: Error - MessageNotUnderstood
		withMessageText: 'Carrito expirado'. 
	
	self assert: interface carts isEmpty.! !
!TusLibrosInternalInterfaceTest methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/18/2019 18:38:54' prior: 50784325!
test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore

	| interface cartID |

	interface := self userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self should: [interface addToCart: cartID item: factory itemNotSellByTheStore withQuantity: 1]
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'Item is not in catalog'.! !
!TusLibrosInternalInterfaceTest methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/18/2019 18:38:55' prior: 50791112!
test30CheckoutCartShouldRaiseErrorWithExpiredCart

	| interface cartID |

	interface := self userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 38.
	
	stubbedTime := stubbedTime + 31 minutes totalMilliseconds.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Carrito expirado'.

	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty. 
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: 0. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/18/2019 18:38:55' prior: 50784401!
test11AddABookTwiceToCartListsTwoItem

	| interface cartID |

	interface := self userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 2.
	
	self assert: ((interface listCart: cartID ) includes: factory itemSellByTheStore ).
	self assert: ((interface listCart: cartID ) occurrencesOf: factory itemSellByTheStore ) equals: 2.! !
!TusLibrosInternalInterfaceTest methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/18/2019 18:38:55' prior: 50784309!
test07AddToCartRaisesErrorWhenCartIDDoesNotExist

	| interface |

	interface := self userRegistry: userRegistry.
		
	self should: [interface addToCart: 'INVALID CART ID' item: factory itemSellByTheStore withQuantity: 1]
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'CartID inválido'.! !
!TusLibrosInternalInterfaceTest methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/18/2019 18:38:55' prior: 50784509!
test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart

	| interface cartID |

	interface := self userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 30 minutes totalMilliseconds.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self assert: interface carts size equals: 1.! !
!TusLibrosInternalInterfaceTest methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/18/2019 18:38:55' prior: 50784295!
test06ListCartListsNothingWhenCartIsJustCreated

	| interface cartID |

	interface := self userRegistry: userRegistry.
	
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self assert: (interface listCart: cartID ) isEmpty .! !
!TusLibrosInternalInterfaceTest methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/18/2019 18:38:55' prior: 50784343!
test09AddToCartRaisesErrorWhenQuantityIsZero

	| interface cartID |

	interface := self userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self should: [interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 0]
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'Invalid number of items'.! !
!TusLibrosInternalInterfaceTest methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/18/2019 18:38:55' prior: 50788543!
test24CheckoutCartWithTwoElementListsTwoPurchase

	| interface cartID listPurchase totalPurchaseAmount |

	interface := self userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	interface addToCart: cartID item: factory anotherItemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	totalPurchaseAmount := factory itemSellByTheStorePrice + factory anotherItemSellByTheStorePrice.
	listPurchase := interface listPurchaseFor: edenUser withPassword: edenPassword.

	self assert: interface carts isEmpty.
	self assert: listPurchase first size equals: 2 .
	self assert: listPurchase first includes: factory itemSellByTheStore .
	self assert: listPurchase first includes: factory anotherItemSellByTheStore.
	self assert: listPurchase second equals:  totalPurchaseAmount.  
	! !
!TusLibrosInternalInterfaceTest methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/18/2019 18:38:55' prior: 50784451!
test13ListCartDoesNotListItemNotIncludedInCart

	| interface cartID |

	interface := self userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self deny: ((interface listCart: cartID ) includes: factory anotherItemSellByTheStore).! !
!TusLibrosInternalInterfaceTest methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/18/2019 18:38:55' prior: 50788311!
test23CheckoutCartWithOneElementListsOnePurchase

	| interface cartID |

	interface := self userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.


	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first includes: factory itemSellByTheStore .
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: factory itemSellByTheStorePrice .  ! !
!TusLibrosInternalInterfaceTest methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/18/2019 18:38:55' prior: 50788250!
test22CheckoutCartShouldRaiseErrorWithEmptyCart

	| interface cartID |

	interface := self userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Can not check out an empty cart'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty. 
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: 0. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/18/2019 18:38:55' prior: 50789971!
test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist

	| interface |

	interface := self userRegistry: emptyUserRegistry .
			
	self should: [interface listPurchaseFor: edenUser withPassword: edenPassword]
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'Usuario no registrado'.! !
!TusLibrosInternalInterfaceTest methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/18/2019 18:38:55' prior: 50788151!
test19CheckoutCartShouldRaiseErrorWithEmptyCardName

	| interface cartID |

	interface := self userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory emptyNameCreditCard number withCreditCardName:
	factory emptyNameCreditCard name withExpritationDate: factory emptyNameCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Nombre de la tarjeta inválido'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: 0.  ! !
!TusLibrosInternalInterfaceTest methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/18/2019 18:38:55' prior: 50784281!
test05ListCartRaisesErrorWhenCartIDDoesNotExist

	| interface |

	interface := self userRegistry: userRegistry.
		
	self should: [interface listCart: 'INVALID CART ID']
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'CartID inválido'.! !
!TusLibrosInternalInterfaceTest methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/18/2019 18:38:55' prior: 50788217!
test21CheckoutCartShouldRaiseErrorWithExpiredCard

	| interface cartID |

	interface := self userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory expiredCreditCard number withCreditCardName:
	factory expiredCreditCard name withExpritationDate: factory expiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Can not charge an expired credit card'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty. 
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: 0. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/18/2019 18:38:55' prior: 50789939!
test01CreateCartRaisesErrorWhenNonExistentUser

	| interface |

	interface := self userRegistry: emptyUserRegistry. 
	
	self should: [interface createCartFor: edenUser withPassword: edenPassword]
		 raise: Error - MessageNotUnderstood
		 withMessageText: 'Usuario no registrado'.
		
	self assert: interface carts isEmpty.
		 ! !
!TusLibrosInternalInterfaceTest methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/18/2019 18:38:55' prior: 50784245!
test03CreateCartCreatesACartWithValidUser

	| interface cartID |

	interface := self userRegistry: userRegistry .
	
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self assert: interface carts size equals: 1.
	self assert: (interface includesCartID: cartID).! !
!TusLibrosInternalInterfaceTest methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/18/2019 18:38:55' prior: 50790504!
test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout

	| interface cartID |

	interface := self userRegistry: userRegistry .
	cartID := interface createCartFor: edenUser withPassword: edenPassword .
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 38.
			
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword ) first isEmpty .
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword ) second equals: 0 .! !
!TusLibrosInternalInterfaceTest methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/18/2019 18:38:55' prior: 50784469!
test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart

	| interface cartID |

	interface := self userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 31 minutes totalMilliseconds.
	
	self should: [interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.]
		raise: Error - MessageNotUnderstood
		withMessageText: 'Carrito expirado'. 
	
	self assert: interface carts isEmpty.! !
!TusLibrosInternalInterfaceTest methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/18/2019 18:38:55' prior: 50784421!
test12AddTwoDifferentBookToCartListsTwoDifferentItems

	| interface cartID |

	interface := self userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	interface addToCart: cartID item: factory anotherItemSellByTheStore withQuantity: 1.
	
	self assert: ((interface listCart: cartID ) includes: factory itemSellByTheStore ).
	self assert: ((interface listCart: cartID ) occurrencesOf: factory itemSellByTheStore ) equals: 1.
	
	self assert: ((interface listCart: cartID ) includes: factory anotherItemSellByTheStore ).
	self assert: ((interface listCart: cartID ) occurrencesOf: factory anotherItemSellByTheStore ) equals: 1.! !
!TusLibrosInternalInterfaceTest methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/18/2019 18:38:55' prior: 50784361!
test10AddToCartListsOneItem

	| interface cartID |

	interface := self userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self assert: ((interface listCart: cartID ) includes: factory itemSellByTheStore ).
	self assert: ((interface listCart: cartID ) occurrencesOf: factory itemSellByTheStore ) equals: 1.! !
!TusLibrosInternalInterfaceTest methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/18/2019 18:38:55' prior: 50788124!
test18CheckoutCartShouldRaiseErrorWithInvalidCartId

	| interface |

	interface := self userRegistry: userRegistry.
		
	self should: [interface checkoutCart: 'invalid id' withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'CartID inválido'.

	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty. 
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: 0. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/18/2019 18:38:55' prior: 50784229!
test02CreateCartRaisesErrorWhenPasswordDoesNotMatch

	| interface |

	interface := self userRegistry: userRegistry.
	
	self should: [interface createCartFor: edenUser withPassword: 'wrong password']
		 raise: Error - MessageNotUnderstood
		 withMessageText: 'Contraseña incorrecta'.
		
	self assert: interface carts isEmpty.
		 ! !
!TusLibrosInternalInterfaceTest methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/18/2019 18:38:55' prior: 50788184!
test20CheckoutCartShouldRaiseErrorWithTooLongCardName

	| interface cartID |

	interface := self userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory tooLongNameCreditCard number withCreditCardName:
	factory tooLongNameCreditCard name withExpritationDate: factory tooLongNameCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Nombre de la tarjeta inválido'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: 0.  ! !
!TusLibrosInternalInterfaceTest methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/18/2019 18:38:55' prior: 50789454!
test25CheckoutCartWithTwoEqualElementsListsTwoPurchase

	| interface cartID listPurchase totalPurchaseAmount |

	interface := self userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 2.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory anotherItemSellByTheStore withQuantity: 2.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	totalPurchaseAmount := (factory itemSellByTheStorePrice * 2) + (factory anotherItemSellByTheStorePrice  * 2).
	listPurchase := interface listPurchaseFor: edenUser withPassword: edenPassword.

	self assert: interface carts isEmpty.
	self assert: listPurchase first size equals: 4 .
	self assert: (listPurchase  first  occurrencesOf: factory itemSellByTheStore) equals: 2.
	self assert: (listPurchase  first  occurrencesOf: factory anotherItemSellByTheStore ) equals: 2.
	self assert: listPurchase second equals:  totalPurchaseAmount.  
	! !
!TusLibrosInternalInterfaceTest methodsFor: 'as yet unclassified' stamp: 'Eden Torres 11/18/2019 18:38:55' prior: 50790279!
test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch

	| interface |

	interface := self userRegistry: userRegistry .
			
	self should: [interface listPurchaseFor: edenUser withPassword: santiPassword ]
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'Contraseña incorrecta'.! !
!TusLibrosInternalInterfaceTest methodsFor: 'initialization' stamp: 'Eden Torres 11/18/2019 18:39:40'!
createTusLibrosInternalInterfaceWithUserRegistry: aUserRegistry

	^TusLibrosInternalInterface withUsers: aUserRegistry withCatalog: factory defaultCatalog 
										withClock: self withAMerchantProcessor: self.! !

!methodRemoval: TusLibrosInternalInterfaceTest #createTusLibrosInternalInterfaceWithSalesBook:userRegistry: stamp: 'Eden Torres 11/18/2019 18:40:06'!
createTusLibrosInternalInterfaceWithSalesBook: aSalesBook userRegistry: aUserRegistry

	^TusLibrosInternalInterface withUsers: aUserRegistry withCatalog: factory defaultCatalog 
										withClock: self withAMerchantProcessor: self.!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:40:15' prior: 50792114!
test01CreateCartRaisesErrorWhenNonExistentUser

	| interface |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: emptyUserRegistry. 
	
	self should: [interface createCartFor: edenUser withPassword: edenPassword]
		 raise: Error - MessageNotUnderstood
		 withMessageText: 'Usuario no registrado'.
		
	self assert: interface carts isEmpty.
		 ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:40:19' prior: 50792252!
test02CreateCartRaisesErrorWhenPasswordDoesNotMatch

	| interface |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	
	self should: [interface createCartFor: edenUser withPassword: 'wrong password']
		 raise: Error - MessageNotUnderstood
		 withMessageText: 'Contraseña incorrecta'.
		
	self assert: interface carts isEmpty.
		 ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:40:23' prior: 50792129!
test03CreateCartCreatesACartWithValidUser

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry .
	
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self assert: interface carts size equals: 1.
	self assert: (interface includesCartID: cartID).! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:40:29' prior: 50791748!
test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs

	| interface cartID1 cartID2 |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry .
	
	cartID1 := interface createCartFor: edenUser withPassword: edenPassword.
	cartID2 := interface createCartFor: edenUser withPassword: edenPassword.
		
	self assert: interface carts size equals: 2.
	self assert: (interface includesCartID: cartID1).
	self assert: (interface includesCartID: cartID2).
	self deny: cartID1 = cartID2 .! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:40:33' prior: 50792071!
test05ListCartRaisesErrorWhenCartIDDoesNotExist

	| interface |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
		
	self should: [interface listCart: 'INVALID CART ID']
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'CartID inválido'.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:40:37' prior: 50791883!
test06ListCartListsNothingWhenCartIsJustCreated

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self assert: (interface listCart: cartID ) isEmpty .! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:40:42' prior: 50791852!
test07AddToCartRaisesErrorWhenCartIDDoesNotExist

	| interface |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
		
	self should: [interface addToCart: 'INVALID CART ID' item: factory itemSellByTheStore withQuantity: 1]
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'CartID inválido'.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:40:46' prior: 50791785!
test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self should: [interface addToCart: cartID item: factory itemNotSellByTheStore withQuantity: 1]
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'Item is not in catalog'.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:40:50' prior: 50791895!
test09AddToCartRaisesErrorWhenQuantityIsZero

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self should: [interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 0]
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'Invalid number of items'.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:40:55' prior: 50792208!
test10AddToCartListsOneItem

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self assert: ((interface listCart: cartID ) includes: factory itemSellByTheStore ).
	self assert: ((interface listCart: cartID ) occurrencesOf: factory itemSellByTheStore ) equals: 1.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:40:59' prior: 50791833!
test11AddABookTwiceToCartListsTwoItem

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 2.
	
	self assert: ((interface listCart: cartID ) includes: factory itemSellByTheStore ).
	self assert: ((interface listCart: cartID ) occurrencesOf: factory itemSellByTheStore ) equals: 2.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:41:04' prior: 50792180!
test12AddTwoDifferentBookToCartListsTwoDifferentItems

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	interface addToCart: cartID item: factory anotherItemSellByTheStore withQuantity: 1.
	
	self assert: ((interface listCart: cartID ) includes: factory itemSellByTheStore ).
	self assert: ((interface listCart: cartID ) occurrencesOf: factory itemSellByTheStore ) equals: 1.
	
	self assert: ((interface listCart: cartID ) includes: factory anotherItemSellByTheStore ).
	self assert: ((interface listCart: cartID ) occurrencesOf: factory anotherItemSellByTheStore ) equals: 1.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:41:08' prior: 50791951!
test13ListCartDoesNotListItemNotIncludedInCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self deny: ((interface listCart: cartID ) includes: factory anotherItemSellByTheStore).! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:41:19' prior: 50792161!
test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 31 minutes totalMilliseconds.
	
	self should: [interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.]
		raise: Error - MessageNotUnderstood
		withMessageText: 'Carrito expirado'. 
	
	self assert: interface carts isEmpty.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:41:25' prior: 50791767!
test15ShouldRaiseErrorWhenListingAnExpiredCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 31 minutes totalMilliseconds.
	
	self should: [interface listCart: cartID.]
		raise: Error - MessageNotUnderstood
		withMessageText: 'Carrito expirado'. 
	
	self assert: interface carts isEmpty.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:41:29' prior: 50791866!
test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 30 minutes totalMilliseconds.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self assert: interface carts size equals: 1.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:41:32' prior: 50791727!
test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	stubbedTime := stubbedTime + 30 minutes totalMilliseconds.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	stubbedTime := stubbedTime + 30 minutes totalMilliseconds.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self assert: interface carts size equals: 1.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:41:37' prior: 50792226!
test18CheckoutCartShouldRaiseErrorWithInvalidCartId

	| interface |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
		
	self should: [interface checkoutCart: 'invalid id' withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'CartID inválido'.

	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty. 
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: 0. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:41:41' prior: 50792040!
test19CheckoutCartShouldRaiseErrorWithEmptyCardName

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory emptyNameCreditCard number withCreditCardName:
	factory emptyNameCreditCard name withExpritationDate: factory emptyNameCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Nombre de la tarjeta inválido'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: 0.  ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:41:46' prior: 50792267!
test20CheckoutCartShouldRaiseErrorWithTooLongCardName

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory tooLongNameCreditCard number withCreditCardName:
	factory tooLongNameCreditCard name withExpritationDate: factory tooLongNameCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Nombre de la tarjeta inválido'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: 0.  ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:41:52' prior: 50792083!
test21CheckoutCartShouldRaiseErrorWithExpiredCard

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory expiredCreditCard number withCreditCardName:
	factory expiredCreditCard name withExpritationDate: factory expiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Can not charge an expired credit card'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty. 
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: 0. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:41:57' prior: 50791997!
test22CheckoutCartShouldRaiseErrorWithEmptyCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Can not check out an empty cart'.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty. 
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: 0. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:42:01' prior: 50791967!
test23CheckoutCartWithOneElementListsOnePurchase

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.


	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first includes: factory itemSellByTheStore .
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: factory itemSellByTheStorePrice .  ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:42:07' prior: 50791911!
test24CheckoutCartWithTwoElementListsTwoPurchase

	| interface cartID listPurchase totalPurchaseAmount |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	interface addToCart: cartID item: factory anotherItemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	totalPurchaseAmount := factory itemSellByTheStorePrice + factory anotherItemSellByTheStorePrice.
	listPurchase := interface listPurchaseFor: edenUser withPassword: edenPassword.

	self assert: interface carts isEmpty.
	self assert: listPurchase first size equals: 2 .
	self assert: listPurchase first includes: factory itemSellByTheStore .
	self assert: listPurchase first includes: factory anotherItemSellByTheStore.
	self assert: listPurchase second equals:  totalPurchaseAmount.  
	! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:42:11' prior: 50792298!
test25CheckoutCartWithTwoEqualElementsListsTwoPurchase

	| interface cartID listPurchase totalPurchaseAmount |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 2.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory anotherItemSellByTheStore withQuantity: 2.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	totalPurchaseAmount := (factory itemSellByTheStorePrice * 2) + (factory anotherItemSellByTheStorePrice  * 2).
	listPurchase := interface listPurchaseFor: edenUser withPassword: edenPassword.

	self assert: interface carts isEmpty.
	self assert: listPurchase first size equals: 4 .
	self assert: (listPurchase  first  occurrencesOf: factory itemSellByTheStore) equals: 2.
	self assert: (listPurchase  first  occurrencesOf: factory anotherItemSellByTheStore ) equals: 2.
	self assert: listPurchase second equals:  totalPurchaseAmount.  
	! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:42:14' prior: 50791636!
test26CheckoutCartWithOneElementListsOnlySameUserPurchases

	| interface cartID listPurchaseEden listPurchaseSanti |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	cartID := interface createCartFor: santiUser withPassword: santiPassword .
	
	interface addToCart: cartID item: factory anotherItemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	listPurchaseEden := interface listPurchaseFor: edenUser withPassword: edenPassword.
	listPurchaseSanti := interface listPurchaseFor: santiUser withPassword: santiPassword .

	self assert: interface carts isEmpty.
	self assert: listPurchaseEden first size equals: 1.
	self assert: listPurchaseEden first includes: factory itemSellByTheStore .
	self assert: listPurchaseEden second equals: factory itemSellByTheStorePrice .  
	
	self assert: listPurchaseSanti first size equals: 1.
	self assert: listPurchaseSanti first includes: factory anotherItemSellByTheStore .
	self assert: listPurchaseSanti second equals: factory anotherItemSellByTheStorePrice . ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:42:18' prior: 50792026!
test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist

	| interface |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: emptyUserRegistry .
			
	self should: [interface listPurchaseFor: edenUser withPassword: edenPassword]
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'Usuario no registrado'.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:42:22' prior: 50792350!
test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch

	| interface |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry .
			
	self should: [interface listPurchaseFor: edenUser withPassword: santiPassword ]
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'Contraseña incorrecta'.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:42:30' prior: 50792142!
test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry .
	cartID := interface createCartFor: edenUser withPassword: edenPassword .
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 38.
			
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword ) first isEmpty .
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword ) second equals: 0 .! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:42:35' prior: 50791801!
test30CheckoutCartShouldRaiseErrorWithExpiredCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 38.
	
	stubbedTime := stubbedTime + 31 minutes totalMilliseconds.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Carrito expirado'.

	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty. 
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: 0. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:42:39' prior: 50791692!
test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 38.
	
 	debitBehavior := [ :anAmount :aCreditCard | self error: Cashier creditCardHasNoCreditErrorMessage].
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: Cashier creditCardHasNoCreditErrorMessage.

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty. 
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: 0. ! !

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/18/2019 18:42:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/18/2019 18:42:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/18/2019 18:42:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/18/2019 18:42:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/18/2019 18:42:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/18/2019 18:42:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/18/2019 18:42:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/18/2019 18:42:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/18/2019 18:42:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/18/2019 18:42:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/18/2019 18:42:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/18/2019 18:42:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/18/2019 18:42:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/18/2019 18:42:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/18/2019 18:42:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/18/2019 18:42:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/18/2019 18:42:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/18/2019 18:42:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/18/2019 18:42:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/18/2019 18:42:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/18/2019 18:42:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/18/2019 18:42:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/18/2019 18:42:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'Eden Torres 11/18/2019 18:42:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'Eden Torres 11/18/2019 18:42:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'Eden Torres 11/18/2019 18:42:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'Eden Torres 11/18/2019 18:42:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'Eden Torres 11/18/2019 18:42:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'Eden Torres 11/18/2019 18:42:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'Eden Torres 11/18/2019 18:42:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError stamp: 'Eden Torres 11/18/2019 18:42:47'!
PASSED!

!classDefinition: #TusLibrosInternalInterfaceTest category: #TusLibros stamp: 'Eden Torres 11/18/2019 18:46:08'!
TestCase subclass: #TusLibrosInternalInterfaceTest
	instanceVariableNames: 'edenUser edenPassword userRegistry factory stubbedTime debitBehavior santiUser santiPassword emptyUserRegistry expiredCartTime'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #TusLibrosInternalInterfaceTest category: #TusLibros stamp: 'Eden Torres 11/18/2019 18:46:09'!
TestCase subclass: #TusLibrosInternalInterfaceTest
	instanceVariableNames: 'edenUser edenPassword userRegistry factory stubbedTime debitBehavior santiUser santiPassword emptyUserRegistry expiredCartTime unexpiredCartTime'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!TusLibrosInternalInterfaceTest methodsFor: 'setUp/tearDown' stamp: 'Eden Torres 11/18/2019 18:46:01' prior: 50789956!
setUp

	edenUser := 'eden'.
	edenPassword := '12345678'.
	santiUser := 'santinah'.
	santiPassword := 'the.best'.
	userRegistry := Dictionary new add: edenUser->edenPassword; add: santiUser -> santiPassword ; yourself.
	emptyUserRegistry := Dictionary new.
	factory := StoreTestObjectsFactory new.
	stubbedTime := 1.
	expiredCartTime := 31.
	unexpiredCartTime := 30.
	debitBehavior := [ :anAmount :aCreditCard | ]! !

30!
!TusLibrosInternalInterfaceTest methodsFor: 'setUp/tearDown' stamp: 'Eden Torres 11/18/2019 18:47:00' prior: 50793297!
setUp

	edenUser := 'eden'.
	edenPassword := '12345678'.
	santiUser := 'santinah'.
	santiPassword := 'the.best'.
	userRegistry := Dictionary new add: edenUser->edenPassword; add: santiUser -> santiPassword ; yourself.
	emptyUserRegistry := Dictionary new.
	factory := StoreTestObjectsFactory new.
	stubbedTime := 1.
	expiredCartTime := stubbedTime + 31 minutes totalMilliseconds.
	unexpiredCartTime := stubbedTime + 30 minutes totalMilliseconds.
	debitBehavior := [ :anAmount :aCreditCard | ]! !
!TusLibrosInternalInterfaceTest methodsFor: 'setUp/tearDown' stamp: 'Eden Torres 11/18/2019 18:47:21' prior: 50793314!
setUp

	edenUser := 'eden'.
	edenPassword := '12345678'.
	santiUser := 'santinah'.
	santiPassword := 'the.best'.
	userRegistry := Dictionary new add: edenUser->edenPassword; add: santiUser -> santiPassword ; yourself.
	emptyUserRegistry := Dictionary new.
	factory := StoreTestObjectsFactory new.
	stubbedTime := 1.
	debitBehavior := [ :anAmount :aCreditCard | ]! !

TestCase subclass: #TusLibrosInternalInterfaceTest
	instanceVariableNames: 'edenUser edenPassword userRegistry factory stubbedTime debitBehavior santiUser santiPassword emptyUserRegistry'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #TusLibrosInternalInterfaceTest category: #TusLibros stamp: 'Eden Torres 11/18/2019 18:47:33'!
TestCase subclass: #TusLibrosInternalInterfaceTest
	instanceVariableNames: 'edenUser edenPassword userRegistry factory stubbedTime debitBehavior santiUser santiPassword emptyUserRegistry'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!TusLibrosInternalInterfaceTest methodsFor: 'clock protocol - private' stamp: 'Eden Torres 11/18/2019 18:49:19'!
addExpiredTime
	stubbedTime := stubbedTime + 31 minutes totalMilliseconds.! !
!TusLibrosInternalInterfaceTest methodsFor: 'clock protocol - private' stamp: 'Eden Torres 11/18/2019 18:49:28'!
addUnexpiredTime
	stubbedTime := stubbedTime + 30 minutes totalMilliseconds.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:49:55' prior: 50792608!
test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	self addExpiredTime.
	
	self should: [interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.]
		raise: Error - MessageNotUnderstood
		withMessageText: 'Carrito expirado'. 
	
	self assert: interface carts isEmpty.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:50:10' prior: 50792628!
test15ShouldRaiseErrorWhenListingAnExpiredCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	self addExpiredTime.
	
	self should: [interface listCart: cartID.]
		raise: Error - MessageNotUnderstood
		withMessageText: 'Carrito expirado'. 
	
	self assert: interface carts isEmpty.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:50:25' prior: 50792646!
test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	self addUnexpiredTime .
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self assert: interface carts size equals: 1.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:51:19' prior: 50792663!
test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	self addUnexpiredTime .
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self addUnexpiredTime .
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self assert: interface carts size equals: 1.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:51:38' prior: 50793063!
test30CheckoutCartShouldRaiseErrorWithExpiredCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 38.
	
	self addExpiredTime.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Carrito expirado'.

	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty. 
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: 0. ! !

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/18/2019 18:51:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/18/2019 18:51:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/18/2019 18:51:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/18/2019 18:51:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/18/2019 18:51:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/18/2019 18:51:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/18/2019 18:51:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/18/2019 18:51:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/18/2019 18:51:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/18/2019 18:51:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/18/2019 18:51:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/18/2019 18:51:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/18/2019 18:51:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/18/2019 18:51:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/18/2019 18:51:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/18/2019 18:51:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/18/2019 18:51:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/18/2019 18:51:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/18/2019 18:51:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/18/2019 18:51:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/18/2019 18:51:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/18/2019 18:51:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/18/2019 18:51:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'Eden Torres 11/18/2019 18:51:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'Eden Torres 11/18/2019 18:51:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'Eden Torres 11/18/2019 18:51:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'Eden Torres 11/18/2019 18:51:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'Eden Torres 11/18/2019 18:51:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'Eden Torres 11/18/2019 18:51:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'Eden Torres 11/18/2019 18:51:45'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError stamp: 'Eden Torres 11/18/2019 18:51:45'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'assertions' stamp: 'Eden Torres 11/18/2019 18:54:45'!
assertCartWasntCheckoutWithUsername: aUserID withPassword: aPassword! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:54:59' prior: 50793096!
test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 38.
	
 	debitBehavior := [ :anAmount :aCreditCard | self error: Cashier creditCardHasNoCreditErrorMessage].
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: Cashier creditCardHasNoCreditErrorMessage.! !
!TusLibrosInternalInterfaceTest methodsFor: 'assertions' stamp: 'Eden Torres 11/18/2019 18:55:55'!
assertOnlyCartIn: interface wasNotCheckoutWithUsername: aUserID withPassword: aPassword

	self assert: interface carts size equals: 1.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty. 
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: 0. ! !

!methodRemoval: TusLibrosInternalInterfaceTest #assertCartWasntCheckoutWithUsername:withPassword: stamp: 'Eden Torres 11/18/2019 18:56:03'!
assertCartWasntCheckoutWithUsername: aUserID withPassword: aPassword!
!TusLibrosInternalInterfaceTest methodsFor: 'assertions' stamp: 'Eden Torres 11/18/2019 18:56:56' prior: 50793659!
assertOnlyCartIn: interface wasNotCheckoutWithUsername: aUserID withPassword: aPassword

	| listPurchase |
	listPurchase := interface listPurchaseFor: aUserID withPassword: aPassword 
	self assert: interface carts size equals: 1.
	self assert: listPurchase first isEmpty. 
	self assert: listPurchase second equals: 0. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'assertions' stamp: 'Eden Torres 11/18/2019 18:57:10' prior: 50793680!
assertOnlyCartIn: interface wasNotCheckoutWithUsername: aUserID withPassword: aPassword

	| listPurchase |
	listPurchase := interface listPurchaseFor: aUserID withPassword: aPassword. 
	self assert: interface carts size equals: 1.
	self assert: listPurchase first isEmpty. 
	self assert: listPurchase second equals: 0. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'assertions' stamp: 'Eden Torres 11/18/2019 18:57:12' prior: 50793694!
assertOnlyCartIn: interface wasNotCheckoutWithUsername: aUserID withPassword: aPassword

	| listPurchase |
	
	listPurchase := interface listPurchaseFor: aUserID withPassword: aPassword. 
	self assert: interface carts size equals: 1.
	self assert: listPurchase first isEmpty. 
	self assert: listPurchase second equals: 0. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:57:38' prior: 50793631!
test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 38.
	
 	debitBehavior := [ :anAmount :aCreditCard | self error: Cashier creditCardHasNoCreditErrorMessage].
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: Cashier creditCardHasNoCreditErrorMessage.
		
	self assertOnlyCartIn: interface wasNotCheckoutWithUsername: edenUser withPassword: edenPassword.! !

!testRun: #TusLibrosInternalInterfaceTest #test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError stamp: 'Eden Torres 11/18/2019 18:57:40'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/18/2019 18:57:40'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/18/2019 18:57:40'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/18/2019 18:57:40'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/18/2019 18:57:40'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/18/2019 18:57:40'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/18/2019 18:57:40'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/18/2019 18:57:40'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/18/2019 18:57:40'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/18/2019 18:57:40'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/18/2019 18:57:40'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/18/2019 18:57:40'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/18/2019 18:57:40'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/18/2019 18:57:40'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/18/2019 18:57:40'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/18/2019 18:57:40'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/18/2019 18:57:40'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/18/2019 18:57:40'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/18/2019 18:57:40'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/18/2019 18:57:40'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/18/2019 18:57:40'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/18/2019 18:57:40'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/18/2019 18:57:40'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/18/2019 18:57:40'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'Eden Torres 11/18/2019 18:57:40'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'Eden Torres 11/18/2019 18:57:40'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'Eden Torres 11/18/2019 18:57:40'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'Eden Torres 11/18/2019 18:57:40'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'Eden Torres 11/18/2019 18:57:40'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'Eden Torres 11/18/2019 18:57:40'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'Eden Torres 11/18/2019 18:57:40'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError stamp: 'Eden Torres 11/18/2019 18:57:40'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:57:52' prior: 50793453!
test30CheckoutCartShouldRaiseErrorWithExpiredCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 38.
	
	self addExpiredTime.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Carrito expirado'.

	self assertOnlyCartIn: interface wasNotCheckoutWithUsername: edenUser withPassword: edenPassword.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:58:15' prior: 50793043!
test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry .
	cartID := interface createCartFor: edenUser withPassword: edenPassword .
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 38.
			
	self assertOnlyCartIn: interface wasNotCheckoutWithUsername: edenUser withPassword: edenPassword.! !

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'Eden Torres 11/18/2019 18:58:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/18/2019 18:58:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/18/2019 18:58:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/18/2019 18:58:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/18/2019 18:58:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/18/2019 18:58:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/18/2019 18:58:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/18/2019 18:58:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/18/2019 18:58:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/18/2019 18:58:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/18/2019 18:58:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/18/2019 18:58:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/18/2019 18:58:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/18/2019 18:58:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/18/2019 18:58:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/18/2019 18:58:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/18/2019 18:58:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/18/2019 18:58:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/18/2019 18:58:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/18/2019 18:58:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/18/2019 18:58:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/18/2019 18:58:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/18/2019 18:58:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/18/2019 18:58:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'Eden Torres 11/18/2019 18:58:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'Eden Torres 11/18/2019 18:58:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'Eden Torres 11/18/2019 18:58:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'Eden Torres 11/18/2019 18:58:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'Eden Torres 11/18/2019 18:58:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'Eden Torres 11/18/2019 18:58:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'Eden Torres 11/18/2019 18:58:16'!
FAILURE!

!testRun: #TusLibrosInternalInterfaceTest #test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError stamp: 'Eden Torres 11/18/2019 18:58:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'Eden Torres 11/18/2019 18:58:16'!
FAILURE!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:58:35' prior: 50793926!
test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry .
	cartID := interface createCartFor: edenUser withPassword: edenPassword .
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 38.
			
	self assertOnlyCartIn: interface wasNotCheckoutWithUsername: edenUser withPassword: edenPassword.! !

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'Eden Torres 11/18/2019 18:58:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/18/2019 18:58:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/18/2019 18:58:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/18/2019 18:58:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/18/2019 18:58:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/18/2019 18:58:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/18/2019 18:58:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/18/2019 18:58:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/18/2019 18:58:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/18/2019 18:58:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/18/2019 18:58:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/18/2019 18:58:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/18/2019 18:58:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/18/2019 18:58:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/18/2019 18:58:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/18/2019 18:58:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/18/2019 18:58:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/18/2019 18:58:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/18/2019 18:58:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/18/2019 18:58:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/18/2019 18:58:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/18/2019 18:58:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/18/2019 18:58:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/18/2019 18:58:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'Eden Torres 11/18/2019 18:58:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'Eden Torres 11/18/2019 18:58:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'Eden Torres 11/18/2019 18:58:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'Eden Torres 11/18/2019 18:58:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'Eden Torres 11/18/2019 18:58:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'Eden Torres 11/18/2019 18:58:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'Eden Torres 11/18/2019 18:58:35'!
FAILURE!

!testRun: #TusLibrosInternalInterfaceTest #test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError stamp: 'Eden Torres 11/18/2019 18:58:35'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'Eden Torres 11/18/2019 18:58:35'!
FAILURE!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/18/2019 18:59:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/18/2019 18:59:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/18/2019 18:59:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/18/2019 18:59:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/18/2019 18:59:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/18/2019 18:59:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/18/2019 18:59:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/18/2019 18:59:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/18/2019 18:59:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/18/2019 18:59:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/18/2019 18:59:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/18/2019 18:59:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/18/2019 18:59:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/18/2019 18:59:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/18/2019 18:59:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/18/2019 18:59:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/18/2019 18:59:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/18/2019 18:59:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/18/2019 18:59:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/18/2019 18:59:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/18/2019 18:59:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/18/2019 18:59:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/18/2019 18:59:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'Eden Torres 11/18/2019 18:59:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'Eden Torres 11/18/2019 18:59:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'Eden Torres 11/18/2019 18:59:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'Eden Torres 11/18/2019 18:59:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'Eden Torres 11/18/2019 18:59:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'Eden Torres 11/18/2019 18:59:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'Eden Torres 11/18/2019 18:59:16'!
FAILURE!

!testRun: #TusLibrosInternalInterfaceTest #test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError stamp: 'Eden Torres 11/18/2019 18:59:16'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'Eden Torres 11/18/2019 18:59:16'!
FAILURE!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:58:15' prior: 50794092!
test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry .
	cartID := interface createCartFor: edenUser withPassword: edenPassword .
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 38.
			
	self assertOnlyCartIn: interface wasNotCheckoutWithUsername: edenUser withPassword: edenPassword.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:42:30' prior: 50794403!
test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry .
	cartID := interface createCartFor: edenUser withPassword: edenPassword .
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 38.
			
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword ) first isEmpty .
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword ) second equals: 0 .! !

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'Eden Torres 11/18/2019 19:00:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/18/2019 19:00:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/18/2019 19:00:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/18/2019 19:00:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/18/2019 19:00:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/18/2019 19:00:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/18/2019 19:00:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/18/2019 19:00:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/18/2019 19:00:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/18/2019 19:00:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/18/2019 19:00:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/18/2019 19:00:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/18/2019 19:00:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/18/2019 19:00:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/18/2019 19:00:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/18/2019 19:00:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/18/2019 19:00:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/18/2019 19:00:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/18/2019 19:00:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/18/2019 19:00:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/18/2019 19:00:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/18/2019 19:00:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/18/2019 19:00:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/18/2019 19:00:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'Eden Torres 11/18/2019 19:00:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'Eden Torres 11/18/2019 19:00:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'Eden Torres 11/18/2019 19:00:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'Eden Torres 11/18/2019 19:00:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'Eden Torres 11/18/2019 19:00:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'Eden Torres 11/18/2019 19:00:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'Eden Torres 11/18/2019 19:00:32'!
FAILURE!

!testRun: #TusLibrosInternalInterfaceTest #test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError stamp: 'Eden Torres 11/18/2019 19:00:32'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'Eden Torres 11/18/2019 19:00:32'!
FAILURE!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 19:00:46' prior: 50794420!
test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry .
	cartID := interface createCartFor: edenUser withPassword: edenPassword .
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 38.
			
	self assertOnlyCartIn: interface wasNotCheckoutWithUsername: edenUser withPassword: edenPassword.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 18:51:38' prior: 50793898!
test30CheckoutCartShouldRaiseErrorWithExpiredCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 38.
	
	self addExpiredTime.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Carrito expirado'.

	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first isEmpty. 
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: 0. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 19:02:03' prior: 50794606!
test30CheckoutCartShouldRaiseErrorWithExpiredCart

	| interface cartID listPurchase |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 38.
	
	self addExpiredTime.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Carrito expirado'.

	listPurchase := interface listPurchaseFor: edenUser withPassword: edenPassword.
	self assert: interface carts isEmpty.
	self assert: listPurchase first isEmpty. 
	self assert: listPurchase second equals: 0. ! !

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'Eden Torres 11/18/2019 19:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/18/2019 19:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/18/2019 19:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/18/2019 19:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/18/2019 19:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/18/2019 19:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/18/2019 19:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/18/2019 19:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/18/2019 19:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/18/2019 19:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/18/2019 19:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/18/2019 19:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/18/2019 19:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/18/2019 19:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/18/2019 19:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/18/2019 19:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/18/2019 19:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/18/2019 19:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/18/2019 19:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/18/2019 19:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/18/2019 19:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/18/2019 19:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/18/2019 19:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/18/2019 19:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'Eden Torres 11/18/2019 19:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'Eden Torres 11/18/2019 19:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'Eden Torres 11/18/2019 19:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'Eden Torres 11/18/2019 19:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'Eden Torres 11/18/2019 19:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'Eden Torres 11/18/2019 19:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'Eden Torres 11/18/2019 19:02:07'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError stamp: 'Eden Torres 11/18/2019 19:02:07'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 19:02:38' prior: 50792807!
test22CheckoutCartShouldRaiseErrorWithEmptyCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Can not check out an empty cart'.

	self assertOnlyCartIn: interface wasNotCheckoutWithUsername: edenUser withPassword: edenPassword. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 19:02:45' prior: 50792775!
test21CheckoutCartShouldRaiseErrorWithExpiredCard

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory expiredCreditCard number withCreditCardName:
	factory expiredCreditCard name withExpritationDate: factory expiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Can not charge an expired credit card'.

	self assertOnlyCartIn: interface wasNotCheckoutWithUsername: edenUser withPassword: edenPassword.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 19:02:51' prior: 50792743!
test20CheckoutCartShouldRaiseErrorWithTooLongCardName

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory tooLongNameCreditCard number withCreditCardName:
	factory tooLongNameCreditCard name withExpritationDate: factory tooLongNameCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Nombre de la tarjeta inválido'.

	self assertOnlyCartIn: interface wasNotCheckoutWithUsername: edenUser withPassword: edenPassword. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 19:02:58' prior: 50792711!
test19CheckoutCartShouldRaiseErrorWithEmptyCardName

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory emptyNameCreditCard number withCreditCardName:
	factory emptyNameCreditCard name withExpritationDate: factory emptyNameCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Nombre de la tarjeta inválido'.

	self assertOnlyCartIn: interface wasNotCheckoutWithUsername: edenUser withPassword: edenPassword. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 19:03:53' prior: 50794638!
test30CheckoutCartShouldRaiseErrorWithExpiredCart

	| interface cartID listPurchase |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 38.
	
	self addExpiredTime.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Carrito expirado'.

	listPurchase := interface listPurchaseFor: edenUser withPassword: edenPassword.
	
	self assert: interface carts isEmpty.
	self assert: listPurchase first isEmpty. 
	self assert: listPurchase second equals: 0. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'assertions' stamp: 'Eden Torres 11/18/2019 19:04:32' prior: 50793708!
assertOnlyCartIn: interface wasNotCheckoutWithUsername: aUserID withPassword: aPassword

	| listPurchase |
	
	listPurchase := interface listPurchaseFor: aUserID withPassword: aPassword.
	 
	self assert: interface carts size equals: 1.
	self assert: listPurchase first isEmpty. 
	self assert: listPurchase second equals: 0. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'assertions' stamp: 'Eden Torres 11/18/2019 19:05:27'!
assertThatListPurchaseIn: interface isEmptyWithUsername: aUserID withPassword: aPassword

	| listPurchase |
	
	listPurchase := interface listPurchaseFor: aUserID withPassword: aPassword.
	 
	self assert: interface carts size equals: 1.
	self assert: listPurchase first isEmpty. 
	self assert: listPurchase second equals: 0. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'assertions' stamp: 'Eden Torres 11/18/2019 19:05:40' prior: 50794967!
assertThatListPurchaseIn: interface isEmptyWithUsername: aUserID withPassword: aPassword

	| listPurchase |
	
	listPurchase := interface listPurchaseFor: aUserID withPassword: aPassword.
	self assert: listPurchase first isEmpty. 
	self assert: listPurchase second equals: 0. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'assertions' stamp: 'Eden Torres 11/18/2019 19:06:09' prior: 50794953!
assertOnlyCartIn: interface wasNotCheckoutWithUsername: aUserID withPassword: aPassword
	 
	self assert: interface carts size equals: 1.
	self assertThatListPurchaseIn: interface isEmptyWithUsername: aUserID  withPassword: aPassword.
	 ! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 19:06:50' prior: 50794921!
test30CheckoutCartShouldRaiseErrorWithExpiredCart

	| interface cartID listPurchase |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 38.
	
	self addExpiredTime.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Carrito expirado'.

	listPurchase := interface listPurchaseFor: edenUser withPassword: edenPassword.
	
	self assert: interface carts isEmpty.
	self assertThatListPurchaseIn: interface isEmptyWithUsername: edenUser withPassword: edenPassword.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 19:06:57' prior: 50795005!
test30CheckoutCartShouldRaiseErrorWithExpiredCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 38.
	
	self addExpiredTime.
		
	self should: [interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'Carrito expirado'.

	self assert: interface carts isEmpty.
	self assertThatListPurchaseIn: interface isEmptyWithUsername: edenUser withPassword: edenPassword.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 19:07:15' prior: 50792685!
test18CheckoutCartShouldRaiseErrorWithInvalidCartId

	| interface |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
		
	self should: [interface checkoutCart: 'invalid id' withCreditCardNumber: factory notExpiredCreditCard number withCreditCardName:
	factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard expirationDate on: factory today] 
		raise: Error - MessageNotUnderstood  
		withMessageText: 'CartID inválido'.

	self assert: interface carts isEmpty.
	self assertThatListPurchaseIn: interface isEmptyWithUsername: edenUser withPassword: edenPassword. ! !
!TusLibrosInternalInterfaceTest methodsFor: 'assertions' stamp: 'Eden Torres 11/18/2019 19:10:12'!
assertThatListCartIn: interface ofCartID: cartID includes: aBook numberOfTimes: aNumberOfOcurrences

	| |
	
	self assert: ((interface listCart: cartID ) includes: factory itemSellByTheStore ).
	self assert: ((interface listCart: cartID ) occurrencesOf: factory itemSellByTheStore ) equals: 1.! !
!TusLibrosInternalInterfaceTest methodsFor: 'assertions' stamp: 'Eden Torres 11/18/2019 19:11:34'!
assertThatListCartIn: interface ofCartID: cartID includes: aBook withNumberOfTimes: aNumberOfOcurrences

	|listCart |
	
	listCart := interface listCart: cartID.
	
	self assert: listCart includes: aBook.
	self assert: (listCart occurrencesOf: aBook ) equals: aNumberOfOcurrences .! !
!TusLibrosInternalInterfaceTest methodsFor: 'assertions' stamp: 'Eden Torres 11/18/2019 19:11:54'!
assertThatListCartIn: interface ofCartID: cartID includes: aBook aNumberOfTimes: aNumberOfOcurrences

	|listCart |
	
	listCart := interface listCart: cartID.
	
	self assert: listCart includes: aBook.
	self assert: (listCart occurrencesOf: aBook ) equals: aNumberOfOcurrences .! !

!methodRemoval: TusLibrosInternalInterfaceTest #assertThatListCartIn:ofCartID:includes:numberOfTimes: stamp: 'Eden Torres 11/18/2019 19:11:59'!
assertThatListCartIn: interface ofCartID: cartID includes: aBook numberOfTimes: aNumberOfOcurrences

	| |
	
	self assert: ((interface listCart: cartID ) includes: factory itemSellByTheStore ).
	self assert: ((interface listCart: cartID ) occurrencesOf: factory itemSellByTheStore ) equals: 1.!

!methodRemoval: TusLibrosInternalInterfaceTest #assertThatListCartIn:ofCartID:includes:withNumberOfTimes: stamp: 'Eden Torres 11/18/2019 19:12:04'!
assertThatListCartIn: interface ofCartID: cartID includes: aBook withNumberOfTimes: aNumberOfOcurrences

	|listCart |
	
	listCart := interface listCart: cartID.
	
	self assert: listCart includes: aBook.
	self assert: (listCart occurrencesOf: aBook ) equals: aNumberOfOcurrences .!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/18/2019 19:12:11'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/18/2019 19:12:11'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/18/2019 19:12:11'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/18/2019 19:12:11'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/18/2019 19:12:11'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/18/2019 19:12:11'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/18/2019 19:12:11'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/18/2019 19:12:11'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/18/2019 19:12:11'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/18/2019 19:12:11'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/18/2019 19:12:11'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/18/2019 19:12:11'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/18/2019 19:12:11'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/18/2019 19:12:11'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/18/2019 19:12:11'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/18/2019 19:12:11'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/18/2019 19:12:11'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/18/2019 19:12:11'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/18/2019 19:12:11'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/18/2019 19:12:11'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/18/2019 19:12:11'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/18/2019 19:12:11'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/18/2019 19:12:11'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'Eden Torres 11/18/2019 19:12:11'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'Eden Torres 11/18/2019 19:12:11'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'Eden Torres 11/18/2019 19:12:11'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'Eden Torres 11/18/2019 19:12:11'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'Eden Torres 11/18/2019 19:12:11'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'Eden Torres 11/18/2019 19:12:11'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'Eden Torres 11/18/2019 19:12:11'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError stamp: 'Eden Torres 11/18/2019 19:12:11'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 19:13:06' prior: 50792524!
test10AddToCartListsOneItem

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	
	self assertThatListCartIn: interface ofCartID: cartID includes: factory itemSellByTheStore aNumberOfTimes: 1.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 19:13:13' prior: 50792543!
test11AddABookTwiceToCartListsTwoItem

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 2.
	
	self assertThatListCartIn: interface ofCartID: cartID includes: factory itemSellByTheStore aNumberOfTimes: 2.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 19:13:30' prior: 50792562!
test12AddTwoDifferentBookToCartListsTwoDifferentItems

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	interface addToCart: cartID item: factory anotherItemSellByTheStore withQuantity: 1.
	
	self assertThatListCartIn: interface ofCartID: cartID includes: factory itemSellByTheStore aNumberOfTimes: 1.
	
	self assertThatListCartIn: interface ofCartID: cartID includes: factory anotherItemSellByTheStore aNumberOfTimes: 1.! !
!TusLibrosInternalInterfaceTest methodsFor: 'assertions' stamp: 'Eden Torres 11/18/2019 19:14:50'!
assertThatListCartIsEmtyIn: interface ofCartID: cartID

	|listCart |
	
	listCart := interface listCart: cartID.
	
	self assert: listCart isEmpty.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 19:15:38' prior: 50792450!
test05ListCartRaisesErrorWhenCartIDDoesNotExist

	| interface |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
		
	self should: [interface listCart: 'INVALID CART ID']
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'CartID inválido'.
! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 19:15:50' prior: 50792463!
test06ListCartListsNothingWhenCartIsJustCreated

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self assertThatListCartIsEmtyIn: interface ofCartID: cartID.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 19:16:10' prior: 50792490!
test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self should: [interface addToCart: cartID item: factory itemNotSellByTheStore withQuantity: 1]
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'Item is not in catalog'.
		
	self assertThatListCartIsEmtyIn: interface ofCartID: cartID.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 19:16:23' prior: 50792507!
test09AddToCartRaisesErrorWhenQuantityIsZero

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self should: [interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 0]
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'Invalid number of items'.
		
	self assertThatListCartIsEmtyIn: interface ofCartID: cartID.! !

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/18/2019 19:16:25'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 19:16:53' prior: 50795361!
test05ListCartRaisesErrorWhenCartIDDoesNotExist

	| interface |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
		
	self should: [interface listCart: 'INVALID CART ID']
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'CartID inválido'.
		
	self assert: interface carts isEmpty.
! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 19:17:03' prior: 50792476!
test07AddToCartRaisesErrorWhenCartIDDoesNotExist

	| interface |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
		
	self should: [interface addToCart: 'INVALID CART ID' item: factory itemSellByTheStore withQuantity: 1]
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'CartID inválido'.
		
	self assert: interface carts isEmpty.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 19:17:23' prior: 50795328!
test12AddTwoDifferentBookToCartListsTwoDifferentItems

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	interface addToCart: cartID item: factory anotherItemSellByTheStore withQuantity: 1.
	
	self assertThatListCartIn: interface ofCartID: cartID includes: factory itemSellByTheStore aNumberOfTimes: 1.
	self assertThatListCartIn: interface ofCartID: cartID includes: factory anotherItemSellByTheStore aNumberOfTimes: 1.! !

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/18/2019 19:17:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/18/2019 19:17:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/18/2019 19:17:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/18/2019 19:17:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/18/2019 19:17:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/18/2019 19:17:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/18/2019 19:17:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/18/2019 19:17:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/18/2019 19:17:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/18/2019 19:17:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/18/2019 19:17:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/18/2019 19:17:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/18/2019 19:17:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/18/2019 19:17:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/18/2019 19:17:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/18/2019 19:17:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/18/2019 19:17:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/18/2019 19:17:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/18/2019 19:17:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/18/2019 19:17:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/18/2019 19:17:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/18/2019 19:17:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/18/2019 19:17:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'Eden Torres 11/18/2019 19:17:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'Eden Torres 11/18/2019 19:17:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'Eden Torres 11/18/2019 19:17:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'Eden Torres 11/18/2019 19:17:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'Eden Torres 11/18/2019 19:17:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'Eden Torres 11/18/2019 19:17:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'Eden Torres 11/18/2019 19:17:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError stamp: 'Eden Torres 11/18/2019 19:17:26'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 19:17:55' prior: 50792836!
test23CheckoutCartWithOneElementListsOnePurchase

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.

	self assert: interface carts isEmpty.
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) first includes: factory itemSellByTheStore .
	self assert: (interface listPurchaseFor: edenUser withPassword: edenPassword) second equals: factory itemSellByTheStorePrice .  ! !
!TusLibrosInternalInterfaceTest methodsFor: 'assertions' stamp: 'Eden Torres 11/18/2019 19:25:13'!
assertThatListPurchaseIn: interface withUsername: aUserID withPassword: aPassword includesOneItem: aItem withPrice: aPrice

	| listPurchase |
	
	listPurchase := interface listPurchaseFor: aUserID withPassword: aPassword.
	
	self assert: interface carts isEmpty.
	self assert: listPurchase first size equals: 1.
	self assert: listPurchase first includes: aItem .
	self assert: listPurchase second equals: aPrice.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 19:26:57' prior: 50792959!
test26CheckoutCartWithOneElementListsOnlySameUserPurchases

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	cartID := interface createCartFor: santiUser withPassword: santiPassword .
	
	interface addToCart: cartID item: factory anotherItemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.
			
	self assertThatListPurchaseIn: interface withUsername: edenUser withPassword: edenPassword includesOneItem: factory itemSellByTheStore withPrice: factory itemSellByTheStorePrice .
	
	self assertThatListPurchaseIn: interface withUsername: santiUser withPassword: santiPassword includesOneItem: factory anotherItemSellByTheStore withPrice: factory anotherItemSellByTheStorePrice . ! !

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'Eden Torres 11/18/2019 19:27:02'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/18/2019 19:27:02'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/18/2019 19:27:02'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/18/2019 19:27:02'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/18/2019 19:27:02'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/18/2019 19:27:02'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/18/2019 19:27:02'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/18/2019 19:27:02'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/18/2019 19:27:02'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/18/2019 19:27:02'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/18/2019 19:27:02'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/18/2019 19:27:02'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/18/2019 19:27:02'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/18/2019 19:27:02'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/18/2019 19:27:02'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/18/2019 19:27:02'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/18/2019 19:27:02'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/18/2019 19:27:02'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/18/2019 19:27:02'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/18/2019 19:27:02'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/18/2019 19:27:02'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/18/2019 19:27:02'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/18/2019 19:27:02'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/18/2019 19:27:02'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'Eden Torres 11/18/2019 19:27:02'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'Eden Torres 11/18/2019 19:27:02'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'Eden Torres 11/18/2019 19:27:02'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'Eden Torres 11/18/2019 19:27:02'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'Eden Torres 11/18/2019 19:27:02'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'Eden Torres 11/18/2019 19:27:02'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'Eden Torres 11/18/2019 19:27:02'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError stamp: 'Eden Torres 11/18/2019 19:27:03'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'Eden Torres 11/18/2019 19:27:20' prior: 50795623!
test23CheckoutCartWithOneElementListsOnePurchase

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    expirationDate on: factory today.

	self assertThatListPurchaseIn: interface withUsername: edenUser withPassword: edenPassword includesOneItem: factory itemSellByTheStore withPrice: factory itemSellByTheStorePrice. ! !

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError stamp: 'Eden Torres 11/18/2019 19:27:29'!
PASSED!

----STARTUP---- (18 November 2019 19:33:00) as /home/snahmod/Documentos/UBA/2019/Segundo Cuatrimestre/Ingsoft I/cuis-nuevo/CuisUniversity-3938.image!


!classRemoval: #TusLibrosInternalInterface stamp: 'SN 11/18/2019 19:33:08'!
Object subclass: #TusLibrosInternalInterface
	instanceVariableNames: 'userRegistry carts catalog lastCartID clock salesBooks merchantProcessor purchases'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #StoreTestObjectsFactory stamp: 'SN 11/18/2019 19:33:09'!
Object subclass: #StoreTestObjectsFactory
	instanceVariableNames: 'today'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #Sale stamp: 'SN 11/18/2019 19:33:09'!
Object subclass: #Sale
	instanceVariableNames: 'total items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CreditCard stamp: 'SN 11/18/2019 19:33:09'!
Object subclass: #CreditCard
	instanceVariableNames: 'expiration number name'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #Cashier stamp: 'SN 11/18/2019 19:33:10'!
Object subclass: #Cashier
	instanceVariableNames: 'cart salesBook merchantProcessor creditCard total'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CartInterface stamp: 'SN 11/18/2019 19:33:10'!
Object subclass: #CartInterface
	instanceVariableNames: 'catalog items cart timeLastModified clock userID'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #Cart stamp: 'SN 11/18/2019 19:33:10'!
Object subclass: #Cart
	instanceVariableNames: 'catalog items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #TusLibrosInternalInterfaceTest stamp: 'SN 11/18/2019 19:33:11'!
TestCase subclass: #TusLibrosInternalInterfaceTest
	instanceVariableNames: 'edenUser edenPassword userRegistry factory stubbedTime debitBehavior santiUser santiPassword emptyUserRegistry'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CashierTest stamp: 'SN 11/18/2019 19:33:11'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'testObjectsFactory debitBehavior'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CartTest stamp: 'SN 11/18/2019 19:33:12'!
TestCase subclass: #CartTest
	instanceVariableNames: 'testObjectsFactory'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

----End fileIn of /home/snahmod/Documentos/UBA/2019/Segundo Cuatrimestre/Ingsoft I/cuis-nuevo/TusLibros.st----!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'SN 11/18/2019 19:33:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'SN 11/18/2019 19:33:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'SN 11/18/2019 19:33:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'SN 11/18/2019 19:33:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'SN 11/18/2019 19:33:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'SN 11/18/2019 19:33:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'SN 11/18/2019 19:33:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'SN 11/18/2019 19:33:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'SN 11/18/2019 19:33:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'SN 11/18/2019 19:33:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'SN 11/18/2019 19:33:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'SN 11/18/2019 19:33:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'SN 11/18/2019 19:33:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'SN 11/18/2019 19:33:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'SN 11/18/2019 19:33:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'SN 11/18/2019 19:33:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'SN 11/18/2019 19:33:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'SN 11/18/2019 19:33:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'SN 11/18/2019 19:33:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'SN 11/18/2019 19:33:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'SN 11/18/2019 19:33:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'SN 11/18/2019 19:33:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'SN 11/18/2019 19:33:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'SN 11/18/2019 19:33:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'SN 11/18/2019 19:33:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'SN 11/18/2019 19:33:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'SN 11/18/2019 19:33:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'SN 11/18/2019 19:33:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'SN 11/18/2019 19:33:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'SN 11/18/2019 19:33:54'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError stamp: 'SN 11/18/2019 19:33:54'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'SN 11/18/2019 19:52:21'!
test32CheckoutCartWithOneElementHasOneItemInTicket

	| interface cartID ticket |

	interface := self createTusLibrosInternalInterfaceWithSalesBook: OrderedCollection new userRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.

	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.

	ticket := interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    		 withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    		 expirationDate on: factory today.


	self assert: interface carts isEmpty.
	self assert: ticket first includes: factory itemSellByTheStore .
	self assert: ticket second equals: factory itemSellByTheStorePrice .! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'SN 11/18/2019 19:52:39' prior: 50790474!
test32CheckoutCartWithOneElementHasOneItemInTicket

	| interface cartID ticket |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.

	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.

	ticket := interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    		 withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    		 expirationDate on: factory today.


	self assert: interface carts isEmpty.
	self assert: ticket first includes: factory itemSellByTheStore .
	self assert: ticket second equals: factory itemSellByTheStorePrice .! !

!testRun: #TusLibrosInternalInterfaceTest #test32CheckoutCartWithOneElementHasOneItemInTicket stamp: 'SN 11/18/2019 19:52:44'!
ERROR!
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'SN 11/18/2019 19:53:54' prior: 50790207!
checkoutCart: aCartID withCreditCardNumber: aNumber withCreditCardName: aName withExpritationDate: anExpirationDate on: aDate
	
	| creditCard cart cashier items total |
	
	self validateCartWith: aCartID.
	cart := carts at: aCartID.
	
	creditCard := CreditCard expiringOn: anExpirationDate  withName: aName  withNumber: aNumber.
	cashier := Cashier toCheckout: cart charging: creditCard  throught: merchantProcessor
						   on: aDate registeringOn: (salesBooks at: cart userID ).
	
	total := cashier checkOut.
	items := cart list .

	carts removeKey: aCartID.

	^ OrderedCollection with: items with: total.! !

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'SN 11/18/2019 19:54:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'SN 11/18/2019 19:54:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'SN 11/18/2019 19:54:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'SN 11/18/2019 19:54:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'SN 11/18/2019 19:54:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'SN 11/18/2019 19:54:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'SN 11/18/2019 19:54:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'SN 11/18/2019 19:54:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'SN 11/18/2019 19:54:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'SN 11/18/2019 19:54:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'SN 11/18/2019 19:54:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'SN 11/18/2019 19:54:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'SN 11/18/2019 19:54:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'SN 11/18/2019 19:54:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'SN 11/18/2019 19:54:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'SN 11/18/2019 19:54:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'SN 11/18/2019 19:54:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'SN 11/18/2019 19:54:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'SN 11/18/2019 19:54:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'SN 11/18/2019 19:54:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'SN 11/18/2019 19:54:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'SN 11/18/2019 19:54:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'SN 11/18/2019 19:54:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'SN 11/18/2019 19:54:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'SN 11/18/2019 19:54:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'SN 11/18/2019 19:54:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'SN 11/18/2019 19:54:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'SN 11/18/2019 19:54:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'SN 11/18/2019 19:54:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'SN 11/18/2019 19:54:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError stamp: 'SN 11/18/2019 19:54:12'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test32CheckoutCartWithOneElementHasOneItemInTicket stamp: 'SN 11/18/2019 19:54:12'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'SN 11/18/2019 19:54:53'!
test33CheckoutCartWithManyElementHasItemsInTicket

	| interface cartID ticket totalPurchaseAmount |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.

	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 3.
	interface addToCart: cartID item: factory anotherItemSellByTheStore withQuantity: 2.

	ticket := interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    		 withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    		 expirationDate on: factory today.

	totalPurchaseAmount := (factory itemSellByTheStorePrice * 3) + (factory anotherItemSellByTheStorePrice * 2).

	self assert: interface carts isEmpty.
	self assert: ticket first size equals: 5.
	self assert: (ticket first occurrencesOf: factory itemSellByTheStore) equals: 3 .
	self assert: (ticket first occurrencesOf: factory anotherItemSellByTheStore ) equals: 2 .
	self assert: ticket second equals: totalPurchaseAmount.! !

!testRun: #TusLibrosInternalInterfaceTest #test33CheckoutCartWithManyElementHasItemsInTicket stamp: 'SN 11/18/2019 19:54:55'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'SN 11/18/2019 19:54:55'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'SN 11/18/2019 19:54:55'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'SN 11/18/2019 19:54:55'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'SN 11/18/2019 19:54:55'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'SN 11/18/2019 19:54:55'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'SN 11/18/2019 19:54:55'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'SN 11/18/2019 19:54:55'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'SN 11/18/2019 19:54:55'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'SN 11/18/2019 19:54:55'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'SN 11/18/2019 19:54:55'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'SN 11/18/2019 19:54:55'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'SN 11/18/2019 19:54:55'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'SN 11/18/2019 19:54:55'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'SN 11/18/2019 19:54:55'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'SN 11/18/2019 19:54:55'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'SN 11/18/2019 19:54:55'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'SN 11/18/2019 19:54:55'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'SN 11/18/2019 19:54:55'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'SN 11/18/2019 19:54:55'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'SN 11/18/2019 19:54:55'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'SN 11/18/2019 19:54:55'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'SN 11/18/2019 19:54:55'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'SN 11/18/2019 19:54:56'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'SN 11/18/2019 19:54:56'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'SN 11/18/2019 19:54:56'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'SN 11/18/2019 19:54:56'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'SN 11/18/2019 19:54:56'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'SN 11/18/2019 19:54:56'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'SN 11/18/2019 19:54:56'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'SN 11/18/2019 19:54:56'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError stamp: 'SN 11/18/2019 19:54:56'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test32CheckoutCartWithOneElementHasOneItemInTicket stamp: 'SN 11/18/2019 19:54:56'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test33CheckoutCartWithManyElementHasItemsInTicket stamp: 'SN 11/18/2019 19:54:56'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'SN 11/18/2019 19:55:38' prior: 50790692!
test33CheckoutCartWithManyElementHasItemsInTicket

	| interface cartID ticket totalPurchaseAmount |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.

	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 3.
	interface addToCart: cartID item: factory anotherItemSellByTheStore withQuantity: 2.

	ticket := interface checkoutCart: cartID withCreditCardNumber: factory notExpiredCreditCard number
			    		 withCreditCardName: factory notExpiredCreditCard name withExpritationDate: factory notExpiredCreditCard
			    		 expirationDate on: factory today.

	totalPurchaseAmount := (factory itemSellByTheStorePrice * 3) + (factory anotherItemSellByTheStorePrice * 2).

	self assert: interface carts isEmpty.
	self assert: ticket first size equals: 5.
	self assert: (ticket first occurrencesOf: factory itemSellByTheStore) equals: 3 .
	self assert: (ticket first occurrencesOf: factory anotherItemSellByTheStore ) equals: 2 .
	self assert: ticket second equals: totalPurchaseAmount.! !

!testRun: #TusLibrosInternalInterfaceTest #test33CheckoutCartWithManyElementHasItemsInTicket stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test32CheckoutCartWithOneElementHasOneItemInTicket stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test33CheckoutCartWithManyElementHasItemsInTicket stamp: 'SN 11/18/2019 19:55:47'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test32CheckoutCartWithOneElementHasOneItemInTicket stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test33CheckoutCartWithManyElementHasItemsInTicket stamp: 'SN 11/18/2019 19:57:27'!
PASSED!

----QUIT----(18 November 2019 19:57:46) CuisUniversity-3938.image priorSource: 14622086!

----STARTUP---- (21 November 2019 16:45:26) as /home/snahmod/Documentos/UBA/2019/Segundo Cuatrimestre/Ingsoft I/cuis-nuevo/CuisUniversity-3938.image!


----End fileIn of /home/snahmod/Documentos/UBA/2019/Segundo Cuatrimestre/Ingsoft I/cuis-nuevo/StringServer-cors.st----!

server := StringServerController listeningOn: 8082.!

----End fileIn of /home/snahmod/Documentos/UBA/2019/Segundo Cuatrimestre/Ingsoft I/cuis-nuevo/Packages/System/Collections-CompactArrays.pck.st----!

----End fileIn of /home/snahmod/Documentos/UBA/2019/Segundo Cuatrimestre/Ingsoft I/cuis-nuevo/Packages/Features/Compression.pck.st----!

----End fileIn of /home/snahmod/Documentos/UBA/2019/Segundo Cuatrimestre/Ingsoft I/cuis-nuevo/Packages/Features/Sound.pck.st----!

----End fileIn of /home/snahmod/Documentos/UBA/2019/Segundo Cuatrimestre/Ingsoft I/cuis-nuevo/Packages/Features/Cryptography-DigitalSignatures.pck.st----!

----End fileIn of /home/snahmod/Documentos/UBA/2019/Segundo Cuatrimestre/Ingsoft I/cuis-nuevo/Packages/Features/Identities-UUID.pck.st----!

----End fileIn of /home/snahmod/Documentos/UBA/2019/Segundo Cuatrimestre/Ingsoft I/cuis-nuevo/Packages/System/Network-Kernel.pck.st----!

----End fileIn of /home/snahmod/Documentos/UBA/2019/Segundo Cuatrimestre/Ingsoft I/cuis-nuevo/Packages/Features/WebClient.pck.st----!

server := StringServerController listeningOn: 8082.!

Object subclass: #TusLibrosController
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #TusLibrosController category: #TusLibros stamp: 'SN 11/21/2019 19:52:43'!
Object subclass: #TusLibrosController
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!TusLibrosController class methodsFor: 'instance creation' stamp: 'SN 11/21/2019 19:59:43'!
listeningOn: aPortNumber

	^self new initializeWith: aPortNumber.! !

!classDefinition: #TusLibrosController category: #TusLibros stamp: 'SN 11/21/2019 20:01:59'!
Object subclass: #TusLibrosController
	instanceVariableNames: 'webServer'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!TusLibrosController methodsFor: 'service managment' stamp: 'SN 11/21/2019 20:01:55'!
startListening
	
	webServer startListener.

	^ 'Listening on port: ', self port asString.
	! !
!TusLibrosController methodsFor: 'service managment' stamp: 'SN 11/21/2019 20:02:34'!
destroy
	
	webServer ifNotNil:[webServer destroy].! !
!TusLibrosController methodsFor: 'service managment' stamp: 'SN 11/21/2019 20:02:40'!
stopListening
	
	webServer stopListener.
	
	^'Stopped listening from port: ', self port asString! !

!classDefinition: #TusLibrosController category: #TusLibros stamp: 'SN 11/21/2019 20:04:00'!
Object subclass: #TusLibrosController
	instanceVariableNames: 'webServer port'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 20:03:59'!
port
	
	^port ifNil: [port:=8080].
	
	! !
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 20:04:20'!
initializeWith: aListeningPort

	! !

!classDefinition: #TusLibrosController category: #TusLibros stamp: 'SN 11/21/2019 20:07:04'!
Object subclass: #TusLibrosController
	instanceVariableNames: 'webServer port tusLibros'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 20:07:02' prior: 50829561!
initializeWith: aListeningPort

	tusLibros := TusLibrosInternalInterface new.
	
	port:= aListeningPort .
	
	webServer := WebServer new listenOn: aListeningPort .! !
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 20:09:07' prior: 50829574!
initializeWith: aListeningPort

	tusLibros := TusLibrosInternalInterface withUsers: self userList withCatalog: self catalog withClock: Time withAMerchantProcessor: self merchantProcessor.
	
	port:= aListeningPort .
	
	webServer := WebServer new listenOn: aListeningPort .! !
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 20:11:01' prior: 50829583!
initializeWith: aListeningPort

	tusLibros := TusLibrosInternalInterface withUsers: self userList withCatalog: self catalog withClock: Time withAMerchantProcessor: self merchantProcessor.
	
	port := aListeningPort .
	
	webServer := WebServer new listenOn: aListeningPort .
	
	! !
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 20:20:55' prior: 50829595!
initializeWith: aListeningPort

	tusLibros := TusLibrosInternalInterface withUsers: self userList withCatalog: self catalog withClock: Time withAMerchantProcessor: self merchantProcessor.
	
	port := aListeningPort .
	
	webServer := WebServer new listenOn: aListeningPort .
	
	webServer addService: '/helloWorld' action: self helloWorld.
	! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/21/2019 20:22:00'!
helloWorld

	^ [:request |	
		
		request send200Response: 'Hello World!!'
				 contentType: 'application/json; charset=utf-8' do: [:resp | 
					resp headerAt: 'Access-Control-Allow-Origin' put: '*'.]
		].! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/21/2019 20:24:04' prior: 50829621!
helloWorld

	^ self render: 'Hello World!!'.! !
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/21/2019 20:25:17'!
render: aResponse

	^ [:request |	
		
		request send200Response: aResponse
				 contentType: 'application/json; charset=utf-8' do: [:resp | 
					resp headerAt: 'Access-Control-Allow-Origin' put: '*'.]
		].! !

server stopListening .!

server destroy .!
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 20:26:48' prior: 50829607!
initializeWith: aListeningPort

	"tusLibros := TusLibrosInternalInterface withUsers: self userList withCatalog: self catalog withClock: Time withAMerchantProcessor: self merchantProcessor."

	tusLibros := TusLibrosInternalInterface withUsers: nil withCatalog: nil withClock: nil withAMerchantProcessor: nil.	
	port := aListeningPort .
	
	webServer := WebServer new listenOn: aListeningPort .
	
	webServer addService: '/helloWorld' action: self helloWorld.
	! !

server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 20:28:04' prior: 50829648!
initializeWith: aListeningPort

	tusLibros := TusLibrosInternalInterface withUsers: self userList withCatalog: self catalog withClock: Time withAMerchantProcessor: self merchantProcessor.
	
	port := aListeningPort .
	
	webServer := WebServer new listenOn: aListeningPort .
	
	webServer addService: '/helloWorld' action: self helloWorld.
	! !
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 20:28:51' prior: 50829668!
initializeWith: aListeningPort

	tusLibros := TusLibrosInternalInterface withUsers: self userList withCatalog: self catalog withClock: Time withAMerchantProcessor: self merchantProcessor.
	
	port := aListeningPort .
	
	webServer := WebServer new listenOn: aListeningPort .
	
	webServer addService: '/helloWorld' action: self helloWorld.
	! !
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 20:30:29'!
merchantProcessor

	^ TusLibrosInternalInterfaceTest new.! !
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 20:31:45'!
userList

	^ Dictionary new at: 'Eden' put: '12345678'; at: 'Santi' put: '12345678'.! !
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 20:32:45'!
catalog

	^'p'! !
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 20:35:24' prior: 50829701!
userList

	^Dictionary new at: 'Eden' put: '12345678';
					   at: 'Santi' put: '12345678';
					   yourself.! !
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 20:35:43' prior: 50829707!
catalog

	^Dictionary new
		at: self itemSellByTheStore put: self itemSellByTheStorePrice;
		at: self anotherItemSellByTheStore  put: self anotherItemSellByTheStorePrice; 
		yourself.! !
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 20:39:03' prior: 50829718!
catalog

	^Dictionary new
		at: '9789500763035' put: 3020;
		at: '0201558025'  put: 460; 
		yourself.! !
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 20:39:29' prior: 50829727!
catalog

	^Dictionary new at: '9789500763035' put: 3020;
					   at: '0201558025'  put: 460; 
					   yourself.! !

server := TusLibrosController listeningOn: 8082.!

----SNAPSHOT----(21 November 2019 20:40:05) CuisUniversity-3938.image priorSource: 14705468!
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 20:41:16' prior: 50829682!
initializeWith: aListeningPort

	tusLibros := TusLibrosInternalInterface withUsers: self userList withCatalog: self catalog withClock: Time withAMerchantProcessor: self merchantProcessor.
	
	port := aListeningPort .
	
	webServer := WebServer new listenOn: aListeningPort .
	
	webServer addService: '/helloWorld' action: self helloWorld.
	
	webServer addService: '/createCart' action: self createCart.
	! !
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/21/2019 20:51:42' prior: 50829636!
render: aResponse

	^ [:request |	
		
		request send200Response: aResponse
				 contentType: 'application/json; charset=utf-8' do: [:resp | 
					resp headerAt: 'Access-Control-Allow-Origin' put: '*'.]
		].! !
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 20:53:51' prior: 50829746!
initializeWith: aListeningPort

	| a |
	tusLibros := TusLibrosInternalInterface withUsers: self userList withCatalog: self catalog withClock: Time withAMerchantProcessor: self merchantProcessor.
	
	port := aListeningPort .
	
	webServer := WebServer new listenOn: aListeningPort .
	
	webServer addService: '/helloWorld' action: self helloWorld.
	
	webServer addService: '/createCart' action: [:request | a := request].
	
	a.
	! !
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 20:54:18' prior: 50829772!
initializeWith: aListeningPort

	| a |
	tusLibros := TusLibrosInternalInterface withUsers: self userList withCatalog: self catalog withClock: Time withAMerchantProcessor: self merchantProcessor.
	
	port := aListeningPort .
	
	webServer := WebServer new listenOn: aListeningPort .
	
	webServer addService: '/helloWorld' action: self helloWorld.
	
	webServer addService: '/createCart' action: [:request | a := request].
	
	a send200Response: 'test'
				 contentType: 'application/json; charset=utf-8' do: [:resp | 
					resp headerAt: 'Access-Control-Allow-Origin' put: '*'.].
	! !
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 20:54:25' prior: 50829789!
initializeWith: aListeningPort

	| a |
	tusLibros := TusLibrosInternalInterface withUsers: self userList withCatalog: self catalog withClock: Time withAMerchantProcessor: self merchantProcessor.
	
	port := aListeningPort .
	
	webServer := WebServer new listenOn: aListeningPort .
	
	webServer addService: '/helloWorld' action: self helloWorld.
	
	webServer addService: '/createCart' action: [:request | a := request].
	
	a send200Response: 'test'
				 contentType: 'application/json; charset=utf-8' do: [:resp | 
					resp headerAt: 'Access-Control-Allow-Origin' put: '*'.].
				
	2+2
	! !

tening .
server destroy .!

server := TusLibrosController listeningOn: 8082.!

!classDefinition: #TusLibrosController category: #TusLibros stamp: 'SN 11/21/2019 20:55:36'!
Object subclass: #TusLibrosController
	instanceVariableNames: 'webServer port tusLibros req'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 20:55:34' prior: 50829811!
initializeWith: aListeningPort

	tusLibros := TusLibrosInternalInterface withUsers: self userList withCatalog: self catalog withClock: Time withAMerchantProcessor: self merchantProcessor.
	
	port := aListeningPort .
	
	webServer := WebServer new listenOn: aListeningPort .
	
	webServer addService: '/helloWorld' action: self helloWorld.
	
	webServer addService: '/createCart' action: [:request | req := request].
	
	! !
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 20:55:41' prior: 50829844!
initializeWith: aListeningPort

	tusLibros := TusLibrosInternalInterface withUsers: self userList withCatalog: self catalog withClock: Time withAMerchantProcessor: self merchantProcessor.
	
	port := aListeningPort .
	
	webServer := WebServer new listenOn: aListeningPort .
	
	webServer addService: '/helloWorld' action: self helloWorld.
	
	webServer addService: '/createCart' action: [:request | req := request. self test].
	
	! !

!classDefinition: #TusLibrosController category: #TusLibros stamp: 'SN 11/21/2019 20:56:22'!
Object subclass: #TusLibrosController
	instanceVariableNames: 'webServer port tusLibros req b'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/21/2019 20:56:17'!
test

	b send200Response: 'test'
				 contentType: 'application/json; charset=utf-8' do: [:resp | 
					resp headerAt: 'Access-Control-Allow-Origin' put: '*'.].! !

ning .
server destroy .!

server := TusLibrosController listeningOn: 8082.!

ning .
server destroy .!

!methodRemoval: TusLibrosController #test stamp: 'SN 11/21/2019 20:58:45'!
test

	b send200Response: 'test'
				 contentType: 'application/json; charset=utf-8' do: [:resp | 
					resp headerAt: 'Access-Control-Allow-Origin' put: '*'.].!
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/21/2019 20:59:04'!
test

	req send200Response: 'test'
				 contentType: 'application/json; charset=utf-8' do: [:resp | 
					resp headerAt: 'Access-Control-Allow-Origin' put: '*'.].! !

server := TusLibrosController listeningOn: 8082.!

ning .
server destroy .!
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/21/2019 20:59:46' prior: 50829905!
test

	^req send200Response: 'test'
				 contentType: 'application/json; charset=utf-8' do: [:resp | 
					resp headerAt: 'Access-Control-Allow-Origin' put: '*'.].! !

server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 21:02:04' prior: 50829861!
initializeWith: aListeningPort

	tusLibros := TusLibrosInternalInterface withUsers: self userList withCatalog: self catalog withClock: Time withAMerchantProcessor: self merchantProcessor.
	
	port := aListeningPort .
	
	webServer := WebServer new listenOn: aListeningPort .
	
	webServer addService: '/helloWorld' action: self helloWorld.
	
	webServer addService: '/createCart' action: [:request | req := request. self test: request].
	
	! !
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/21/2019 21:02:17'!
test: request

	^request send200Response: 'test'
				 contentType: 'application/json; charset=utf-8' do: [:resp | 
					resp headerAt: 'Access-Control-Allow-Origin' put: '*'.].! !

ening .
server destroy .!

server := TusLibrosController listeningOn: 8082.!

server stopListening .!

server destroy .!

server stopListening .!

server stopListening .!

server stopListening .!

server stopListening .!

server stopListening .!

server destroy .!

TusLibrosController allInstances !

TusLibrosController allInstances do: [:e | e stopListening . e destroy ].!

server := TusLibrosController listeningOn: 8082.!

TusLibrosController allInstances do: [:e | e stopListening . e destroy ].!
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 21:05:28' prior: 50829926!
initializeWith: aListeningPort

	tusLibros := TusLibrosInternalInterface withUsers: self userList withCatalog: self catalog withClock: Time withAMerchantProcessor: self merchantProcessor.
	
	port := aListeningPort .
	
	webServer := WebServer new listenOn: aListeningPort .
	
	webServer addService: '/helloWorld' action: self helloWorld.
	
	webServer addService: '/createCart' action: [:request | req := request. self test].
	
	! !

server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 21:07:38' prior: 50829968!
initializeWith: aListeningPort

	tusLibros := TusLibrosInternalInterface withUsers: self userList withCatalog: self catalog withClock: Time withAMerchantProcessor: self merchantProcessor.
	
	port := aListeningPort .
	
	webServer := WebServer new listenOn: aListeningPort .
	
	webServer addService: '/helloWorld' action: self handleWith: #helloWorld.
	
	webServer addService: '/createCart' action: self handleWith: #createCart.
	
	! !
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/21/2019 21:09:54'!
handleWith: aSelector

	^ [:request | | response |
		req := request.
		response := self sendTo: aSelector with: request fields .
		self render: response.].! !

!methodRemoval: TusLibrosController #test stamp: 'SN 11/21/2019 21:10:19'!
test

	^req send200Response: 'test'
				 contentType: 'application/json; charset=utf-8' do: [:resp | 
					resp headerAt: 'Access-Control-Allow-Origin' put: '*'.].!

!methodRemoval: TusLibrosController #test: stamp: 'SN 11/21/2019 21:10:21'!
test: request

	^request send200Response: 'test'
				 contentType: 'application/json; charset=utf-8' do: [:resp | 
					resp headerAt: 'Access-Control-Allow-Origin' put: '*'.].!

Object subclass: #TusLibrosController
	instanceVariableNames: 'webServer port tusLibros req'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #TusLibrosController category: #TusLibros stamp: 'SN 11/21/2019 21:10:31'!
Object subclass: #TusLibrosController
	instanceVariableNames: 'webServer port tusLibros req'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/21/2019 21:10:45' prior: 50829631!
helloWorld

	^ 'Hello World!!'.! !

TusLibrosController allInstances do: [:e | e stopListening . e destroy ].!

TusLibrosController allInstances do: [:e | e stopListening . e destroy ]. server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 21:11:47' prior: 50829987!
initializeWith: aListeningPort

	tusLibros := TusLibrosInternalInterface withUsers: self userList withCatalog: self catalog withClock: Time withAMerchantProcessor: self merchantProcessor.
	
	port := aListeningPort .
	
	webServer := WebServer new listenOn: aListeningPort .
	
	webServer addService: '/helloWorld' action: (self handleWith: #helloWorld).
	
	webServer addService: '/createCart' action: (self handleWith: #createCart).
	
	! !

TusLibrosController allInstances do: [:e | e stopListening . e destroy ]. server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/21/2019 21:13:16' prior: 50830004!
handleWith: aSelector

	^ [:request | | response |
		req := request.
		response := self selector: aSelector with: request fields .
		self render: response.].! !

TusLibrosController allInstances do: [:e | e stopListening . e destroy ]. server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/21/2019 21:14:03' prior: 50830073!
handleWith: aSelector

	^ [:request | | response |
		req := request.
		response := aSelector sendTo: self with: request fields .
		self render: response.].! !

TusLibrosController allInstances do: [:e | e stopListening . e destroy ]. server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/21/2019 21:16:06'!
helloWorld: params

	^ 'Hello World!!'.! !

!methodRemoval: TusLibrosController #helloWorld stamp: 'SN 11/21/2019 21:16:09'!
helloWorld

	^ 'Hello World!!'.!

TusLibrosController allInstances do: [:e | e stopListening . e destroy ]. server := TusLibrosController listeningOn: 8082.!

TusLibrosController allInstances do: [:e | e stopListening . e destroy ]. server := TusLibrosController listeningOn: 8082.!

TusLibrosController allInstances do: [:e | e stopListening . e destroy ]. server := TusLibrosController listeningOn: 8082.!

TusLibrosController allInstances do: [:e | e stopListening . e destroy ]. server := TusLibrosController listeningOn: 8082.!

TusLibrosController allInstances do: [:e | e stopListening . e destroy ]. server := TusLibrosController listeningOn: 8082.!

TusLibrosController allInstances do: [:e | e stopListening . e destroy ]. server := TusLibrosController listeningOn: 8082.!

#isNegative sendTo: 2!

#isZero sendTo: 2!
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 21:19:20' prior: 50830052!
initializeWith: aListeningPort

	tusLibros := TusLibrosInternalInterface withUsers: self userList withCatalog: self catalog withClock: Time withAMerchantProcessor: self merchantProcessor.
	
	port := aListeningPort .
	
	webServer := WebServer new listenOn: aListeningPort .
	
	webServer addService: '/helloWorld' action: (self handleWith: #helloWorld:).
	
	webServer addService: '/createCart' action: (self handleWith: #createCart).
	
	! !

TusLibrosController allInstances do: [:e | e stopListening . e destroy ]. server := TusLibrosController listeningOn: 8082.!

TusLibrosController allInstances do: [:e | e stopListening . e destroy ]. server := TusLibrosController listeningOn: 8082.!

TusLibrosController allInstances!

TusLibrosController allInstances do: [:e | e stopListening . e destroy ]. !

TusLibrosController allInstances!

TusLibrosController allInstances do: [:e | e stopListening . e destroy ].!

TusLibrosController allInstances do: [:e | e stopListening . e destroy ].!

TusLibrosController allInstances do: [:e | e stopListening . e destroy ].!

TusLibrosController allInstances!

TusLibrosController allInstances do: [:e | e stopListening . e destroy ].!

TusLibrosController allInstances do: [:e | e stopListening . e destroy ].!

TusLibrosController allInstances do: [:e | e stopListening . e destroy ].!

TusLibrosController allInstances do: [:e | e stopListening . e destroy ].!

TusLibrosController allInstances!

TusLibrosController allInstances do: [:e | e stopListening . e destroy ].!

 server := TusLibrosController listeningOn: 8082.!

TusLibrosController allInstances do: [:e | e stopListening . e destroy ].!

TusLibrosController allInstances do: [:e | e stopListening . e destroy ].!

TusLibrosController allInstances do: [:e | e stopListening . e destroy ].!

 server := TusLibrosController listeningOn: 8082.!

TusLibrosController allInstances do: [:e | e stopListening . e destroy ].!

 server := TusLibrosController listeningOn: 8082.!

 server := TusLibrosController listeningOn: 8082.!

TusLibrosController allInstances!

TusLibrosController allInstances do: [:e | e stopListening . e destroy ].!

TusLibrosController allInstances!

TusLibrosController allInstances!

TusLibrosController allInstances do: [:e | e stopListening . e destroy ].!

1!

self at: 1!

(self at: 1) stopListening; destroy.!

(self at: 2) stopListening; destroy.!

(self at: 3) stopListening; destroy.!

TusLibrosController allInstances!

TusLibrosController allInstances do: [:e | e stopListening . e destroy ].!

self first stopListening ; destroy.!

self first stopListening ; destroy.!

TusLibrosController allInstances!

TusLibrosController allInstances do: [:e | e stopListening; destroy ].!

 server := TusLibrosController listeningOn: 8082.!

TusLibrosController allInstances.!

TusLibrosController allInstances do: [:e | e stopListening; destroy ].!

TusLibrosController allInstances.!

 server := TusLibrosController listeningOn: 8082.!

TusLibrosController allInstances.!

 server := TusLibrosController listeningOn: 8082.!

TusLibrosController allInstances.!

 server := TusLibrosController listeningOn: 8082.!

TusLibrosController allInstances.!

TusLibrosController allInstances do: [:e | e stopListening; destroy ].!

 server := TusLibrosController listeningOn: 8082.!

TusLibrosController allInstances.!

TusLibrosController allInstances do: [:e | e stopListening; destroy ].!

TusLibrosController allInstances.!

TusLibrosController allInstances.!

TusLibrosController allInstances do: [:e | e stopListening; destroy ].!

TusLibrosController allInstances do: [:e | e stopListening; destroy ].!

TusLibrosController allInstances do: [:e | e stopListening; destroy ].!

TusLibrosController allInstances do: [:e | e stopListening; destroy ].!

TusLibrosController allInstances do: [:e | e stopListening; destroy ].!

TusLibrosController allInstances do: [:e | e stopListening; destroy ].!

TusLibrosController allInstances do: [:e | e stopListening; destroy ].!

TusLibrosController allInstances.!

TusLibrosController listeningOn: 8082.!

TusLibrosController allInstances.!

TusLibrosController allInstances do: [:e | e stopListening; destroy ].!

TusLibrosController allInstances.!

TusLibrosController allInstances.!

TusLibrosController allInstances.!

TusLibrosController listeningOn: 8082.!

TusLibrosController allInstances do: [:e | e stopListening; destroy ].!
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/21/2019 21:28:40' prior: 50830086!
handleWith: aSelector

	^ [:request | | response |
		req := request.
		self render: (aSelector sendTo: self with: request fields) .].! !
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/21/2019 21:29:21' prior: 50830272!
handleWith: aSelector

	^ [ :request | | response |
		req := request.
		self render: (aSelector sendTo: self with: request fields) .
		].! !
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/21/2019 21:29:35' prior: 50830280!
handleWith: aSelector

	^ [ :request |
		| response |
		
		req := request.
		self render: (aSelector sendTo: self with: request fields) .
		].! !
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/21/2019 21:29:41' prior: 50830288!
handleWith: aSelector

	^ [ :request |
		| response |
		
		req := request.
		self render: (aSelector sendTo: self with: request fields) .
		].! !
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/21/2019 21:29:47' prior: 50830296!
handleWith: aSelector

	^ [ :request |
		| response |
		
		req := request.
		self render: (aSelector sendTo: self with: request fields) .
	].! !
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 21:30:29' prior: 50830131!
initializeWith: aListeningPort

	tusLibros := TusLibrosInternalInterface withUsers: self userList withCatalog: self catalog withClock: Time withAMerchantProcessor: self merchantProcessor.
	
	port := aListeningPort .
	
	webServer := WebServer new listenOn: aListeningPort .
	
	webServer addService: '/helloWorld' action: (self handleWith: #helloWorld:).
	
	webServer addService: '/createCart' action: (self handleWith: #createCart:).
	
	! !
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 21:30:58' prior: 50830312!
initializeWith: aListeningPort

	tusLibros := TusLibrosInternalInterface withUsers: self userList withCatalog: self catalog withClock: Time withAMerchantProcessor: self merchantProcessor.
	
	port := aListeningPort .
	
	webServer := WebServer new listenOn: aListeningPort .
	
	webServer addService: '/helloWorld' action: (self handleWith: (#helloWorld:)).
	
	webServer addService: '/createCart' action: (self handleWith: #createCart:).
	
	! !

TusLibrosController allInstances do: [:e | e stopListening; destroy ].!

TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/21/2019 21:32:46' prior: 50830304!
handleWith: aSelector

	^ [ :request |
		| response |
		
		req := request.
		self render: (aSelector sendTo: self) .
	].! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/21/2019 21:32:53'!
helloWorld

	^ 'Hello World!!'.! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/21/2019 21:33:02' prior: 50830357!
helloWorld

	req.
	^ 'Hello World!!'.! !

!methodRemoval: TusLibrosController #helloWorld: stamp: 'SN 11/21/2019 21:33:09'!
helloWorld: params

	^ 'Hello World!!'.!

TusLibrosController allInstances do: [:e | e stopListening; destroy ].!

TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 21:33:31' prior: 50830329!
initializeWith: aListeningPort

	tusLibros := TusLibrosInternalInterface withUsers: self userList withCatalog: self catalog withClock: Time withAMerchantProcessor: self merchantProcessor.
	
	port := aListeningPort .
	
	webServer := WebServer new listenOn: aListeningPort .
	
	webServer addService: '/helloWorld' action: (self handleWith: #helloWorld).
	
	webServer addService: '/createCart' action: (self handleWith: #createCart:).
	
	! !

TusLibrosController allInstances do: [:e | e stopListening; destroy ].!

TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 21:34:43' prior: 50830374!
initializeWith: aListeningPort

	tusLibros := TusLibrosInternalInterface withUsers: self userList withCatalog: self catalog withClock: Time withAMerchantProcessor: self merchantProcessor.
	
	port := aListeningPort .
	
	webServer := WebServer new listenOn: aListeningPort .
	
	webServer addService: '/helloWorld' action: (self handleWith: #helloWorld).
	
	webServer addService: '/createCart' action: (self handleWith: #createCart).
	
	! !

TusLibrosController allInstances do: [:e | e stopListening; destroy ].!

TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/21/2019 21:35:48' prior: 50829762!
render: aResponse

	^ [:request |	
		
		request send200Response: aResponse
				 contentType: 'application/json; charset=utf-8' do: [:resp |  resp headerAt: 'Access-Control-Allow-Origin' put: '*'.]
		].! !
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/21/2019 21:36:18' prior: 50830416!
render: aResponse

	^ req send200Response: aResponse
		   contentType: 'application/json; charset=utf-8' do: [:resp |  resp headerAt: 'Access-Control-Allow-Origin' put: '*'.]! !

TusLibrosController allInstances do: [:e | e stopListening; destroy ].!

TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'dispatching - private' stamp: 'SN 11/21/2019 21:38:21' prior: 50830350!
handleWith: aSelector

	^ [ :request |
		| response |
		
		req := request.
		self render: (self safeSend: aSelector ) .
	].! !
!TusLibrosController methodsFor: 'dispatching - private' stamp: 'SN 11/21/2019 21:39:22'!
safeSend: aSelector

	^ [ aSelector sendTo: self ]
	   on: 'a' do: []! !
!TusLibrosController methodsFor: 'dispatching - private' stamp: 'SN 11/21/2019 21:40:27' prior: 50830446!
safeSend: aSelector

	^ [ aSelector sendTo: self ]
	   on: Error 
	   do: [ :anError |
			req send404Response: (anError messageText) ].! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/21/2019 21:40:56' prior: 50830362!
helloWorld

	req balal.
	^ 'Hello World!!'.! !

TusLibrosController allInstances do: [:e | e stopListening; destroy ].!

TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/21/2019 21:41:24' prior: 50830460!
helloWorld

	^ 'Hello World!!'.! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/21/2019 21:41:32' prior: 50830469!
helloWorld

	req fields.
	^ 'Hello World!!'.! !

TusLibrosController allInstances do: [:e | e stopListening; destroy ].!

TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/21/2019 21:41:46' prior: 50830474!
helloWorld

	^ 'Hello World!!'.! !
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 21:46:49' prior: 50830395!
initializeWith: aListeningPort

	tusLibros := TusLibrosInternalInterface withUsers: self userList withCatalog: self catalog withClock: Time withAMerchantProcessor: self merchantProcessor.
	
	port := aListeningPort .
	
	webServer := WebServer new listenOn: aListeningPort .
	
	webServer addService: '/helloWorld' action: (self handleWith: #helloWorld).
	
	webServer addService: '/createCart' action: (self handleWith: #createCart).

	webServer addService: '/createCart' action: (self handleWith: #catalog).	
	! !
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 21:46:57' prior: 50830488!
initializeWith: aListeningPort

	tusLibros := TusLibrosInternalInterface withUsers: self userList withCatalog: self catalog withClock: Time withAMerchantProcessor: self merchantProcessor.
	
	port := aListeningPort .
	
	webServer := WebServer new listenOn: aListeningPort .
	
	webServer addService: '/helloWorld' action: (self handleWith: #helloWorld).
	
	webServer addService: '/createCart' action: (self handleWith: #createCart).

	webServer addService: '/catalog' action: (self handleWith: #catalog).	
	! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/21/2019 21:47:25' prior: 50829734!
catalog

	^ WebUtils jsonEncode: self catalog .! !

TusLibrosController allInstances do: [:e | e stopListening; destroy ].!

TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 21:50:03' prior: 50830508!
initializeWith: aListeningPort

	tusLibros := TusLibrosInternalInterface withUsers: self userList withCatalog: self catalog withClock: Time withAMerchantProcessor: self merchantProcessor.
	
	port := aListeningPort .
	
	webServer := WebServer new listenOn: aListeningPort .
	
	webServer addService: '/helloWorld' action: (self handleWith: #helloWorld).
	
	webServer addService: '/createCart' action: (self handleWith: #createCart).

	webServer addService: '/getCatalog' action: (self handleWith: #getCatalog).	
	! !
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 21:50:30'!
getCatalog

	^ WebUtils jsonEncode: self catalog .! !
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/21/2019 21:51:22' prior: 50830528!
catalog

	^Dictionary new at: '9789500763035' put: 3020;
					   at: '0201558025' put: 260;
					   yourself.! !

TusLibrosController allInstances do: [:e | e stopListening; destroy ].!

TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/21/2019 21:56:26' prior: 50830556!
getCatalog

	^ WebUtils jsonEncode: (self catalog keysAndValuesDo: [:isbn :price | Dictionary new at: isbn put: price]).! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/21/2019 21:57:02' prior: 50830572!
getCatalog

	^ WebUtils jsonEncode: (self catalog keysAndValuesDo: [:isbn :price | Dictionary new at: 'isbn' put: isbn; at: 'price' put: price]).! !

TusLibrosController allInstances do: [:e | e stopListening; destroy ].!

TusLibrosController listeningOn: 8082.!

TusLibrosController allInstances do: [:e | e stopListening; destroy ].!

TusLibrosController allInstances.!

TusLibrosController allInstances do: [:e | e stopListening; destroy ].!

TusLibrosController allInstances do: [:e | e stopListening; destroy ].!

TusLibrosController allInstances.!

(self at: 1) stopListening ; destroy.!

(self at: 2) stopListening ; destroy.!

(self at: 3) stopListening ; destroy.!

(self at: 4) stopListening ; destroy.!

TusLibrosController allInstances.!

TusLibrosController allInstances do: [:e | e stopListening; destroy ].!

TusLibrosController listeningOn: 8082.!

TusLibrosController allInstances.!

TusLibrosController allInstances do: [:e | e stopListening; destroy ].!

TusLibrosController allInstances.!

(self at: 1) stopListener !

(self at: 1) destroy !

(self at: 2) stopListener !

(self at: 2) destroy !

(self at: 3) stopListener !

(self at: 3) destroy !

TusLibrosController listeningOn: 8082.!

TusLibrosController allInstances do: [:e | e stopListening; destroy ].!

TusLibrosController allInstances.!

TusLibrosController allInstances do: [:e | e destroy ].!

TusLibrosController allInstances.!

TusLibrosController allInstances do: [:e | e stopListening; destroy ].!

TusLibrosController allInstances do: [:e | [e stopListening; destroy] on: Error do: [e destroy ]].!

TusLibrosController allInstances do: [:e | [e stopListening; destroy] on: Error do: [e destroy ]].!

TusLibrosController allInstances do: [:e | [e stopListening; destroy] on: Error do: [e destroy ]].!

TusLibrosController allInstances do: [:e | [e stopListening; destroy] on: Error do: [e destroy ]].!

TusLibrosController allInstances.!

TusLibrosController allInstances.!

----STARTUP---- (22 November 2019 17:21:51) as /home/snahmod/Documentos/UBA/2019/Segundo Cuatrimestre/Ingsoft I/cuis-nuevo/CuisUniversity-3938.image!


server := TusLibrosController listeningOn: 8082.!

!classRemoval: #TusLibrosInternalInterface stamp: 'SN 11/22/2019 17:22:51'!
Object subclass: #TusLibrosInternalInterface
	instanceVariableNames: 'userRegistry carts catalog lastCartID clock salesBooks merchantProcessor purchases'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #TusLibrosController stamp: 'SN 11/22/2019 17:22:51'!
Object subclass: #TusLibrosController
	instanceVariableNames: 'webServer port tusLibros'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #StoreTestObjectsFactory stamp: 'SN 11/22/2019 17:22:52'!
Object subclass: #StoreTestObjectsFactory
	instanceVariableNames: 'today'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #Sale stamp: 'SN 11/22/2019 17:22:52'!
Object subclass: #Sale
	instanceVariableNames: 'total items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CreditCard stamp: 'SN 11/22/2019 17:22:53'!
Object subclass: #CreditCard
	instanceVariableNames: 'expiration number name'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #Cashier stamp: 'SN 11/22/2019 17:22:53'!
Object subclass: #Cashier
	instanceVariableNames: 'cart salesBook merchantProcessor creditCard total'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CartInterface stamp: 'SN 11/22/2019 17:22:53'!
Object subclass: #CartInterface
	instanceVariableNames: 'catalog items cart timeLastModified clock userID'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #Cart stamp: 'SN 11/22/2019 17:22:54'!
Object subclass: #Cart
	instanceVariableNames: 'catalog items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #TusLibrosInternalInterfaceTest stamp: 'SN 11/22/2019 17:22:54'!
TestCase subclass: #TusLibrosInternalInterfaceTest
	instanceVariableNames: 'edenUser edenPassword userRegistry factory stubbedTime debitBehavior santiUser santiPassword emptyUserRegistry'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CashierTest stamp: 'SN 11/22/2019 17:22:55'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'testObjectsFactory debitBehavior'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CartTest stamp: 'SN 11/22/2019 17:22:55'!
TestCase subclass: #CartTest
	instanceVariableNames: 'testObjectsFactory'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

----End fileIn of /home/snahmod/Documentos/UBA/2019/Segundo Cuatrimestre/Ingsoft I/cuis-nuevo/TusLibros.st----!

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

TusLibrosController allInstances .!

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

TusLibrosController allInstances .!

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

TusLibrosController allInstances .!

TusLibrosController allInstances .!

(self at: 1) stopListener !

(self at: 1) destroy !

TusLibrosController allInstances .!

(self at: 1)!

webServer destroy !

webServer stopListener !

TusLibrosController allInstances .!

TusLibrosController allInstances .!

(TusLibrosController allInstances at: 1) stopListening !

(TusLibrosController allInstances at: 1) stopListening.!

(TusLibrosController allInstances at: 1) stopListening.!

(TusLibrosController allInstances at: 1) stopListening.!

(TusLibrosController allInstances at: 1) stopListening.!

(TusLibrosController allInstances at: 1) stopListening.!

(TusLibrosController allInstances at: 1) stopListening.!

(TusLibrosController allInstances at: 1) stopListening.!

(TusLibrosController allInstances at: 1) destroy .!

(TusLibrosController allInstances at: 1) destroy .!

(TusLibrosController allInstances at: 1) destroy .!

(TusLibrosController allInstances at: 1) destroy .!

(TusLibrosController allInstances at: 1) destroy .!

(TusLibrosController allInstances at: 1) destroy .!

(TusLibrosController allInstances at: 1) destroy .!

(TusLibrosController allInstances at: 1) destroy .!

(TusLibrosController allInstances at: 1) destroy .!

(TusLibrosController allInstances at: 1) destroy .!

(TusLibrosController allInstances at: 1) destroy .!

WebServer allInstances !

WebServer allInstancesDo: [:e | e stopListening; destroy].!

WebServer allInstancesDo: [:e | [e stopListening; destroy] on: Error do: [e destroy ]].!

WebServer allInstances !

server := TusLibrosController listeningOn: 8082.!

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/22/2019 17:36:35' prior: 50831463!
getCatalog

	^ WebUtils jsonEncode: (self catalog associations collect: [:e | Dictionary new at: 'isbn' put: e key; at: 'price' put: e value]).! !

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/22/2019 17:38:02' prior: 50831767!
getCatalog

	^ WebUtils jsonEncode: (self catalog associations collect: [:e | Dictionary new at: 'isbn' put: e key]).! !

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/22/2019 17:38:23' prior: 50831779!
getCatalog

	^ WebUtils jsonEncode: (self catalog associations collect: [:e | Dictionary new at: 'isbn' put: e key; at: 'price' put: e value]).! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/22/2019 17:38:35' prior: 50831790!
getCatalog

	^ WebUtils jsonEncode: (self catalog associations collect: [:e | Dictionary new at: 'isbn' put: e key; at: 'price' put: e value; yourself ]).! !

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!

----SNAPSHOT----(22 November 2019 17:39:00) CuisUniversity-3938.image priorSource: 15938917!
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 19:03:26'!
createCart

	! !
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/23/2019 19:06:22'!
successResponse

	^ WebUtils jsonEncode: (Dictionary new at: 'message' put: 'success').! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 19:07:50' prior: 50831813!
createCart

	tusLibros createCartFor: req fields withPassword: req fields .! !
!TusLibrosController methodsFor: 'dispatching - private' stamp: 'SN 11/23/2019 19:11:40' prior: 50831491!
safeSend: aSelector

	^ [ aSelector sendTo: self ]
	   on: Error 
	   do: [ :anError |
			req send404Response: (anError messageText) ].! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 19:18:03' prior: 50831824!
createCart

	| password userID |
	userID := self requireParam: 'userID' ifAbsent: self badRequestResponse.
	password := self requireParam: 'password' ifAbsent: self badRequestResponse.

	tusLibros createCartFor: req fields withPassword: req fields .! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 19:18:40' prior: 50831838!
createCart

	| password userID |

	userID := self requireParam: 'userID' ifAbsent: self badRequestResponse.
	password := self requireParam: 'password' ifAbsent: self badRequestResponse.

	tusLibros createCartFor: userID withPassword: password .
	^ self successResponse .! !
!TusLibrosController methodsFor: 'params management - private' stamp: 'SN 11/23/2019 19:20:05'!
requireParam: aString ifAbsent: aClosure

	req! !

!methodRemoval: TusLibrosController #requireParam:ifAbsent: stamp: 'SN 11/23/2019 19:20:10'!
requireParam: aString ifAbsent: aClosure

	req!
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 19:20:38' prior: 50831850!
createCart

	| password userID |

	userID := req fields at: 'userID' ifAbsent: self badRequestResponse.
	password := req fields at: 'password' ifAbsent: self badRequestResponse.

	tusLibros createCartFor: userID withPassword: password .
	^ self successResponse .! !
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/23/2019 19:21:19'!
badRequestResponse

	^0! !
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/23/2019 19:22:51' prior: 50831884!
badRequestResponse

	^ req send200Response: (WebUtils jsonEncode: (Dictionary new at: 'message' put: 'Bad Request'; yourself))
		   contentType: 'application/json; charset=utf-8' do: [:resp |  resp headerAt: 'Access-Control-Allow-Origin' put: '*'.]! !
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/23/2019 19:23:46' prior: 50831889!
badRequestResponse

	^ req send400Response! !
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/23/2019 19:24:04' prior: 50831901!
badRequestResponse

	^ [ ^ req send400Response. ]! !
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/23/2019 19:24:33' prior: 50831817!
successResponse

	^ WebUtils jsonEncode: (Dictionary new at: 'message' put: 'success'; yourself ).! !

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 19:29:15' prior: 50831872!
createCart

	| password userID cartID |

	userID := req fields at: 'userID' ifAbsent: self badRequestResponse.
	password := req fields at: 'password' ifAbsent: self badRequestResponse.

	cartID := tusLibros createCartFor: userID withPassword: password .
	^ self jsonSimpleResponseWithKey: 'cartID' value:  cartID.! !
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/23/2019 19:30:14'!
jsonSimpleResponseWithKey: aKey value: aValue

	^ WebUtils jsonEncode: (Dictionary new at: aKey put: aValue; yourself )! !
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/23/2019 19:30:45' prior: 50831911!
successResponse

	^ self jsonSimpleResponseWithKey: 'message' value: 'success'.! !

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/23/2019 19:32:54' prior: 50831428!
initializeWith: aListeningPort

	tusLibros := TusLibrosInternalInterface withUsers: self userList withCatalog: self catalog withClock: Time withAMerchantProcessor: self merchantProcessor.
	
	port := aListeningPort .
	
	webServer := WebServer new listenOn: aListeningPort .
	
	webServer addService: '/helloWorld' action: (self handleWith: #helloWorld).
	webServer addService: '/createCart' action: (self handleWith: #createCart).
	webServer addService: '/getCatalog' action: (self handleWith: #getCatalog).
	webServer addService: '/addToCart' action: (self handleWith: #addToCart).
	! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 19:33:05'!
addToCart

	! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 19:34:42' prior: 50831975!
addToCart

	
	| bookISBN cartID quantity |
	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	bookISBN := req fields at: 'bookISBN' ifAbsent: self badRequestResponse.
	quantity := req fields at: 'quantity' ifAbsent: self badRequestResponse.
	
	tusLibros addToCart: cartID item: bookISBN withQuantity: quantity.! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 19:34:57' prior: 50831979!
addToCart
	
	| bookISBN cartID quantity |

	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	bookISBN := req fields at: 'bookISBN' ifAbsent: self badRequestResponse.
	quantity := req fields at: 'quantity' ifAbsent: self badRequestResponse.
	
	tusLibros addToCart: cartID item: bookISBN withQuantity: quantity.
	^ self successResponse .! !
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/23/2019 19:35:40' prior: 50831953!
initializeWith: aListeningPort

	tusLibros := TusLibrosInternalInterface withUsers: self userList withCatalog: self catalog withClock: Time withAMerchantProcessor: self merchantProcessor.
	
	port := aListeningPort .
	
	webServer := WebServer new listenOn: aListeningPort .
	
	webServer addService: '/helloWorld' action: (self handleWith: #helloWorld).
	webServer addService: '/createCart' action: (self handleWith: #createCart).
	webServer addService: '/getCatalog' action: (self handleWith: #getCatalog).
	webServer addService: '/addToCart' action: (self handleWith: #addToCart).
	webServer addService: '/listCart' action: (self handleWith: #listCart).	! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 19:36:34'!
listCart

	
	| cartID |
	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	
	! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 19:37:21' prior: 50832032!
listCart

	| cartID items |

	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	
	items := tusLibros listCart: cartID .
	! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 19:51:37' prior: 50832039!
listCart

	| cartID items |

	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	
	items := tusLibros listCart: cartID .
	^ WebUtils jsonEncode: (items asSet collect: [:e | Dictionary new at: 'isbn' put: e key; at: 'price' put: e value; yourself ]).! !

(OrderedCollection with: 1 with: 2 with: 1) asSet !

(OrderedCollection with: 1 with: 2 with: 1) !

(OrderedCollection with: 1 with: 2 with: 1) occurrencesOf: 2!

(OrderedCollection with: 1 with: 2 with: 1) occurrencesOf: 1!
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 19:54:28' prior: 50832047!
listCart

	| cartID items |

	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	
	items := tusLibros listCart: cartID .
	^ WebUtils jsonEncode: (items asSet collect: [:item | Dictionary new at: 'isbn' put: item; at: 'quantity' put: (items occurrencesOf: item) ; yourself ]).! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 19:56:39' prior: 50832066!
listCart

	| cartID items itemsResponse |

	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	
	items := tusLibros listCart: cartID .
	itemsResponse := items asSet collect: [:item | Dictionary new at: 'isbn' put: item; at: 'quantity' put: (items occurrencesOf: item) ; yourself ].
	^ WebUtils jsonEncode: (Dictionary new at: 'items' put: itemsResponse; at: 'total_amount' put: items size; yourself ).! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 19:56:49' prior: 50832079!
listCart

	| cartID items itemsResponse |

	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	
	items := tusLibros listCart: cartID .

	itemsResponse := items asSet collect: [:item | Dictionary new at: 'isbn' put: item; at: 'quantity' put: (items occurrencesOf: item) ; yourself ].
	^ WebUtils jsonEncode: (Dictionary new at: 'items' put: itemsResponse; at: 'total_amount' put: items size; yourself ).! !

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 19:58:37' prior: 50832096!
listCart

	| cartID items itemsResponse |

	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	
	items := tusLibros listCart: cartID asInteger .

	itemsResponse := items asSet collect: [:item | Dictionary new at: 'isbn' put: item; at: 'quantity' put: (items occurrencesOf: item) ; yourself ].
	^ WebUtils jsonEncode: (Dictionary new at: 'items' put: itemsResponse; at: 'total_amount' put: items size; yourself ).! !

server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 20:00:47' prior: 50832119!
listCart

	| cartID items itemsResponse |

	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	
	items := tusLibros listCart: cartID asInteger .

	itemsResponse := items asSet collect: [:item | Dictionary new at: 'isbn' put: item; at: 'quantity' put: (items occurrencesOf: item) ; yourself ].
	^ WebUtils jsonEncode: itemsResponse .! !

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 20:01:53' prior: 50832138!
listCart

	| cartID items itemsResponse |

	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	
	items := tusLibros listCart: cartID asInteger .

	itemsResponse := items asSet collect: [:item | Dictionary new at: 'isbn' put: item; at: 'quantity' put: (items occurrencesOf: item) ; yourself ].
	^ WebUtils jsonEncode: (Dictionary new at: 'items' put: itemsResponse; at: 'total_amount' put: items size; yourself ) .! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 20:02:38' prior: 50832157!
listCart

	| cartID items itemsResponse |

	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	
	items := tusLibros listCart: cartID asInteger .

	itemsResponse := items asSet collect: [:item | Dictionary new at: 'isbn' put: item; at: 'quantity' put: (items occurrencesOf: item) ; yourself ].
	^ WebUtils jsonEncode: (Dictionary new at: 'items' put: itemsResponse asArray ; at: 'total_amount' put: items size; yourself ) .! !

(OrderedCollection with: 1 with: 2 with: 1) uniqueInstance !

(OrderedCollection with: 1 with: 2 with: 1) asSet asOrderedCollection !

(OrderedCollection with: 1 with: 2 with: 1) asSet asArray !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 20:04:58' prior: 50832174!
listCart

	| cartID items itemsResponse |

	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	
	items := tusLibros listCart: cartID asInteger .

	itemsResponse := items asSet asOrderedCollection collect: [:item | Dictionary new at: 'isbn' put: item; at: 'quantity' put: (items occurrencesOf: item) ; yourself ].
	^ WebUtils jsonEncode: (Dictionary new at: 'items' put: itemsResponse ; at: 'total_amount' put: items size; yourself ) .! !

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 20:08:45' prior: 50832198!
listCart

	| cartID items itemsResponse |

	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	
	items := tusLibros listCart: cartID asInteger .

	itemsResponse := items asSet asArray collect: [:item | Dictionary new at: 'isbn' put: item; at: 'quantity' put: (items occurrencesOf: item) ; yourself ].
	^ WebUtils jsonEncode: (Dictionary new at: 'items' put: itemsResponse ; at: 'total_amount' put: items size; yourself ) .! !

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 20:10:42' prior: 50831993!
addToCart
	
	| bookISBN cartID quantity |

	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	bookISBN := req fields at: 'isbn' ifAbsent: self badRequestResponse.
	quantity := req fields at: 'quantity' ifAbsent: self badRequestResponse.
	
	tusLibros addToCart: cartID item: bookISBN withQuantity: quantity.
	^ self successResponse .! !

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 20:12:07' prior: 50832241!
addToCart
	
	| bookISBN cartID quantity |

	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	bookISBN := req fields at: 'isbn' ifAbsent: self badRequestResponse.
	quantity := req fields at: 'quantity' ifAbsent: self badRequestResponse.
	
	tusLibros addToCart: cartID asInteger item: bookISBN withQuantity: quantity.
	^ self successResponse .! !

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 20:18:23' prior: 50832260!
addToCart
	
	| bookISBN cartID quantity |

	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	bookISBN := req fields at: 'isbn' ifAbsent: self badRequestResponse.
	quantity := req fields at: 'quantity' ifAbsent: self badRequestResponse.
	
	tusLibros addToCart: cartID asInteger item: bookISBN withQuantity: quantity asInteger .
	^ self successResponse .! !

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/23/2019 20:24:09' prior: 50832008!
initializeWith: aListeningPort

	tusLibros := TusLibrosInternalInterface withUsers: self userList withCatalog: self catalog withClock: Time withAMerchantProcessor: self merchantProcessor.
	
	port := aListeningPort .
	
	webServer := WebServer new listenOn: aListeningPort .
	
	webServer addService: '/helloWorld' action: (self handleWith: #helloWorld).
	webServer addService: '/createCart' action: (self handleWith: #createCart).
	webServer addService: '/getCatalog' action: (self handleWith: #getCatalog).
	webServer addService: '/addToCart' action: (self handleWith: #addToCart).
	webServer addService: '/listCart' action: (self handleWith: #listCart).
	webServer addService: '/checkoutCart' action: (self handleWith: #checkoutCart).	! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 20:32:04'!
checkoutCart

	
	| cartID items |
	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	
	items := tusLibros checkoutCart: cartID asInteger withCreditCardNumber: '4444444444444444' withCreditCardName: 'Eden Torres' withExpritationDate: 1 on: 1! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 20:32:20' prior: 50832324!
checkoutCart

	| cartID items |
	
	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	
	items := tusLibros checkoutCart: cartID asInteger withCreditCardNumber: '4444444444444444' withCreditCardName: 'Eden Torres' withExpritationDate: 1 on: 1! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 20:34:31' prior: 50832336!
checkoutCart

	| cartID items |
	
	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	
	items := tusLibros checkoutCart: cartID asInteger withCreditCardNumber: '4444444444444444' withCreditCardName: 'Eden Torres' withExpritationDate: 1 on: 1! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 20:35:48' prior: 50832348!
checkoutCart

	| cartID items cardExpiration |
	
	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	
	cardExpiration := (Month month: DateAndTime now monthIndex year: DateAndTime now yearNumber + 1).
	items := tusLibros checkoutCart: cartID asInteger withCreditCardNumber: '4444444444444444' withCreditCardName: 'Eden Torres' withExpritationDate: 1 on: 1! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 20:36:17' prior: 50832360!
checkoutCart

	| cartID items cardExpiration |
	
	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	
	cardExpiration := (Month month: DateAndTime now monthIndex year: DateAndTime now yearNumber + 1).
	items := tusLibros checkoutCart: cartID asInteger withCreditCardNumber: '4444444444444444' withCreditCardName: 'Eden Torres' withExpritationDate: cardExpiration on: DateAndTime now.! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 20:36:28' prior: 50832376!
checkoutCart

	| cartID items cardExpiration |
	
	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	
	cardExpiration := (Month month: DateAndTime now monthIndex year: DateAndTime now yearNumber + 1).
	items := tusLibros checkoutCart: cartID asInteger withCreditCardNumber: '4444444444444444' withCreditCardName: 'Eden Torres' withExpritationDate: cardExpiration on: DateAndTime now.
	
	! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 20:37:00' prior: 50832392!
checkoutCart

	| cartID items cardExpiration itemsResponse |
	
	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	
	cardExpiration := (Month month: DateAndTime now monthIndex year: DateAndTime now yearNumber + 1).
	items := tusLibros checkoutCart: cartID asInteger withCreditCardNumber: '4444444444444444' withCreditCardName: 'Eden Torres' withExpritationDate: cardExpiration on: DateAndTime now.
	
	itemsResponse := items asSet asArray collect: [:item | Dictionary new at: 'isbn' put: item; at: 'quantity' put: (items occurrencesOf: item) ; yourself ].
	^ WebUtils jsonEncode: (Dictionary new at: 'items' put: itemsResponse ; at: 'total_amount' put: items size; yourself ) .! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 20:38:16' prior: 50832409!
checkoutCart

	| cartID items cardExpiration itemsResponse ticket |
	
	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	
	cardExpiration := (Month month: DateAndTime now monthIndex year: DateAndTime now yearNumber + 1).
	ticket := tusLibros checkoutCart: cartID asInteger withCreditCardNumber: '4444444444444444' withCreditCardName: 'Eden Torres' withExpritationDate: cardExpiration on: DateAndTime now.
	items := ticket first.
	
	itemsResponse := items asSet asArray collect: [:item | Dictionary new at: 'isbn' put: item; at: 'quantity' put: (items occurrencesOf: item) ; yourself ].
	^ WebUtils jsonEncode: (Dictionary new at: 'items' put: itemsResponse ; at: 'total_amount' put: items size; yourself ) .! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 20:39:45' prior: 50832435!
checkoutCart

	| cartID items cardExpiration itemsResponse ticket |
	
	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	
	cardExpiration := (Month month: DateAndTime now monthIndex year: DateAndTime now yearNumber + 1).
	ticket := tusLibros checkoutCart: cartID asInteger withCreditCardNumber: '4444444444444444' withCreditCardName: 'Eden Torres' withExpritationDate: cardExpiration on: DateAndTime now.
	items := ticket first.
	
	itemsResponse := items asSet asArray collect: [:item | Dictionary new at: 'isbn' put: item; at: 'quantity' put: (items occurrencesOf: item); at: 'price' put: (self catalog at: item); yourself ].
	^ WebUtils jsonEncode: (Dictionary new at: 'items' put: itemsResponse ; at: 'total_amount' put: items size; yourself ) .! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 20:40:38' prior: 50832220!
listCart

	| cartID items itemsResponse |

	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	
	items := tusLibros listCart: cartID asInteger .

	itemsResponse := items asSet asArray collect: [:item | Dictionary new at: 'isbn' put: item; at: 'quantity' put: (items occurrencesOf: item) ; yourself ].
	^ WebUtils jsonEncode: (Dictionary new at: 'items' put: itemsResponse ; at: 'total_quantity' put: items size; yourself ) .! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 20:40:51' prior: 50832462!
checkoutCart

	| cartID items cardExpiration itemsResponse ticket |
	
	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	
	cardExpiration := (Month month: DateAndTime now monthIndex year: DateAndTime now yearNumber + 1).
	ticket := tusLibros checkoutCart: cartID asInteger withCreditCardNumber: '4444444444444444' withCreditCardName: 'Eden Torres' withExpritationDate: cardExpiration on: DateAndTime now.
	items := ticket first.
	
	itemsResponse := items asSet asArray collect: [:item | Dictionary new at: 'isbn' put: item; at: 'quantity' put: (items occurrencesOf: item); at: 'price' put: (self catalog at: item); yourself ].
	^ WebUtils jsonEncode: (Dictionary new at: 'items' put: itemsResponse ; at: 'total_amount' put: ticket second; yourself ) .! !

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/23/2019 20:43:36' prior: 50832508!
checkoutCart

	| cartID items cardExpiration itemsResponse ticket |
	
	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	
	cardExpiration := Month month: DateAndTime now monthIndex year: DateAndTime now yearNumber + 1.
	ticket := tusLibros checkoutCart: cartID asInteger withCreditCardNumber: '4444444444444444' withCreditCardName: 'Eden Torres' withExpritationDate: cardExpiration on: DateAndTime now.
	items := ticket first.
	
	itemsResponse := items asSet asArray collect: [:item | Dictionary new at: 'isbn' put: item; at: 'quantity' put: (items occurrencesOf: item); at: 'price' put: (self catalog at: item); yourself ].
	^ WebUtils jsonEncode: (Dictionary new at: 'items' put: itemsResponse ; at: 'total_amount' put: ticket second; yourself ) .! !

Object subclass: #MerchantProcessorStub
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #MerchantProcessorStub category: #TusLibros stamp: 'SN 11/23/2019 20:47:17'!
Object subclass: #MerchantProcessorStub
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!MerchantProcessorStub methodsFor: 'merchant processor protocol' stamp: 'SN 11/23/2019 20:47:53'!
debit: aValue from: aCard
! !
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/23/2019 20:48:11' prior: 50831447!
merchantProcessor

	^ MerchantProcessorStub new.! !

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

----SNAPSHOT----(23 November 2019 20:49:39) CuisUniversity-3938.image priorSource: 16005079!
!TusLibrosController methodsFor: 'dispatching - private' stamp: 'SN 11/24/2019 16:45:43' prior: 50831484!
handleWith: aSelector

	^ [ :request |
		| response |
		
		req := request.
		self safeSend: aSelector.
	].! !
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/24/2019 16:46:39' prior: 50831943!
successResponse

	^ self render: (self jsonSimpleResponseWithKey: 'message' value: 'success').! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/24/2019 16:46:59' prior: 50832540!
checkoutCart

	| cartID items cardExpiration itemsResponse ticket |
	
	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	
	cardExpiration := Month month: DateAndTime now monthIndex year: DateAndTime now yearNumber + 1.
	ticket := tusLibros checkoutCart: cartID asInteger withCreditCardNumber: '4444444444444444' withCreditCardName: 'Eden Torres' withExpritationDate: cardExpiration on: DateAndTime now.
	items := ticket first.
	
	itemsResponse := items asSet asArray collect: [:item | Dictionary new at: 'isbn' put: item; at: 'quantity' put: (items occurrencesOf: item); at: 'price' put: (self catalog at: item); yourself ].
	^ self render: (WebUtils jsonEncode: (Dictionary new at: 'items' put: itemsResponse ; at: 'total_amount' put: ticket second; yourself )).! !
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/24/2019 16:47:52' prior: 50832605!
successResponse

	^ self jsonSimpleResponseWithKey: 'message' value: 'success'.! !
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/24/2019 16:48:00' prior: 50831935!
jsonSimpleResponseWithKey: aKey value: aValue

	^ self render: (WebUtils jsonEncode: (Dictionary new at: aKey put: aValue; yourself )).! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/24/2019 16:48:19' prior: 50831798!
getCatalog

	^ self render: (WebUtils jsonEncode: (self catalog associations collect: [:e | Dictionary new at: 'isbn' put: e key; at: 'price' put: e value; yourself ])).! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/24/2019 16:48:36' prior: 50832654!
getCatalog

	^ self render: (WebUtils jsonEncode: (self catalog associations collect: [:item | Dictionary new at: 'isbn' put: item key; at: 'price' put: item value; yourself ])).! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/24/2019 16:48:50' prior: 50831471!
helloWorld

	^ self render: 'Hello World!!'.! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/24/2019 16:49:01' prior: 50832490!
listCart

	| cartID items itemsResponse |

	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	
	items := tusLibros listCart: cartID asInteger .

	itemsResponse := items asSet asArray collect: [:item | Dictionary new at: 'isbn' put: item; at: 'quantity' put: (items occurrencesOf: item) ; yourself ].
	^ self render: (WebUtils jsonEncode: (Dictionary new at: 'items' put: itemsResponse ; at: 'total_quantity' put: items size; yourself )) .! !

WebServer allInstances.!

WebServer allInstances.!

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/24/2019 16:52:21' prior: 50831475!
render: aResponse

	^ req send200Response: aResponse
		   contentType: 'application/json; charset=utf-8'
		   do: [:resp |  resp headerAt: 'Access-Control-Allow-Origin' put: '*'.]! !

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/24/2019 16:58:26' prior: 50832298!
initializeWith: aListeningPort

	tusLibros := TusLibrosInternalInterface withUsers: self userList withCatalog: self catalog withClock: Time withAMerchantProcessor: self merchantProcessor.
	
	port := aListeningPort .
	
	webServer := WebServer new listenOn: aListeningPort .
	
	webServer addService: '/helloWorld' action: (self handleWith: #helloWorld).
	webServer addService: '/createCart' action: (self handleWith: #createCart).
	webServer addService: '/getCatalog' action: (self handleWith: #getCatalog).
	webServer addService: '/addToCart' action: (self handleWith: #addToCart).
	webServer addService: '/listCart' action: (self handleWith: #listCart).
	webServer addService: '/checkoutCart' action: (self handleWith: #checkoutCart).	
	webServer addService: '/a' action: [:r | r send400Response ]! !
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/24/2019 16:58:31' prior: 50832714!
initializeWith: aListeningPort

	tusLibros := TusLibrosInternalInterface withUsers: self userList withCatalog: self catalog withClock: Time withAMerchantProcessor: self merchantProcessor.
	
	port := aListeningPort .
	
	webServer := WebServer new listenOn: aListeningPort .
	
	webServer addService: '/helloWorld' action: (self handleWith: #helloWorld).
	webServer addService: '/createCart' action: (self handleWith: #createCart).
	webServer addService: '/getCatalog' action: (self handleWith: #getCatalog).
	webServer addService: '/addToCart' action: (self handleWith: #addToCart).
	webServer addService: '/listCart' action: (self handleWith: #listCart).
	webServer addService: '/checkoutCart' action: (self handleWith: #checkoutCart).	
	webServer addService: '/a' action: [:r | r send400Response ].! !

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/24/2019 16:59:30' prior: 50832743!
initializeWith: aListeningPort

	tusLibros := TusLibrosInternalInterface withUsers: self userList withCatalog: self catalog withClock: Time withAMerchantProcessor: self merchantProcessor.
	
	port := aListeningPort .
	
	webServer := WebServer new listenOn: aListeningPort .
	
	webServer addService: '/helloWorld' action: (self handleWith: #helloWorld).
	webServer addService: '/createCart' action: (self handleWith: #createCart).
	webServer addService: '/getCatalog' action: (self handleWith: #getCatalog).
	webServer addService: '/addToCart' action: (self handleWith: #addToCart).
	webServer addService: '/listCart' action: (self handleWith: #listCart).
	webServer addService: '/checkoutCart' action: (self handleWith: #checkoutCart).
	webServer addService: '/listPurchases' action: (self handleWith: #listPurchases).! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/24/2019 17:02:58'!
listPurchases

	! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/24/2019 17:03:43' prior: 50832804!
listPurchases

	| password userID |

	userID := req fields at: 'userID' ifAbsent: self badRequestResponse.
	password := req fields at: 'password' ifAbsent: self badRequestResponse.
	
	tusLibros listPurchaseFor: userID withPassword: password .! !
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/24/2019 17:05:54'!
listItems: aTicket

	| items itemsResponse |
	items := aTicket first.
	
	itemsResponse := items asSet asArray collect: [:item | Dictionary new at: 'isbn' put: item; at: 'quantity' put: (items occurrencesOf: item); at: 'price' put: (self catalog at: item); yourself ].
	^ self render: (WebUtils jsonEncode: (Dictionary new at: 'items' put: itemsResponse ; at: 'total_amount' put: aTicket second; yourself )).! !
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/24/2019 17:06:36' prior: 50832819!
listItems: aTicket

	| items itemsResponse |

	items := aTicket first.
	
	itemsResponse := items asSet asArray collect: [:item | Dictionary new at: 'isbn' put: item; at: 'quantity' put: (items occurrencesOf: item); at: 'price' put: (self catalog at: item); yourself ].
	^ self render: (WebUtils jsonEncode: (Dictionary new at: 'items' put: itemsResponse ; at: 'total_amount' put: aTicket second; yourself )).! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/24/2019 17:07:01' prior: 50832612!
checkoutCart

	| cartID cardExpiration ticket |
	
	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	
	cardExpiration := Month month: DateAndTime now monthIndex year: DateAndTime now yearNumber + 1.
	ticket := tusLibros checkoutCart: cartID asInteger withCreditCardNumber: '4444444444444444' withCreditCardName: 'Eden Torres' withExpritationDate: cardExpiration on: DateAndTime now.
	
	^ self listItems: ticket .! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/24/2019 17:09:00' prior: 50832808!
listPurchases

	| password userID purchases |

	userID := req fields at: 'userID' ifAbsent: self badRequestResponse.
	password := req fields at: 'password' ifAbsent: self badRequestResponse.
	
	purchases := tusLibros listPurchaseFor: userID withPassword: password .
	^ self listItems: purchases.! !

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'SN 11/24/2019 17:32:42'!
test34RemoveFromCartRaisesErrorWhenCartIDDoesNotExist

	| interface |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
		
	self should: [interface removeFromCart: 'INVALID CART ID' item: factory itemSellByTheStore]
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'CartID inválido'.
		
	self assert: interface carts isEmpty.! !

!testRun: #TusLibrosInternalInterfaceTest #test34RemoveFromCartRaisesErrorWhenCartIDDoesNotExist stamp: 'SN 11/24/2019 17:32:45'!
ERROR!
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'SN 11/24/2019 17:33:02'!
removeFromCart: aString item: aString2 
	self shouldBeImplemented.! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'SN 11/24/2019 17:33:38' prior: 50832905!
removeFromCart: aCartID item: anItem 
	
	self error: 'CartID inválido'.! !

!testRun: #TusLibrosInternalInterfaceTest #test34RemoveFromCartRaisesErrorWhenCartIDDoesNotExist stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test32CheckoutCartWithOneElementHasOneItemInTicket stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test33CheckoutCartWithManyElementHasItemsInTicket stamp: 'SN 11/24/2019 17:33:58'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test34RemoveFromCartRaisesErrorWhenCartIDDoesNotExist stamp: 'SN 11/24/2019 17:33:58'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'SN 11/24/2019 17:35:16'!
test35RemoveFromCartCartRaisesErrorWhenItemIsNotInCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
		
	self should: [interface removeFromCart: cartID item: factory itemNotSellByTheStore]
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'Item is not in cart'.
		
	self assertThatListCartIsEmtyIn: interface ofCartID: cartID.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'SN 11/24/2019 17:36:40' prior: 50833065!
test35RemoveFromCartCartRaisesErrorWhenItemIsNotInCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	self should: [interface removeFromCart: cartID item: factory itemNotSellByTheStore]
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'Item is not in cart'.
		
	self assertThatListCartIsEmtyIn: interface ofCartID: cartID.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'SN 11/24/2019 17:37:33' prior: 50833083!
test35RemoveFromCartCartRaisesErrorWhenItemIsNotInCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
		
	self should: [interface removeFromCart: cartID item: factory itemNotSellByTheStore]
		 raise: Error - MessageNotUnderstood 
		 withMessageText: 'Item is not in cart'.
		
	self assertThatListCartIn: interface ofCartID: cartID includes: factory itemSellByTheStore aNumberOfTimes: 1.! !

!testRun: #TusLibrosInternalInterfaceTest #test35RemoveFromCartCartRaisesErrorWhenItemIsNotInCart stamp: 'SN 11/24/2019 17:37:35'!
FAILURE!

!testRun: #TusLibrosInternalInterfaceTest #test35RemoveFromCartCartRaisesErrorWhenItemIsNotInCart stamp: 'SN 11/24/2019 17:37:59'!
FAILURE!
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'SN 11/24/2019 17:39:19' prior: 50832911!
removeFromCart: aCartID item: anItem 
	
	self validateCartWith: aCartID.
	self error: 'Item not in cart'.! !

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test32CheckoutCartWithOneElementHasOneItemInTicket stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test33CheckoutCartWithManyElementHasItemsInTicket stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test34RemoveFromCartRaisesErrorWhenCartIDDoesNotExist stamp: 'SN 11/24/2019 17:39:26'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test35RemoveFromCartCartRaisesErrorWhenItemIsNotInCart stamp: 'SN 11/24/2019 17:39:26'!
FAILURE!

!testRun: #TusLibrosInternalInterfaceTest #test35RemoveFromCartCartRaisesErrorWhenItemIsNotInCart stamp: 'SN 11/24/2019 17:39:26'!
FAILURE!
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'SN 11/24/2019 17:40:42' prior: 50833135!
removeFromCart: aCartID item: anItem 
	
	self validateCartWith: aCartID.
	self error: 'Item is not in cart'.! !

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test32CheckoutCartWithOneElementHasOneItemInTicket stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test33CheckoutCartWithManyElementHasItemsInTicket stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test34RemoveFromCartRaisesErrorWhenCartIDDoesNotExist stamp: 'SN 11/24/2019 17:40:49'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test35RemoveFromCartCartRaisesErrorWhenItemIsNotInCart stamp: 'SN 11/24/2019 17:40:49'!
PASSED!
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'SN 11/24/2019 17:43:23'!
test36RemoveFromCartRemovesCorrectItemFromCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	interface addToCart: cartID item: factory anotherItemSellByTheStore withQuantity: 1.
	
	self assertThatListCartIn: interface ofCartID: cartID includes: factory itemSellByTheStore aNumberOfTimes: 1.! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'SN 11/24/2019 17:44:14' prior: 50833450!
test36RemoveFromCartRemovesCorrectItemFromCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	interface addToCart: cartID item: factory anotherItemSellByTheStore withQuantity: 1.
	
	interface removeFromCart: cartID item: factory anotherItemSellByTheStore .
	
	self assertThatListCartIn: interface ofCartID: cartID includes: factory itemSellByTheStore aNumberOfTimes: 1.! !
!TusLibrosInternalInterfaceTest methodsFor: 'assertions' stamp: 'SN 11/24/2019 17:46:23'!
denyThatListCartIn: interface ofCartID: cartID includes: aBook

	|listCart |
	
	listCart := interface listCart: cartID.
	
	self deny: (listCart includes: aBook).! !
!TusLibrosInternalInterfaceTest methodsFor: 'tests' stamp: 'SN 11/24/2019 17:47:40' prior: 50833470!
test36RemoveFromCartRemovesCorrectItemFromCart

	| interface cartID |

	interface := self createTusLibrosInternalInterfaceWithUserRegistry: userRegistry.
	cartID := interface createCartFor: edenUser withPassword: edenPassword.
	
	interface addToCart: cartID item: factory itemSellByTheStore withQuantity: 1.
	interface addToCart: cartID item: factory anotherItemSellByTheStore withQuantity: 1.
	
	interface removeFromCart: cartID item: factory anotherItemSellByTheStore .
	
	self assertThatListCartIn: interface ofCartID: cartID includes: factory itemSellByTheStore aNumberOfTimes: 1.
	self denyThatListCartIn: interface ofCartID: cartID includes: factory anotherItemSellByTheStore .! !

!testRun: #TusLibrosInternalInterfaceTest #test36RemoveFromCartRemovesCorrectItemFromCart stamp: 'SN 11/24/2019 17:47:43'!
ERROR!
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'SN 11/24/2019 17:49:03' prior: 50833295!
removeFromCart: aCartID item: anItem 
	
	self validateCartWith: aCartID.
	self error: 'Item is not in cart'.
	
	(carts at: aCartID ) remove: anItem ifAbsent: [].! !
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'SN 11/24/2019 17:49:11' prior: 50833530!
removeFromCart: aCartID item: anItem 
	
	self validateCartWith: aCartID.
	
	(carts at: aCartID ) remove: anItem ifAbsent: [self error: 'Item is not in cart'.].! !
!CartInterface methodsFor: 'initialization' stamp: 'SN 11/24/2019 17:51:36'!
remove: anItem ifAbsent: aColsure

	cart remove: anItem ifAbsent: aColsure.
	timeLastModified := clock localMillisecondClock.! !
!CartInterface methodsFor: 'initialization' stamp: 'SN 11/24/2019 17:53:27'!
remove: anItem

	cart remove: anItem.
	timeLastModified := clock localMillisecondClock.! !

!methodRemoval: CartInterface #remove:ifAbsent: stamp: 'SN 11/24/2019 17:53:32'!
remove: anItem ifAbsent: aColsure

	cart remove: anItem ifAbsent: aColsure.
	timeLastModified := clock localMillisecondClock.!
!CartTest methodsFor: 'tests' stamp: 'SN 11/24/2019 17:55:08'!
test09CanNotRemoveItemsThatDoNotBelongToCart

	| cart |
	
	cart := testObjectsFactory createCart.
	
	self 
		should: [ cart remove: testObjectsFactory itemNotSellByTheStore ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = 'Item is not in cart'.
			self assert: cart isEmpty ]! !
!CartTest methodsFor: 'tests' stamp: 'SN 11/24/2019 17:56:04' prior: 50833566!
test09CanNotRemoveItemsThatDoNotBelongToCart

	| cart |
	
	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore .
	
	self 
		should: [ cart remove: testObjectsFactory anotherItemSellByTheStore ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = 'Item is not in cart'.
			self assert: cart isEmpty ]! !
!CartTest methodsFor: 'tests' stamp: 'SN 11/24/2019 17:56:09' prior: 50833580!
test09CanNotRemoveItemsThatDoNotBelongToCart

	| cart |
	
	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore .
	
	self 
		should: [ cart remove: testObjectsFactory anotherItemSellByTheStore ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = 'Item is not in cart'.
			self deny: cart isEmpty ]! !

!testRun: #CartTest #test09CanNotRemoveItemsThatDoNotBelongToCart stamp: 'SN 11/24/2019 17:56:11'!
ERROR!
!Cart methodsFor: 'as yet unclassified' stamp: 'SN 11/24/2019 17:56:36'!
remove: aString 
	self shouldBeImplemented.! !
!Cart methodsFor: 'as yet unclassified' stamp: 'SN 11/24/2019 17:56:54' prior: 50833613!
remove: anItem 
	
	self error: 'Item is not in cart'.! !

!testRun: #CartTest #test09CanNotRemoveItemsThatDoNotBelongToCart stamp: 'SN 11/24/2019 17:56:59'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'SN 11/24/2019 17:56:59'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'SN 11/24/2019 17:56:59'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'SN 11/24/2019 17:56:59'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'SN 11/24/2019 17:56:59'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'SN 11/24/2019 17:56:59'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'SN 11/24/2019 17:56:59'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'SN 11/24/2019 17:56:59'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'SN 11/24/2019 17:56:59'!
PASSED!

!testRun: #CartTest #test09CanNotRemoveItemsThatDoNotBelongToCart stamp: 'SN 11/24/2019 17:56:59'!
PASSED!
!CartTest methodsFor: 'tests' stamp: 'SN 11/24/2019 17:57:56'!
test10RemoveCorrectItem

	| cart |
	
	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore .
	cart add: testObjectsFactory anotherItemSellByTheStore .
	
	self 
		should: [ cart remove: testObjectsFactory anotherItemSellByTheStore ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = 'Item is not in cart'.
			self deny: cart isEmpty ]! !
!CartTest methodsFor: 'tests' stamp: 'SN 11/24/2019 17:58:46' prior: 50833655!
test10RemoveCorrectItem

	| cart |
	
	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore .
	cart add: testObjectsFactory anotherItemSellByTheStore .
	
	cart remove: testObjectsFactory itemSellByTheStore .! !
!CartTest methodsFor: 'tests' stamp: 'SN 11/24/2019 17:59:49' prior: 50833671!
test10RemoveCorrectItem

	| cart |
	
	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore .
	cart add: testObjectsFactory anotherItemSellByTheStore .
	
	cart remove: testObjectsFactory itemSellByTheStore .
	
	self assert: cart list includes: testObjectsFactory anotherItemSellByTheStore .
	self deny: (cart list includes: testObjectsFactory itemNotSellByTheStore ).! !

!testRun: #CartTest #test10RemoveCorrectItem stamp: 'SN 11/24/2019 17:59:51'!
ERROR!
!Cart methodsFor: 'as yet unclassified' stamp: 'SN 11/24/2019 18:00:40' prior: 50833618!
remove: anItem 
	
	items remove: anItem ifAbsent: [self error: 'Item is not in cart'.].! !

!testRun: #CartTest #test10RemoveCorrectItem stamp: 'SN 11/24/2019 18:00:51'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'SN 11/24/2019 18:00:51'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'SN 11/24/2019 18:00:51'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'SN 11/24/2019 18:00:51'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'SN 11/24/2019 18:00:51'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'SN 11/24/2019 18:00:51'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'SN 11/24/2019 18:00:51'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'SN 11/24/2019 18:00:51'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'SN 11/24/2019 18:00:51'!
PASSED!

!testRun: #CartTest #test09CanNotRemoveItemsThatDoNotBelongToCart stamp: 'SN 11/24/2019 18:00:51'!
PASSED!

!testRun: #CartTest #test10RemoveCorrectItem stamp: 'SN 11/24/2019 18:00:51'!
PASSED!
!CartTest methodsFor: 'tests' stamp: 'SN 11/24/2019 18:02:05'!
test11RemoveCorrectItemOnce

	| cart |
	
	cart := testObjectsFactory createCart.
	cart add: 5 of: testObjectsFactory itemSellByTheStore .
	cart add: testObjectsFactory anotherItemSellByTheStore .
	
	cart remove: testObjectsFactory itemSellByTheStore .
	
	self assert: cart list includes: testObjectsFactory anotherItemSellByTheStore .
	self assert: (cart list occurrencesOf: testObjectsFactory itemNotSellByTheStore ) equals: 4.! !

!testRun: #CartTest #test11RemoveCorrectItemOnce stamp: 'SN 11/24/2019 18:02:06'!
FAILURE!
!CartTest methodsFor: 'tests' stamp: 'SN 11/24/2019 18:02:37' prior: 50833741!
test11RemoveCorrectItemOnce

	| cart |
	
	cart := testObjectsFactory createCart.
	cart add: 5 of: testObjectsFactory itemSellByTheStore .
	cart add: testObjectsFactory anotherItemSellByTheStore .
	
	cart remove: testObjectsFactory itemSellByTheStore .
	
	self assert: cart list includes: testObjectsFactory anotherItemSellByTheStore .
	self assert: (cart list occurrencesOf: testObjectsFactory itemSellByTheStore ) equals: 4.! !

!testRun: #CartTest #test11RemoveCorrectItemOnce stamp: 'SN 11/24/2019 18:02:37'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'SN 11/24/2019 18:02:37'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'SN 11/24/2019 18:02:37'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'SN 11/24/2019 18:02:37'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'SN 11/24/2019 18:02:37'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'SN 11/24/2019 18:02:37'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'SN 11/24/2019 18:02:37'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'SN 11/24/2019 18:02:37'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'SN 11/24/2019 18:02:37'!
PASSED!

!testRun: #CartTest #test09CanNotRemoveItemsThatDoNotBelongToCart stamp: 'SN 11/24/2019 18:02:37'!
PASSED!

!testRun: #CartTest #test10RemoveCorrectItem stamp: 'SN 11/24/2019 18:02:37'!
PASSED!

!testRun: #CartTest #test11RemoveCorrectItemOnce stamp: 'SN 11/24/2019 18:02:37'!
PASSED!
!CartTest methodsFor: 'tests' stamp: 'SN 11/24/2019 18:02:47' prior: 50833682!
test10RemoveCorrectItem

	| cart |
	
	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore .
	cart add: testObjectsFactory anotherItemSellByTheStore .
	
	cart remove: testObjectsFactory itemSellByTheStore .
	
	self assert: cart list includes: testObjectsFactory anotherItemSellByTheStore .
	self deny: (cart list includes: testObjectsFactory itemSellByTheStore ).! !

!testRun: #CartTest #test10RemoveCorrectItem stamp: 'SN 11/24/2019 18:02:48'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'SN 11/24/2019 18:02:48'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'SN 11/24/2019 18:02:48'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'SN 11/24/2019 18:02:48'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'SN 11/24/2019 18:02:48'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'SN 11/24/2019 18:02:48'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'SN 11/24/2019 18:02:48'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'SN 11/24/2019 18:02:48'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'SN 11/24/2019 18:02:48'!
PASSED!

!testRun: #CartTest #test09CanNotRemoveItemsThatDoNotBelongToCart stamp: 'SN 11/24/2019 18:02:48'!
PASSED!

!testRun: #CartTest #test10RemoveCorrectItem stamp: 'SN 11/24/2019 18:02:48'!
PASSED!

!testRun: #CartTest #test11RemoveCorrectItemOnce stamp: 'SN 11/24/2019 18:02:48'!
PASSED!
!TusLibrosInternalInterface methodsFor: 'cart managment' stamp: 'SN 11/24/2019 18:03:18' prior: 50833539!
removeFromCart: aCartID item: anItem 
	
	self validateCartWith: aCartID.
	
	(carts at: aCartID ) remove: anItem.! !

!testRun: #TusLibrosInternalInterfaceTest #test01CreateCartRaisesErrorWhenNonExistentUser stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test02CreateCartRaisesErrorWhenPasswordDoesNotMatch stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test03CreateCartCreatesACartWithValidUser stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test04CreateCartTwiceCreatesTwoCartsWithDifferentIDs stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test05ListCartRaisesErrorWhenCartIDDoesNotExist stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test06ListCartListsNothingWhenCartIsJustCreated stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test07AddToCartRaisesErrorWhenCartIDDoesNotExist stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test08AddToCartRaisesErrorWhenItemIsNotSoldByTheStore stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test09AddToCartRaisesErrorWhenQuantityIsZero stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test10AddToCartListsOneItem stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test11AddABookTwiceToCartListsTwoItem stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test12AddTwoDifferentBookToCartListsTwoDifferentItems stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test13ListCartDoesNotListItemNotIncludedInCart stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test14ShouldRaiseErrorWhenAddingAnItemToAnExpiredCart stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test15ShouldRaiseErrorWhenListingAnExpiredCart stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test16ShouldNotRaiseErrorWhenAddingAnItemTo30minOldCart stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test17ShouldNotRaiseErrorWhenAddingBooksToCartWithLagOf30minutes stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test18CheckoutCartShouldRaiseErrorWithInvalidCartId stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test19CheckoutCartShouldRaiseErrorWithEmptyCardName stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test20CheckoutCartShouldRaiseErrorWithTooLongCardName stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test21CheckoutCartShouldRaiseErrorWithExpiredCard stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test22CheckoutCartShouldRaiseErrorWithEmptyCart stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test23CheckoutCartWithOneElementListsOnePurchase stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test24CheckoutCartWithTwoElementListsTwoPurchase stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test25CheckoutCartWithTwoEqualElementsListsTwoPurchase stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test26CheckoutCartWithOneElementListsOnlySameUserPurchases stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test27ListPurchasesRaisesErrorWhenTheUserDoesNotExist stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test28ListPurchasesRaisesErrorWhenTheUserAndPasswordDontMatch stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test29ListPurchasesIsEmptyWhenTheUserDoesntCheckout stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test30CheckoutCartShouldRaiseErrorWithExpiredCart stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test31CheckoutCartShouldRaiseErrorWithMerchantProcessorError stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test32CheckoutCartWithOneElementHasOneItemInTicket stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test33CheckoutCartWithManyElementHasItemsInTicket stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test34RemoveFromCartRaisesErrorWhenCartIDDoesNotExist stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test35RemoveFromCartCartRaisesErrorWhenItemIsNotInCart stamp: 'SN 11/24/2019 18:03:31'!
PASSED!

!testRun: #TusLibrosInternalInterfaceTest #test36RemoveFromCartRemovesCorrectItemFromCart stamp: 'SN 11/24/2019 18:03:31'!
PASSED!
!TusLibrosController methodsFor: 'initialization' stamp: 'SN 11/24/2019 18:04:11' prior: 50832775!
initializeWith: aListeningPort

	tusLibros := TusLibrosInternalInterface withUsers: self userList withCatalog: self catalog withClock: Time withAMerchantProcessor: self merchantProcessor.
	
	port := aListeningPort .
	
	webServer := WebServer new listenOn: aListeningPort .
	
	webServer addService: '/helloWorld' action: (self handleWith: #helloWorld).
	webServer addService: '/createCart' action: (self handleWith: #createCart).
	webServer addService: '/getCatalog' action: (self handleWith: #getCatalog).
	webServer addService: '/addToCart' action: (self handleWith: #addToCart).
	webServer addService: '/listCart' action: (self handleWith: #listCart).
	webServer addService: '/checkoutCart' action: (self handleWith: #checkoutCart).
	webServer addService: '/listPurchases' action: (self handleWith: #listPurchases).
	webServer addService: '/removeFromCart' action: (self handleWith: #removeFromCart).! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/24/2019 18:04:24'!
removeFromCart

	! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/24/2019 18:04:53' prior: 50834060!
removeFromCart

	
	| bookISBN cartID |

	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	bookISBN := req fields at: 'isbn' ifAbsent: self badRequestResponse.! !
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/24/2019 18:05:31' prior: 50834064!
removeFromCart

	
	| bookISBN cartID |

	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	bookISBN := req fields at: 'isbn' ifAbsent: self badRequestResponse.
	
	tusLibros removeFromCart: cartID item: bookISBN .
	^ self successResponse .! !

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'services - private' stamp: 'SN 11/24/2019 18:07:03' prior: 50834073!
removeFromCart

	
	| bookISBN cartID |

	cartID := req fields at: 'cartID' ifAbsent: self badRequestResponse.
	bookISBN := req fields at: 'isbn' ifAbsent: self badRequestResponse.
	
	tusLibros removeFromCart: cartID asInteger item: bookISBN .
	^ self successResponse .! !

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'dispatching - private' stamp: 'SN 11/24/2019 18:09:13' prior: 50831830!
safeSend: aSelector

	^ [ aSelector sendTo: self ]
	   on: Error 
	   do: [ :anError |
			req send404Response: (anError messageText) ].! !
!TusLibrosController methodsFor: 'dispatching - private' stamp: 'SN 11/24/2019 18:09:40' prior: 50834105!
safeSend: aSelector

	^ [ aSelector sendTo: self ]
	   on: Error 
	   do: [ :anError |
			req send404Response: (anError messageText) ].! !
!TusLibrosController methodsFor: 'dispatching - private' stamp: 'SN 11/24/2019 18:09:56' prior: 50834113!
safeSend: aSelector

	^ [ aSelector sendTo: self ]
	   on: Error 
	   do: [ :anError |
			req send404Response: anError messageText ].! !
!TusLibrosController methodsFor: 'dispatching - private' stamp: 'SN 11/24/2019 18:10:35' prior: 50834121!
safeSend: aSelector

	^ [ aSelector sendTo: self ]
	   on: Error 
	   do: [ :anError |
			req send404Response: (self jsonSimpleResponseWithKey: 'message' value: anError messageText) ].! !

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!

----SNAPSHOT----(24 November 2019 18:12:22) CuisUniversity-3938.image priorSource: 16030196!

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'dispatching - private' stamp: 'SN 11/25/2019 20:16:05' prior: 50834129!
safeSend: aSelector

	^ [ aSelector sendTo: self ]
	   on: Error 
	   do: [ :anError |
			req send404Response: (self jsonSimpleResponseWithKey: 'message_eden' value: anError messageText) ].! !

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'dispatching - private' stamp: 'SN 11/25/2019 20:17:45' prior: 50834153!
safeSend: aSelector

	^ [ aSelector sendTo: self ]
	   on: Error 
	   do: [ :anError |
			^ req send404Response: (self jsonSimpleResponseWithKey: 'message_eden' value: anError messageText) ].! !

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'dispatching - private' stamp: 'SN 11/25/2019 20:18:08' prior: 50834167!
safeSend: aSelector

	^ [ aSelector sendTo: self ]
	   on: Error 
	   do: [ :anError |
			req send404Response: (self jsonSimpleResponseWithKey: 'message_eden' value: anError messageText) ].! !
!TusLibrosController methodsFor: 'dispatching - private' stamp: 'SN 11/25/2019 20:18:48' prior: 50834181!
safeSend: aSelector

	^ [ aSelector sendTo: self ]
	   on: Error 
	   do: [ :anError |
			req send400Response ].! !

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'dispatching - private' stamp: 'SN 11/25/2019 20:19:14' prior: 50834191!
safeSend: aSelector

	^ [ aSelector sendTo: self ]
	   on: Error 
	   do: [ :anError |
			req send404Response: (self jsonSimpleResponseWithKey: 'message_eden' value: anError messageText). ].! !
!TusLibrosController methodsFor: 'dispatching - private' stamp: 'SN 11/25/2019 20:19:52' prior: 50834202!
safeSend: aSelector

	^ [ aSelector sendTo: self ]
	   on: Error 
	   do: [ :anError |
			req send404Response: (self jsonSimpleResponseWithKey: 'message_eden' value: anError messageText). ].! !
!TusLibrosController methodsFor: 'dispatching - private' stamp: 'SN 11/25/2019 20:20:15' prior: 50834212!
safeSend: aSelector

	^ [ aSelector sendTo: self ]
	   on: Error 
	   do: [ :anError |
			req send404Response: (self jsonSimpleResponseWithKey: 'message_eden' value: anError messageText) do: [:resp |  resp headerAt: 'Access-Control-Allow-Origin' put: '*'.]. ].! !

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!
!WebRequest methodsFor: 'responses' stamp: 'SN 11/25/2019 20:23:54' prior: 50825402!
send404Response: body do: aBlock
	"Send a 404 not found response"

	| resp |
	resp := self newResponse protocol: 'HTTP/1.1' code: 404.
	resp headerAt: 'Content-Type' put: 'text/html; charset=utf-8'.
	aBlock value: resp.
	"self sendResponse: resp content: body."
	self sendResponseCode: 404 
		content: body
		type: 'text/plain; charset=utf-8'
		close: true
! !

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!
!WebRequest methodsFor: 'responses' stamp: 'ar 2/25/2010 16:32' prior: 50834237!
send404Response: body do: aBlock
	"Send a 404 not found response"

	| resp |
	resp := self newResponse protocol: 'HTTP/1.1' code: 404.
	resp headerAt: 'Content-Type' put: 'text/html; charset=utf-8'.
	aBlock value: resp.
	^self sendResponse: resp content: body.
! !
!TusLibrosController methodsFor: 'dispatching - private' stamp: 'SN 11/25/2019 20:25:05' prior: 50834222!
safeSend: aSelector

	^ [ aSelector sendTo: self ]
	   on: Error 
	   do: [ :anError |
			req send404Response: (self jsonSimpleResponseWithKey: 'message_eden' value: anError messageText)].! !
!TusLibrosController methodsFor: 'dispatching - private' stamp: 'SN 11/25/2019 20:25:28' prior: 50834267!
safeSend: aSelector

	^ [ aSelector sendTo: self ]
	   on: Error 
	   do: [ :anError |
			req send404Response: (self jsonSimpleResponseWithKey: 'messfgddgage_eden' value: anError messageText)].! !

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'dispatching - private' stamp: 'SN 11/25/2019 20:29:40' prior: 50834277!
safeSend: aSelector

	^ [ aSelector sendTo: self ]
	   on: Error 
	   do: [ :anError |
			req send405Response: (self jsonSimpleResponseWithKey: 'messfgddgage_eden' value: anError messageText)].! !
!TusLibrosController methodsFor: 'dispatching - private' stamp: 'SN 11/25/2019 20:30:55' prior: 50834291!
safeSend: aSelector

	^ [ aSelector sendTo: self ]
	   on: Error 
	   do: [ :anError |
			self halt.
			req send405Response: (self jsonSimpleResponseWithKey: 'messfgddgage_eden' value: anError messageText)].! !

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'dispatching - private' stamp: 'SN 11/25/2019 20:32:36' prior: 50834301!
safeSend: aSelector

	^ [ aSelector sendTo: self ]
	   on: Error 
	   do: [ :anError |
			req send405Response: (self jsonSimpleResponseWithKey: 'messfgddgage_eden' value: anError messageText)].! !
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/25/2019 20:34:09' prior: 50832646!
jsonSimpleResponseWithKey: aKey value: aValue

	^ self render: self buildSimpleJsonWithKey: aKey value: aValue .! !
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/25/2019 20:34:39'!
buildSimpleJsonWithKey: aKey value: aValue

	^ (WebUtils jsonEncode: (Dictionary new at: aKey put: aValue; yourself )).! !
!TusLibrosController methodsFor: 'dispatching - private' stamp: 'SN 11/25/2019 20:35:05' prior: 50834315!
safeSend: aSelector

	^ [ aSelector sendTo: self ]
	   on: Error 
	   do: [ :anError |
			req send405Response: (self buildSimpleJsonWithKey: 'message' value: anError messageText)].! !
!TusLibrosController methodsFor: 'dispatching - private' stamp: 'SN 11/25/2019 20:35:16' prior: 50834340!
safeSend: aSelector

	^ [ aSelector sendTo: self ]
	   on: Error 
	   do: [ :anError |
			req send404Response: (self buildSimpleJsonWithKey: 'message' value: anError messageText)].! !

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/25/2019 20:39:56' prior: 50834325!
jsonSimpleResponseWithKey: aKey value: aValue

	^ self render: (self buildSimpleJsonWithKey: aKey value: aValue) .! !

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'dispatching - private' stamp: 'SN 11/25/2019 20:43:56' prior: 50834350!
safeSend: aSelector

	^ [ aSelector sendTo: self ]
	   on: Error 
	   do: [ :anError |
			req send404Response: (self buildSimpleJsonWithKey: 'message' value: anError messageText) do: [:resp |  resp headerAt: 'Access-Control-Allow-Origin' put: '*'.]].! !

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!
!TusLibrosController methodsFor: 'dispatching - private' stamp: 'SN 11/26/2019 15:49:27' prior: 50834374!
safeSend: aSelector

	^ [ aSelector sendTo: self ]
	   on: Error 
	   do: [ :anError |
			req send404Response: (self buildSimpleJsonWithKey: 'message' value: anError messageText) do: self responseHeaders].! !
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/26/2019 15:50:04'!
responseHeaders

	^ [:resp | 
		resp headerAt: 'Access-Control-Allow-Origin' put: '*'.
		resp headerAt: 'Content-Type' put: 'application/json; charset=utf-8'.]! !
!TusLibrosController methodsFor: 'rendering - private' stamp: 'SN 11/26/2019 15:50:58' prior: 50832701!
render: aResponse

	^ req send200Response: aResponse
		   contentType: 'application/json; charset=utf-8'
		   do: self responseHeaders .! !

TusLibrosController allInstancesDo: [:e | e stopListening; destroy].!

server := TusLibrosController listeningOn: 8082.!